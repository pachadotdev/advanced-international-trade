<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Advanced International Trade in R - Chapter 8. Import Quotas and Export Subsidies</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<link href="./chapter7.html" rel="prev">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "sidebar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "start",
  "type": "textbox",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


</head>

<body class="nav-sidebar floating">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="./chapter8.html"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
      <button type="button" class="btn quarto-search-button" aria-label="" onclick="window.quartoOpenSearch();">
        <i class="bi bi-search"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="pt-lg-2 mt-2 text-left sidebar-header">
    <div class="sidebar-title mb-0 py-0">
      <a href="./">Advanced International Trade in R</a> 
    </div>
      </div>
        <div class="mt-2 flex-shrink-0 align-items-center">
        <div class="sidebar-search">
        <div id="quarto-search" class="" title="Search"></div>
        </div>
        </div>
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./index.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">About</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter2.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 2. The Heckscher-Ohlin Model</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter4.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 4. Trade in Intermediate Inputs and Wages</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter5.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 5. Increasing Returns and the Gravity Equation</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter7.html" class="sidebar-item-text sidebar-link"><span class="chapter-title">Chapter 7. Import Tariffs and Dumping</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./chapter8.html" class="sidebar-item-text sidebar-link active"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></a>
  </div>
</li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#empirical-exercise" id="toc-empirical-exercise" class="nav-link active" data-scroll-target="#empirical-exercise">Empirical exercise</a></li>
  <li><a href="#documentation" id="toc-documentation" class="nav-link" data-scroll-target="#documentation">Documentation</a></li>
  <li><a href="#exercise-1" id="toc-exercise-1" class="nav-link" data-scroll-target="#exercise-1">Exercise 1</a>
  <ul class="collapse">
  <li><a href="#feenstras-code" id="toc-feenstras-code" class="nav-link" data-scroll-target="#feenstras-code">Feenstra’s code</a></li>
  <li><a href="#my-code" id="toc-my-code" class="nav-link" data-scroll-target="#my-code">My code</a></li>
  </ul></li>
  <li><a href="#exercise-2" id="toc-exercise-2" class="nav-link" data-scroll-target="#exercise-2">Exercise 2</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-1" id="toc-feenstras-code-1" class="nav-link" data-scroll-target="#feenstras-code-1">Feenstra’s code</a></li>
  <li><a href="#my-code-1" id="toc-my-code-1" class="nav-link" data-scroll-target="#my-code-1">My code</a></li>
  </ul></li>
  <li><a href="#exercise-3" id="toc-exercise-3" class="nav-link" data-scroll-target="#exercise-3">Exercise 3</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-2" id="toc-feenstras-code-2" class="nav-link" data-scroll-target="#feenstras-code-2">Feenstra’s code</a></li>
  <li><a href="#my-code-2" id="toc-my-code-2" class="nav-link" data-scroll-target="#my-code-2">My code</a></li>
  </ul></li>
  <li><a href="#exercise-4" id="toc-exercise-4" class="nav-link" data-scroll-target="#exercise-4">Exercise 4</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-3" id="toc-feenstras-code-3" class="nav-link" data-scroll-target="#feenstras-code-3">Feenstra’s code</a></li>
  <li><a href="#my-code-3" id="toc-my-code-3" class="nav-link" data-scroll-target="#my-code-3">My code</a></li>
  </ul></li>
  <li><a href="#exercise-5" id="toc-exercise-5" class="nav-link" data-scroll-target="#exercise-5">Exercise 5</a>
  <ul class="collapse">
  <li><a href="#feenstras-code-4" id="toc-feenstras-code-4" class="nav-link" data-scroll-target="#feenstras-code-4">Feenstra’s code</a></li>
  <li><a href="#my-code-4" id="toc-my-code-4" class="nav-link" data-scroll-target="#my-code-4">My code</a></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title"><span class="chapter-title">Chapter 8. Import Quotas and Export Subsidies</span></h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="empirical-exercise" class="level2">
<h2 class="anchored" data-anchor-id="empirical-exercise">Empirical exercise</h2>
<p>This exercise is to reproduce regression results Feenstra (1988a). To complete the exercise, the files “car_7990.dta, truck_7990.dta” should be stored in <code>Chapter-8</code>.</p>
</section>
<section id="documentation" class="level2">
<h2 class="anchored" data-anchor-id="documentation">Documentation</h2>
<p>Data Description for Feenstra (1988a):</p>
<ol type="1">
<li><code>car.dta</code>: This STATA file contains car’s various characteristics, such as weight (wght), width (wdth), height (hght), horse power (hs), four-wheel (four), transmission (tran), power steering (ps) and air condition (ac) for 1979-1990. It also includes each model’s sales (quan) and price.</li>
<li><code>truck.dta</code>: This STATA file contains truck’s various characteristics, such as weight (wght), width (wdth), height (hght), horse power (hs), four-wheel (four), transmission (tran), power steering (ps) and air condition (ac) for 1979-1990. It also includes each model’s sale (quan) and price, though sales are missing after 1985.</li>
</ol>
</section>
<section id="exercise-1" class="level2">
<h2 class="anchored" data-anchor-id="exercise-1">Exercise 1</h2>
<p>Run the programs <code>pindex_c.do</code>, <code>pindex_t.do</code>, <code>unit_value.do</code> to reproduce the price indexes and unit-values for cars and trucks in Table 8.3. What formula is used for the price indexes, and how does this differ from the unit-values?</p>
<section id="feenstras-code" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code">Feenstra’s code</h3>
<section id="pindex_c.do" class="level4">
<h4 class="anchored" data-anchor-id="pindex_c.do">pindex_c.do</h4>
<div class="sourceCode" id="cb1"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\pindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> price price_80</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_80,<span class="kw">replace</span></span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_80</span>
<span id="cb1-19"><a href="#cb1-19" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb1-20"><a href="#cb1-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb1-21"><a href="#cb1-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-22"><a href="#cb1-22" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb1-23"><a href="#cb1-23" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-24"><a href="#cb1-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-25"><a href="#cb1-25" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb1-26"><a href="#cb1-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-27"><a href="#cb1-27" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-28"><a href="#cb1-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-29"><a href="#cb1-29" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb1-30"><a href="#cb1-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb1-31"><a href="#cb1-31" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb1-32"><a href="#cb1-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-33"><a href="#cb1-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb1-34"><a href="#cb1-34" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb1-35"><a href="#cb1-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-36"><a href="#cb1-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_c.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_c.<span class="fu">log</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb2-14"><a href="#cb2-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 18:40:59</span>
<span id="cb2-15"><a href="#cb2-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-16"><a href="#cb2-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb2-21"><a href="#cb2-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-22"><a href="#cb2-22" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-23"><a href="#cb2-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb2-24"><a href="#cb2-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-25"><a href="#cb2-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb2-26"><a href="#cb2-26" aria-hidden="true" tabindex="-1"></a>(260 observations deleted)</span>
<span id="cb2-27"><a href="#cb2-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-28"><a href="#cb2-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb2-29"><a href="#cb2-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-30"><a href="#cb2-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> price price_80</span>
<span id="cb2-31"><a href="#cb2-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-32"><a href="#cb2-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb2-33"><a href="#cb2-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-34"><a href="#cb2-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb2-35"><a href="#cb2-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-36"><a href="#cb2-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\c</span>
<span id="cb2-37"><a href="#cb2-37" aria-hidden="true" tabindex="-1"></a>&gt; ar_80,<span class="kw">replace</span></span>
<span id="cb2-38"><a href="#cb2-38" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car</span>
<span id="cb2-39"><a href="#cb2-39" aria-hidden="true" tabindex="-1"></a>&gt; _80.dta saved</span>
<span id="cb2-40"><a href="#cb2-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-41"><a href="#cb2-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb2-42"><a href="#cb2-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-43"><a href="#cb2-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-44"><a href="#cb2-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb2-45"><a href="#cb2-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-46"><a href="#cb2-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb2-47"><a href="#cb2-47" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\car_80</span>
<span id="cb2-48"><a href="#cb2-48" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb2-49"><a href="#cb2-49" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb2-50"><a href="#cb2-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-51"><a href="#cb2-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb2-52"><a href="#cb2-52" aria-hidden="true" tabindex="-1"></a>(55 observations deleted)</span>
<span id="cb2-53"><a href="#cb2-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-54"><a href="#cb2-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb2-55"><a href="#cb2-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-56"><a href="#cb2-56" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-57"><a href="#cb2-57" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb2-58"><a href="#cb2-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-59"><a href="#cb2-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-60"><a href="#cb2-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-61"><a href="#cb2-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-62"><a href="#cb2-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-63"><a href="#cb2-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb2-64"><a href="#cb2-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-65"><a href="#cb2-65" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-66"><a href="#cb2-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-67"><a href="#cb2-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-68"><a href="#cb2-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-69"><a href="#cb2-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-70"><a href="#cb2-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb2-71"><a href="#cb2-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-72"><a href="#cb2-72" aria-hidden="true" tabindex="-1"></a>.  </span>
<span id="cb2-73"><a href="#cb2-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb2-74"><a href="#cb2-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-75"><a href="#cb2-75" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-76"><a href="#cb2-76" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb2-77"><a href="#cb2-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-78"><a href="#cb2-78" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb2-79"><a href="#cb2-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-80"><a href="#cb2-80" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb2-81"><a href="#cb2-81" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     pindex |</span>
<span id="cb2-82"><a href="#cb2-82" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-83"><a href="#cb2-83" aria-hidden="true" tabindex="-1"></a>  1. |   79      .9663 |</span>
<span id="cb2-84"><a href="#cb2-84" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb2-85"><a href="#cb2-85" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.197522 |</span>
<span id="cb2-86"><a href="#cb2-86" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.289163 |</span>
<span id="cb2-87"><a href="#cb2-87" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.312988 |</span>
<span id="cb2-88"><a href="#cb2-88" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-89"><a href="#cb2-89" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.389093 |</span>
<span id="cb2-90"><a href="#cb2-90" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.477987 |</span>
<span id="cb2-91"><a href="#cb2-91" aria-hidden="true" tabindex="-1"></a>  8. |   86   1.668846 |</span>
<span id="cb2-92"><a href="#cb2-92" aria-hidden="true" tabindex="-1"></a>  9. |   87   1.885685 |</span>
<span id="cb2-93"><a href="#cb2-93" aria-hidden="true" tabindex="-1"></a> 10. |   88    2.04798 |</span>
<span id="cb2-94"><a href="#cb2-94" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb2-95"><a href="#cb2-95" aria-hidden="true" tabindex="-1"></a> 11. |   89   2.082082 |</span>
<span id="cb2-96"><a href="#cb2-96" aria-hidden="true" tabindex="-1"></a> 12. |   90    2.10851 |</span>
<span id="cb2-97"><a href="#cb2-97" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb2-98"><a href="#cb2-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-99"><a href="#cb2-99" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-100"><a href="#cb2-100" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb2-101"><a href="#cb2-101" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb2-102"><a href="#cb2-102" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb2-103"><a href="#cb2-103" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_c.<span class="fu">log</span></span>
<span id="cb2-104"><a href="#cb2-104" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb2-105"><a href="#cb2-105" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 18:41:01</span>
<span id="cb2-106"><a href="#cb2-106" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb2-107"><a href="#cb2-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-108"><a href="#cb2-108" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb2-109"><a href="#cb2-109" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="pindex_t.do" class="level4">
<h4 class="anchored" data-anchor-id="pindex_t.do">pindex_t.do</h4>
<div class="sourceCode" id="cb3"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\pindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> price price_80</span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb3-13"><a href="#cb3-13" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb3-14"><a href="#cb3-14" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_80,<span class="kw">replace</span></span>
<span id="cb3-15"><a href="#cb3-15" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb3-16"><a href="#cb3-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-17"><a href="#cb3-17" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb3-18"><a href="#cb3-18" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_80</span>
<span id="cb3-19"><a href="#cb3-19" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb3-20"><a href="#cb3-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb3-21"><a href="#cb3-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-22"><a href="#cb3-22" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb3-23"><a href="#cb3-23" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-24"><a href="#cb3-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb3-30"><a href="#cb3-30" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb3-31"><a href="#cb3-31" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb3-32"><a href="#cb3-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-33"><a href="#cb3-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb3-34"><a href="#cb3-34" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb3-35"><a href="#cb3-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb3-36"><a href="#cb3-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\pindex_t.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_t.<span class="fu">log</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 18:59:29</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>(110 observations deleted)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> price quan</span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> price price_80</span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-32"><a href="#cb4-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb4-33"><a href="#cb4-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>&gt; ruck_80,<span class="kw">replace</span></span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb4-39"><a href="#cb4-39" aria-hidden="true" tabindex="-1"></a>&gt; ck_80.dta saved</span>
<span id="cb4-40"><a href="#cb4-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-41"><a href="#cb4-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb4-42"><a href="#cb4-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-43"><a href="#cb4-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-44"><a href="#cb4-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb4-45"><a href="#cb4-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-46"><a href="#cb4-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb4-47"><a href="#cb4-47" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\truck_80</span>
<span id="cb4-48"><a href="#cb4-48" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb4-49"><a href="#cb4-49" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb4-50"><a href="#cb4-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-51"><a href="#cb4-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb4-52"><a href="#cb4-52" aria-hidden="true" tabindex="-1"></a>(38 observations deleted)</span>
<span id="cb4-53"><a href="#cb4-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-54"><a href="#cb4-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb4-55"><a href="#cb4-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-56"><a href="#cb4-56" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-57"><a href="#cb4-57" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb4-58"><a href="#cb4-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-59"><a href="#cb4-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(price_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-60"><a href="#cb4-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-61"><a href="#cb4-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(price*quan_80),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-62"><a href="#cb4-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-63"><a href="#cb4-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb4-64"><a href="#cb4-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-65"><a href="#cb4-65" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-66"><a href="#cb4-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(price*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-67"><a href="#cb4-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-68"><a href="#cb4-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(price_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-69"><a href="#cb4-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-70"><a href="#cb4-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb4-71"><a href="#cb4-71" aria-hidden="true" tabindex="-1"></a>(21 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb4-72"><a href="#cb4-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-73"><a href="#cb4-73" aria-hidden="true" tabindex="-1"></a>.  </span>
<span id="cb4-74"><a href="#cb4-74" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pindex=(lasp*pasp)^0.5</span>
<span id="cb4-75"><a href="#cb4-75" aria-hidden="true" tabindex="-1"></a>(21 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb4-76"><a href="#cb4-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-77"><a href="#cb4-77" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-78"><a href="#cb4-78" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) pindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb4-79"><a href="#cb4-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-80"><a href="#cb4-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb4-81"><a href="#cb4-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-82"><a href="#cb4-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb4-83"><a href="#cb4-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     pindex |</span>
<span id="cb4-84"><a href="#cb4-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-85"><a href="#cb4-85" aria-hidden="true" tabindex="-1"></a>  1. |   79    .970215 |</span>
<span id="cb4-86"><a href="#cb4-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb4-87"><a href="#cb4-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.278085 |</span>
<span id="cb4-88"><a href="#cb4-88" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.309353 |</span>
<span id="cb4-89"><a href="#cb4-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.210055 |</span>
<span id="cb4-90"><a href="#cb4-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-91"><a href="#cb4-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.230847 |</span>
<span id="cb4-92"><a href="#cb4-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.252268 |</span>
<span id="cb4-93"><a href="#cb4-93" aria-hidden="true" tabindex="-1"></a>  8. |   86          . |</span>
<span id="cb4-94"><a href="#cb4-94" aria-hidden="true" tabindex="-1"></a>  9. |   87          . |</span>
<span id="cb4-95"><a href="#cb4-95" aria-hidden="true" tabindex="-1"></a> 10. |   88          . |</span>
<span id="cb4-96"><a href="#cb4-96" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb4-97"><a href="#cb4-97" aria-hidden="true" tabindex="-1"></a> 11. |   89          . |</span>
<span id="cb4-98"><a href="#cb4-98" aria-hidden="true" tabindex="-1"></a> 12. |   90          . |</span>
<span id="cb4-99"><a href="#cb4-99" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb4-100"><a href="#cb4-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-101"><a href="#cb4-101" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-102"><a href="#cb4-102" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb4-103"><a href="#cb4-103" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb4-104"><a href="#cb4-104" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb4-105"><a href="#cb4-105" aria-hidden="true" tabindex="-1"></a>&gt; er-8\pindex_t.<span class="fu">log</span></span>
<span id="cb4-106"><a href="#cb4-106" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb4-107"><a href="#cb4-107" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 18:59:31</span>
<span id="cb4-108"><a href="#cb4-108" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb4-109"><a href="#cb4-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-110"><a href="#cb4-110" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb4-111"><a href="#cb4-111" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="unit_value.do" class="level4">
<h4 class="anchored" data-anchor-id="unit_value.do">unit_value.do</h4>
<div class="sourceCode" id="cb5"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\unit_value.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-18"><a href="#cb5-18" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-19"><a href="#cb5-19" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb5-20"><a href="#cb5-20" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb5-21"><a href="#cb5-21" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb5-22"><a href="#cb5-22" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb5-23"><a href="#cb5-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-24"><a href="#cb5-24" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb5-25"><a href="#cb5-25" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_value.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_value.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_value.<span class="fu">log</span></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 19:13:08</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb6-18"><a href="#cb6-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb6-19"><a href="#cb6-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-20"><a href="#cb6-20" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-21"><a href="#cb6-21" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb6-22"><a href="#cb6-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-23"><a href="#cb6-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-24"><a href="#cb6-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-25"><a href="#cb6-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-26"><a href="#cb6-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-27"><a href="#cb6-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb6-28"><a href="#cb6-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-29"><a href="#cb6-29" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-30"><a href="#cb6-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-31"><a href="#cb6-31" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb6-32"><a href="#cb6-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-33"><a href="#cb6-33" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-34"><a href="#cb6-34" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     uvalue |</span>
<span id="cb6-35"><a href="#cb6-35" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-36"><a href="#cb6-36" aria-hidden="true" tabindex="-1"></a>  1. |   79   4945.603 |</span>
<span id="cb6-37"><a href="#cb6-37" aria-hidden="true" tabindex="-1"></a>  2. |   80   5174.757 |</span>
<span id="cb6-38"><a href="#cb6-38" aria-hidden="true" tabindex="-1"></a>  3. |   81   6210.741 |</span>
<span id="cb6-39"><a href="#cb6-39" aria-hidden="true" tabindex="-1"></a>  4. |   82   6834.219 |</span>
<span id="cb6-40"><a href="#cb6-40" aria-hidden="true" tabindex="-1"></a>  5. |   83   7069.203 |</span>
<span id="cb6-41"><a href="#cb6-41" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-42"><a href="#cb6-42" aria-hidden="true" tabindex="-1"></a>  6. |   84   7518.311 |</span>
<span id="cb6-43"><a href="#cb6-43" aria-hidden="true" tabindex="-1"></a>  7. |   85   8153.146 |</span>
<span id="cb6-44"><a href="#cb6-44" aria-hidden="true" tabindex="-1"></a>  8. |   86   9391.989 |</span>
<span id="cb6-45"><a href="#cb6-45" aria-hidden="true" tabindex="-1"></a>  9. |   87   10396.91 |</span>
<span id="cb6-46"><a href="#cb6-46" aria-hidden="true" tabindex="-1"></a> 10. |   88    10840.6 |</span>
<span id="cb6-47"><a href="#cb6-47" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a> 11. |   89   10492.76 |</span>
<span id="cb6-49"><a href="#cb6-49" aria-hidden="true" tabindex="-1"></a> 12. |   90   11112.68 |</span>
<span id="cb6-50"><a href="#cb6-50" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-51"><a href="#cb6-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-52"><a href="#cb6-52" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-53"><a href="#cb6-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-54"><a href="#cb6-54" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-55"><a href="#cb6-55" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb6-56"><a href="#cb6-56" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb6-57"><a href="#cb6-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-58"><a href="#cb6-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> <span class="ot">value</span>=price*quan</span>
<span id="cb6-59"><a href="#cb6-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-60"><a href="#cb6-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-61"><a href="#cb6-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-62"><a href="#cb6-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> avalue=<span class="kw">mean</span>(<span class="ot">value</span>), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-63"><a href="#cb6-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-64"><a href="#cb6-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uvalue=avalue/aquan</span>
<span id="cb6-65"><a href="#cb6-65" aria-hidden="true" tabindex="-1"></a>(45 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb6-66"><a href="#cb6-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-67"><a href="#cb6-67" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) uvalue, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb6-68"><a href="#cb6-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-69"><a href="#cb6-69" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb6-70"><a href="#cb6-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-71"><a href="#cb6-71" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-72"><a href="#cb6-72" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     uvalue |</span>
<span id="cb6-73"><a href="#cb6-73" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-74"><a href="#cb6-74" aria-hidden="true" tabindex="-1"></a>  1. |   79   4794.177 |</span>
<span id="cb6-75"><a href="#cb6-75" aria-hidden="true" tabindex="-1"></a>  2. |   80   4937.291 |</span>
<span id="cb6-76"><a href="#cb6-76" aria-hidden="true" tabindex="-1"></a>  3. |   81   6313.539 |</span>
<span id="cb6-77"><a href="#cb6-77" aria-hidden="true" tabindex="-1"></a>  4. |   82   6426.264 |</span>
<span id="cb6-78"><a href="#cb6-78" aria-hidden="true" tabindex="-1"></a>  5. |   83   6134.027 |</span>
<span id="cb6-79"><a href="#cb6-79" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-80"><a href="#cb6-80" aria-hidden="true" tabindex="-1"></a>  6. |   84   6246.728 |</span>
<span id="cb6-81"><a href="#cb6-81" aria-hidden="true" tabindex="-1"></a>  7. |   85   6249.927 |</span>
<span id="cb6-82"><a href="#cb6-82" aria-hidden="true" tabindex="-1"></a>  8. |   86          . |</span>
<span id="cb6-83"><a href="#cb6-83" aria-hidden="true" tabindex="-1"></a>  9. |   87          . |</span>
<span id="cb6-84"><a href="#cb6-84" aria-hidden="true" tabindex="-1"></a> 10. |   88          . |</span>
<span id="cb6-85"><a href="#cb6-85" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb6-86"><a href="#cb6-86" aria-hidden="true" tabindex="-1"></a> 11. |   89          . |</span>
<span id="cb6-87"><a href="#cb6-87" aria-hidden="true" tabindex="-1"></a> 12. |   90          . |</span>
<span id="cb6-88"><a href="#cb6-88" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb6-89"><a href="#cb6-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-90"><a href="#cb6-90" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb6-91"><a href="#cb6-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-92"><a href="#cb6-92" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb6-93"><a href="#cb6-93" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb6-94"><a href="#cb6-94" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb6-95"><a href="#cb6-95" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb6-96"><a href="#cb6-96" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_value.<span class="fu">log</span></span>
<span id="cb6-97"><a href="#cb6-97" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb6-98"><a href="#cb6-98" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 19:13:10</span>
<span id="cb6-99"><a href="#cb6-99" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb6-100"><a href="#cb6-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-101"><a href="#cb6-101" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb6-102"><a href="#cb6-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-103"><a href="#cb6-103" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code" class="level3">
<h3 class="anchored" data-anchor-id="my-code">My code</h3>
<section id="pindex_c.do-1" class="level4">
<h4 class="anchored" data-anchor-id="pindex_c.do-1">pindex_c.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Packages ----</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(archive)</span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(haven)</span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Extract ----</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a>fzip <span class="ot">&lt;-</span> <span class="st">"first-edition/Chapter-8.zip"</span></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a>dout <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"</span><span class="sc">\\</span><span class="st">.zip$"</span>, <span class="st">""</span>, fzip)</span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">dir.exists</span>(dout)) {</span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">archive_extract</span>(fzip, <span class="at">dir =</span> dout)</span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a><span class="co"># Read and transform ----</span></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>fout <span class="ot">&lt;-</span> <span class="fu">paste0</span>(dout, <span class="st">"/feenstra_88.rds"</span>)</span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> (<span class="sc">!</span><span class="fu">file.exists</span>(fout)) {</span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>  feenstra_88 <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">car_7990 =</span> <span class="fu">read_dta</span>(<span class="fu">paste0</span>(dout, <span class="st">"/car_7990.dta"</span>)),</span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">truck_7990 =</span> <span class="fu">read_dta</span>(<span class="fu">paste0</span>(dout, <span class="st">"/truck_7990.dta"</span>))</span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">saveRDS</span>(feenstra_88, fout)</span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a>} <span class="cf">else</span> {</span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a>  feenstra_88 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(fout)</span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, model)</span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a>car_80 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">price_80 =</span> price, <span class="at">quan_80 =</span> quan)</span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(car_80) <span class="sc">%&gt;%</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan_80),</span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan_80)</span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80)</span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan),</span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan)</span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq)</span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)) <span class="sc">%&gt;%</span></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pindex =</span> <span class="fu">mean</span>(pindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year pindex
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  0.966
 2    80  1    
 3    81  1.20 
 4    82  1.29 
 5    83  1.31 
 6    84  1.39 
 7    85  1.48 
 8    86  1.67 
 9    87  1.89 
10    88  2.05 
11    89  2.08 
12    90  2.11 </code></pre>
</div>
</div>
</section>
<section id="pindex_t.do-1" class="level4">
<h4 class="anchored" data-anchor-id="pindex_t.do-1">pindex_t.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(year, model)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a>truck_80 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, price, quan) <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(<span class="at">price_80 =</span> price, <span class="at">quan_80 =</span> quan)</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(truck_80) <span class="sc">%&gt;%</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-14"><a href="#cb9-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan_80),</span>
<span id="cb9-15"><a href="#cb9-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan_80)</span>
<span id="cb9-16"><a href="#cb9-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-17"><a href="#cb9-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-18"><a href="#cb9-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80)</span>
<span id="cb9-19"><a href="#cb9-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-20"><a href="#cb9-20" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-21"><a href="#cb9-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-22"><a href="#cb9-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb9-23"><a href="#cb9-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(price <span class="sc">*</span> quan),</span>
<span id="cb9-24"><a href="#cb9-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(price_80 <span class="sc">*</span> quan)</span>
<span id="cb9-25"><a href="#cb9-25" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb9-26"><a href="#cb9-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb9-27"><a href="#cb9-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq)</span>
<span id="cb9-28"><a href="#cb9-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb9-30"><a href="#cb9-30" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">pindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)) <span class="sc">%&gt;%</span></span>
<span id="cb9-31"><a href="#cb9-31" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb9-32"><a href="#cb9-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">pindex =</span> <span class="fu">mean</span>(pindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year  pindex
   &lt;dbl&gt;   &lt;dbl&gt;
 1    79   0.970
 2    80   1    
 3    81   1.28 
 4    82   1.31 
 5    83   1.21 
 6    84   1.23 
 7    85   1.25 
 8    86 NaN    
 9    87 NaN    
10    88 NaN    
11    89 NaN    
12    90 NaN    </code></pre>
</div>
</div>
</section>
<section id="unit_value.do-1" class="level4">
<h4 class="anchored" data-anchor-id="unit_value.do-1">unit_value.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> price <span class="sc">*</span> quan) <span class="sc">%&gt;%</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-5"><a href="#cb11-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan),</span>
<span id="cb11-6"><a href="#cb11-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">avalue =</span> <span class="fu">mean</span>(value),</span>
<span id="cb11-7"><a href="#cb11-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">uvalue =</span> avalue <span class="sc">/</span> aquan</span>
<span id="cb11-8"><a href="#cb11-8" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-9"><a href="#cb11-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-10"><a href="#cb11-10" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-11"><a href="#cb11-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">value =</span> price <span class="sc">*</span> quan) <span class="sc">%&gt;%</span></span>
<span id="cb11-12"><a href="#cb11-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-13"><a href="#cb11-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb11-14"><a href="#cb11-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan),</span>
<span id="cb11-15"><a href="#cb11-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">avalue =</span> <span class="fu">mean</span>(value),</span>
<span id="cb11-16"><a href="#cb11-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">uvalue =</span> avalue <span class="sc">/</span> aquan</span>
<span id="cb11-17"><a href="#cb11-17" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb11-18"><a href="#cb11-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-19"><a href="#cb11-19" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb11-20"><a href="#cb11-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb11-21"><a href="#cb11-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">uvalue =</span> <span class="fu">mean</span>(uvalue))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year uvalue
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  4946.
 2    80  5175.
 3    81  6211.
 4    82  6834.
 5    83  7069.
 6    84  7518.
 7    85  8153.
 8    86  9392.
 9    87 10397.
10    88 10841.
11    89 10493.
12    90 11113.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">uvalue =</span> <span class="fu">mean</span>(uvalue))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 2
    year uvalue
   &lt;dbl&gt;  &lt;dbl&gt;
 1    79  4794.
 2    80  4937.
 3    81  6314.
 4    82  6426.
 5    83  6134.
 6    84  6247.
 7    85  6250.
 8    86   NaN 
 9    87   NaN 
10    88   NaN 
11    89   NaN 
12    90   NaN </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-2" class="level2">
<h2 class="anchored" data-anchor-id="exercise-2">Exercise 2</h2>
<p>Run the program <code>car_reg.do</code> to reproduce the column (1) in Table 8.4, and the program <code>truck_reg.do</code> to reproduce column (2). What weights are being used in the regression, and how does this affect the results?</p>
<section id="feenstras-code-1" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-1">Feenstra’s code</h3>
<section id="car_reg.do" class="level4">
<h4 class="anchored" data-anchor-id="car_reg.do">car_reg.do</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_reg.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb15-10"><a href="#cb15-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-11"><a href="#cb15-11" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlcar</span>
<span id="cb15-12"><a href="#cb15-12" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb15-13"><a href="#cb15-13" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb15-14"><a href="#cb15-14" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb15-15"><a href="#cb15-15" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb15-16"><a href="#cb15-16" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb15-17"><a href="#cb15-17" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb15-18"><a href="#cb15-18" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb15-19"><a href="#cb15-19" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb15-20"><a href="#cb15-20" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb15-21"><a href="#cb15-21" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb15-22"><a href="#cb15-22" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb15-23"><a href="#cb15-23" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb15-24"><a href="#cb15-24" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb15-25"><a href="#cb15-25" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb15-26"><a href="#cb15-26" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb15-27"><a href="#cb15-27" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb15-28"><a href="#cb15-28" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb15-29"><a href="#cb15-29" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb15-30"><a href="#cb15-30" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb15-31"><a href="#cb15-31" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb15-32"><a href="#cb15-32" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb15-33"><a href="#cb15-33" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb15-34"><a href="#cb15-34" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb15-35"><a href="#cb15-35" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb15-36"><a href="#cb15-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-37"><a href="#cb15-37" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-38"><a href="#cb15-38" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb15-39"><a href="#cb15-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-40"><a href="#cb15-40" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-41"><a href="#cb15-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-42"><a href="#cb15-42" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> car price</span>
<span id="cb15-43"><a href="#cb15-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-44"><a href="#cb15-44" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*yd2+_b[b3]*yd3+_b[b4]*yd4+_b[b5]*yd5+_b[b6]*yd6+_b[b7]*yd7<span class="co">/*</span></span>
<span id="cb15-45"><a href="#cb15-45" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght+_b[c2]*wdth+_b[c3]*hght+_b[c4]*hp+_b[c5]*tran+_b[c6]*ps+_b[c7]*<span class="kw">ac</span>+_b[c8])</span>
<span id="cb15-46"><a href="#cb15-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-47"><a href="#cb15-47" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb15-48"><a href="#cb15-48" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd3=yd3*winv</span>
<span id="cb15-49"><a href="#cb15-49" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd4=yd4*winv</span>
<span id="cb15-50"><a href="#cb15-50" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd5=yd5*winv</span>
<span id="cb15-51"><a href="#cb15-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd6=yd6*winv</span>
<span id="cb15-52"><a href="#cb15-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nyd7=yd7*winv</span>
<span id="cb15-53"><a href="#cb15-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-54"><a href="#cb15-54" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlncar</span>
<span id="cb15-55"><a href="#cb15-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">version</span> 7.0</span>
<span id="cb15-56"><a href="#cb15-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb15-57"><a href="#cb15-57" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb15-58"><a href="#cb15-58" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a3=1</span>
<span id="cb15-59"><a href="#cb15-59" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a4=1</span>
<span id="cb15-60"><a href="#cb15-60" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a5=1 </span>
<span id="cb15-61"><a href="#cb15-61" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a6=1</span>
<span id="cb15-62"><a href="#cb15-62" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> a7=1</span>
<span id="cb15-63"><a href="#cb15-63" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b2=.1    </span>
<span id="cb15-64"><a href="#cb15-64" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b3=.1</span>
<span id="cb15-65"><a href="#cb15-65" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b4=.1</span>
<span id="cb15-66"><a href="#cb15-66" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b5=.1</span>
<span id="cb15-67"><a href="#cb15-67" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b6=.1    </span>
<span id="cb15-68"><a href="#cb15-68" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> b7=.1</span>
<span id="cb15-69"><a href="#cb15-69" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c1=.1</span>
<span id="cb15-70"><a href="#cb15-70" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c2=.1</span>
<span id="cb15-71"><a href="#cb15-71" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c3=.1</span>
<span id="cb15-72"><a href="#cb15-72" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c4=.1</span>
<span id="cb15-73"><a href="#cb15-73" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c5=.1</span>
<span id="cb15-74"><a href="#cb15-74" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c6=.1</span>
<span id="cb15-75"><a href="#cb15-75" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c7=.1</span>
<span id="cb15-76"><a href="#cb15-76" aria-hidden="true" tabindex="-1"></a>        <span class="kw">global</span> c8=.1</span>
<span id="cb15-77"><a href="#cb15-77" aria-hidden="true" tabindex="-1"></a>        <span class="kw">exit</span></span>
<span id="cb15-78"><a href="#cb15-78" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-79"><a href="#cb15-79" aria-hidden="true" tabindex="-1"></a>    <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*nyd3+<span class="ot">$a4</span>*nyd4+<span class="ot">$a5</span>*nyd5+<span class="ot">$a6</span>*nyd6+<span class="ot">$a7</span>*nyd7<span class="co">/*</span></span>
<span id="cb15-80"><a href="#cb15-80" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb15-81"><a href="#cb15-81" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb15-82"><a href="#cb15-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-83"><a href="#cb15-83" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb15-84"><a href="#cb15-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-85"><a href="#cb15-85" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ncar nprice</span>
<span id="cb15-86"><a href="#cb15-86" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb15-87"><a href="#cb15-87" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb15-88"><a href="#cb15-88" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb15-89"><a href="#cb15-89" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\car_reg.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\car_reg.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb16-9"><a href="#cb16-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb16-10"><a href="#cb16-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb16-11"><a href="#cb16-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb16-12"><a href="#cb16-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\car_reg.<span class="fu">log</span></span>
<span id="cb16-13"><a href="#cb16-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb16-14"><a href="#cb16-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 19:28:58</span>
<span id="cb16-15"><a href="#cb16-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-16"><a href="#cb16-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-17"><a href="#cb16-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb16-18"><a href="#cb16-18" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb16-19"><a href="#cb16-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-20"><a href="#cb16-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb16-21"><a href="#cb16-21" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb16-22"><a href="#cb16-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-23"><a href="#cb16-23" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-24"><a href="#cb16-24" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb16-25"><a href="#cb16-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-26"><a href="#cb16-26" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb16-27"><a href="#cb16-27" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb16-28"><a href="#cb16-28" aria-hidden="true" tabindex="-1"></a>         79 |         21       11.73       11.73</span>
<span id="cb16-29"><a href="#cb16-29" aria-hidden="true" tabindex="-1"></a>         80 |         24       13.41       25.14</span>
<span id="cb16-30"><a href="#cb16-30" aria-hidden="true" tabindex="-1"></a>         81 |         24       13.41       38.55</span>
<span id="cb16-31"><a href="#cb16-31" aria-hidden="true" tabindex="-1"></a>         82 |         24       13.41       51.96</span>
<span id="cb16-32"><a href="#cb16-32" aria-hidden="true" tabindex="-1"></a>         83 |         26       14.53       66.48</span>
<span id="cb16-33"><a href="#cb16-33" aria-hidden="true" tabindex="-1"></a>         84 |         29       16.20       82.68</span>
<span id="cb16-34"><a href="#cb16-34" aria-hidden="true" tabindex="-1"></a>         85 |         31       17.32      100.00</span>
<span id="cb16-35"><a href="#cb16-35" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb16-36"><a href="#cb16-36" aria-hidden="true" tabindex="-1"></a>      Total |        179      100.00</span>
<span id="cb16-37"><a href="#cb16-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-38"><a href="#cb16-38" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-39"><a href="#cb16-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlcar</span>
<span id="cb16-40"><a href="#cb16-40" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb16-41"><a href="#cb16-41" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb16-42"><a href="#cb16-42" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8"</span></span>
<span id="cb16-43"><a href="#cb16-43" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb16-44"><a href="#cb16-44" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb16-45"><a href="#cb16-45" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb16-46"><a href="#cb16-46" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb16-47"><a href="#cb16-47" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb16-48"><a href="#cb16-48" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb16-49"><a href="#cb16-49" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb16-50"><a href="#cb16-50" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb16-51"><a href="#cb16-51" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb16-52"><a href="#cb16-52" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb16-53"><a href="#cb16-53" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb16-54"><a href="#cb16-54" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb16-55"><a href="#cb16-55" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb16-56"><a href="#cb16-56" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb16-57"><a href="#cb16-57" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb16-58"><a href="#cb16-58" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb16-59"><a href="#cb16-59" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb16-60"><a href="#cb16-60" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb16-61"><a href="#cb16-61" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb16-62"><a href="#cb16-62" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">exit</span></span>
<span id="cb16-63"><a href="#cb16-63" aria-hidden="true" tabindex="-1"></a> 24. }</span>
<span id="cb16-64"><a href="#cb16-64" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*yd3+<span class="ot">$a4</span>*yd4+<span class="ot">$a5</span>*yd5+<span class="ot">$a6</span>*yd6+<span class="ot">$a7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-65"><a href="#cb16-65" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-66"><a href="#cb16-66" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb16-67"><a href="#cb16-67" aria-hidden="true" tabindex="-1"></a> 26. </span>
<span id="cb16-68"><a href="#cb16-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb16-69"><a href="#cb16-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-70"><a href="#cb16-70" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-71"><a href="#cb16-71" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> car price</span>
<span id="cb16-72"><a href="#cb16-72" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 179)</span>
<span id="cb16-73"><a href="#cb16-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-74"><a href="#cb16-74" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.16e+10</span>
<span id="cb16-75"><a href="#cb16-75" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb16-76"><a href="#cb16-76" aria-hidden="true" tabindex="-1"></a>Iteration 9:   residual SS =  8.39e+07</span>
<span id="cb16-77"><a href="#cb16-77" aria-hidden="true" tabindex="-1"></a>Iteration 10:  residual SS =  8.39e+07</span>
<span id="cb16-78"><a href="#cb16-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-79"><a href="#cb16-79" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       179</span>
<span id="cb16-80"><a href="#cb16-80" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 19,   160) =   1158.52</span>
<span id="cb16-81"><a href="#cb16-81" aria-hidden="true" tabindex="-1"></a>       Model |  1.1541e+10    19   607414473         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb16-82"><a href="#cb16-82" aria-hidden="true" tabindex="-1"></a>    Residual |    83888568   160   524303.55         R-squared     =    0.9928</span>
<span id="cb16-83"><a href="#cb16-83" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9919</span>
<span id="cb16-84"><a href="#cb16-84" aria-hidden="true" tabindex="-1"></a>       Total |  1.1625e+10   179  64942813.2         Root MSE      =  724.0881</span>
<span id="cb16-85"><a href="#cb16-85" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  2845.293</span>
<span id="cb16-86"><a href="#cb16-86" aria-hidden="true" tabindex="-1"></a>(car)</span>
<span id="cb16-87"><a href="#cb16-87" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-88"><a href="#cb16-88" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb16-89"><a href="#cb16-89" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb16-90"><a href="#cb16-90" aria-hidden="true" tabindex="-1"></a>          a3 |  -294.7452   723.3322    -0.41   0.684    -1723.255    1133.765</span>
<span id="cb16-91"><a href="#cb16-91" aria-hidden="true" tabindex="-1"></a>          a4 |  -304.9631   714.5517    -0.43   0.670    -1716.132    1106.206</span>
<span id="cb16-92"><a href="#cb16-92" aria-hidden="true" tabindex="-1"></a>          a5 |  -137.3977   700.8446    -0.20   0.845    -1521.497    1246.701</span>
<span id="cb16-93"><a href="#cb16-93" aria-hidden="true" tabindex="-1"></a>          a6 |   72.87527   695.4052     0.10   0.917    -1300.482    1446.232</span>
<span id="cb16-94"><a href="#cb16-94" aria-hidden="true" tabindex="-1"></a>          a7 |  -103.4007   742.9475    -0.14   0.889    -1570.649    1363.848</span>
<span id="cb16-95"><a href="#cb16-95" aria-hidden="true" tabindex="-1"></a>          b2 |   .0099678   .0362994     0.27   0.784      -.06172    .0816555</span>
<span id="cb16-96"><a href="#cb16-96" aria-hidden="true" tabindex="-1"></a>          b3 |   .1522578   .1022847     1.49   0.139    -.0497444      .35426</span>
<span id="cb16-97"><a href="#cb16-97" aria-hidden="true" tabindex="-1"></a>          b4 |   .1899382   .0965319     1.97   0.051    -.0007027    .3805792</span>
<span id="cb16-98"><a href="#cb16-98" aria-hidden="true" tabindex="-1"></a>          b5 |   .1540892   .0959124     1.61   0.110    -.0353283    .3435068</span>
<span id="cb16-99"><a href="#cb16-99" aria-hidden="true" tabindex="-1"></a>          b6 |    .172972   .0944704     1.83   0.069    -.0135977    .3595417</span>
<span id="cb16-100"><a href="#cb16-100" aria-hidden="true" tabindex="-1"></a>          b7 |   .2274326   .0945034     2.41   0.017     .0407977    .4140675</span>
<span id="cb16-101"><a href="#cb16-101" aria-hidden="true" tabindex="-1"></a>          c1 |  -.0007315   .1021984    -0.01   0.994    -.2025632    .2011002</span>
<span id="cb16-102"><a href="#cb16-102" aria-hidden="true" tabindex="-1"></a>          c2 |   .3681958   .1019742     3.61   0.000     .1668067    .5695849</span>
<span id="cb16-103"><a href="#cb16-103" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1431584   .0519385    -2.76   0.007    -.2457317    -.040585</span>
<span id="cb16-104"><a href="#cb16-104" aria-hidden="true" tabindex="-1"></a>          c4 |   .6070451   .0665196     9.13   0.000     .4756756    .7384147</span>
<span id="cb16-105"><a href="#cb16-105" aria-hidden="true" tabindex="-1"></a>          c5 |   .1315757   .0264479     4.97   0.000     .0793437    .1838078</span>
<span id="cb16-106"><a href="#cb16-106" aria-hidden="true" tabindex="-1"></a>          c6 |   .0515819   .0218212     2.36   0.019     .0084872    .0946766</span>
<span id="cb16-107"><a href="#cb16-107" aria-hidden="true" tabindex="-1"></a>          c7 |   .1635465   .0228493     7.16   0.000     .1184213    .2086717</span>
<span id="cb16-108"><a href="#cb16-108" aria-hidden="true" tabindex="-1"></a>          c8 |    6.73024   .5719055    11.77   0.000     5.600783    7.859697</span>
<span id="cb16-109"><a href="#cb16-109" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-110"><a href="#cb16-110" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb16-111"><a href="#cb16-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-112"><a href="#cb16-112" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-113"><a href="#cb16-113" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*yd2+_b[b3]*yd3+_b[b4]*yd4+_b[b5]*yd5+_b[b6]*yd6+_b[b7]*yd7</span>
<span id="cb16-114"><a href="#cb16-114" aria-hidden="true" tabindex="-1"></a>&gt; <span class="co">/*</span></span>
<span id="cb16-115"><a href="#cb16-115" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght+_b[c2]*wdth+_b[c3]*hght+_b[c4]*hp+_b[c5]*tran+_b[c6]*ps+_b[c7]*<span class="kw">ac</span></span>
<span id="cb16-116"><a href="#cb16-116" aria-hidden="true" tabindex="-1"></a>&gt; +_b[c8])</span>
<span id="cb16-117"><a href="#cb16-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-118"><a href="#cb16-118" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-119"><a href="#cb16-119" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb16-120"><a href="#cb16-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-121"><a href="#cb16-121" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd3=yd3*winv</span>
<span id="cb16-122"><a href="#cb16-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-123"><a href="#cb16-123" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd4=yd4*winv</span>
<span id="cb16-124"><a href="#cb16-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-125"><a href="#cb16-125" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd5=yd5*winv</span>
<span id="cb16-126"><a href="#cb16-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-127"><a href="#cb16-127" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd6=yd6*winv</span>
<span id="cb16-128"><a href="#cb16-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-129"><a href="#cb16-129" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nyd7=yd7*winv</span>
<span id="cb16-130"><a href="#cb16-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-131"><a href="#cb16-131" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-132"><a href="#cb16-132" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlncar</span>
<span id="cb16-133"><a href="#cb16-133" aria-hidden="true" tabindex="-1"></a>  1.         <span class="kw">version</span> 7.0</span>
<span id="cb16-134"><a href="#cb16-134" aria-hidden="true" tabindex="-1"></a>  2.         <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb16-135"><a href="#cb16-135" aria-hidden="true" tabindex="-1"></a>  3.                 <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c</span></span>
<span id="cb16-136"><a href="#cb16-136" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; 6 c7 c8"</span></span>
<span id="cb16-137"><a href="#cb16-137" aria-hidden="true" tabindex="-1"></a>  4.                 <span class="kw">global</span> a3=1</span>
<span id="cb16-138"><a href="#cb16-138" aria-hidden="true" tabindex="-1"></a>  5.                 <span class="kw">global</span> a4=1</span>
<span id="cb16-139"><a href="#cb16-139" aria-hidden="true" tabindex="-1"></a>  6.                 <span class="kw">global</span> a5=1     </span>
<span id="cb16-140"><a href="#cb16-140" aria-hidden="true" tabindex="-1"></a>  7.                 <span class="kw">global</span> a6=1</span>
<span id="cb16-141"><a href="#cb16-141" aria-hidden="true" tabindex="-1"></a>  8.                 <span class="kw">global</span> a7=1</span>
<span id="cb16-142"><a href="#cb16-142" aria-hidden="true" tabindex="-1"></a>  9.                 <span class="kw">global</span> b2=.1    </span>
<span id="cb16-143"><a href="#cb16-143" aria-hidden="true" tabindex="-1"></a> 10.                 <span class="kw">global</span> b3=.1</span>
<span id="cb16-144"><a href="#cb16-144" aria-hidden="true" tabindex="-1"></a> 11.                 <span class="kw">global</span> b4=.1</span>
<span id="cb16-145"><a href="#cb16-145" aria-hidden="true" tabindex="-1"></a> 12.                 <span class="kw">global</span> b5=.1</span>
<span id="cb16-146"><a href="#cb16-146" aria-hidden="true" tabindex="-1"></a> 13.                 <span class="kw">global</span> b6=.1    </span>
<span id="cb16-147"><a href="#cb16-147" aria-hidden="true" tabindex="-1"></a> 14.                 <span class="kw">global</span> b7=.1</span>
<span id="cb16-148"><a href="#cb16-148" aria-hidden="true" tabindex="-1"></a> 15.                 <span class="kw">global</span> c1=.1</span>
<span id="cb16-149"><a href="#cb16-149" aria-hidden="true" tabindex="-1"></a> 16.                 <span class="kw">global</span> c2=.1</span>
<span id="cb16-150"><a href="#cb16-150" aria-hidden="true" tabindex="-1"></a> 17.                 <span class="kw">global</span> c3=.1</span>
<span id="cb16-151"><a href="#cb16-151" aria-hidden="true" tabindex="-1"></a> 18.                 <span class="kw">global</span> c4=.1</span>
<span id="cb16-152"><a href="#cb16-152" aria-hidden="true" tabindex="-1"></a> 19.                 <span class="kw">global</span> c5=.1</span>
<span id="cb16-153"><a href="#cb16-153" aria-hidden="true" tabindex="-1"></a> 20.                 <span class="kw">global</span> c6=.1</span>
<span id="cb16-154"><a href="#cb16-154" aria-hidden="true" tabindex="-1"></a> 21.                 <span class="kw">global</span> c7=.1</span>
<span id="cb16-155"><a href="#cb16-155" aria-hidden="true" tabindex="-1"></a> 22.                 <span class="kw">global</span> c8=.1</span>
<span id="cb16-156"><a href="#cb16-156" aria-hidden="true" tabindex="-1"></a> 23.                 <span class="kw">exit</span></span>
<span id="cb16-157"><a href="#cb16-157" aria-hidden="true" tabindex="-1"></a> 24.         }</span>
<span id="cb16-158"><a href="#cb16-158" aria-hidden="true" tabindex="-1"></a> 25.         <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*nyd3+<span class="ot">$a4</span>*nyd4+<span class="ot">$a5</span>*nyd5+<span class="ot">$a6</span>*nyd6+<span class="ot">$a7</span>*nyd7<span class="co">/*</span></span>
<span id="cb16-159"><a href="#cb16-159" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*yd2+<span class="ot">$b3</span>*yd3+<span class="ot">$b4</span>*yd4+<span class="ot">$b5</span>*yd5+<span class="ot">$b6</span>*yd6+<span class="ot">$b7</span>*yd7<span class="co">/*</span></span>
<span id="cb16-160"><a href="#cb16-160" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght+<span class="ot">$c2</span>*wdth+<span class="ot">$c3</span>*hght+<span class="ot">$c4</span>*hp+<span class="ot">$c5</span>*tran+<span class="ot">$c6</span>*ps+<span class="ot">$c7</span>*<span class="kw">ac</span>+<span class="ot">$c8</span>)</span>
<span id="cb16-161"><a href="#cb16-161" aria-hidden="true" tabindex="-1"></a> 26. </span>
<span id="cb16-162"><a href="#cb16-162" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb16-163"><a href="#cb16-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-164"><a href="#cb16-164" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb16-165"><a href="#cb16-165" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ncar nprice</span>
<span id="cb16-166"><a href="#cb16-166" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 179)</span>
<span id="cb16-167"><a href="#cb16-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-168"><a href="#cb16-168" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  174.4452</span>
<span id="cb16-169"><a href="#cb16-169" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb16-170"><a href="#cb16-170" aria-hidden="true" tabindex="-1"></a>Iteration 13:  residual SS =  1.672068</span>
<span id="cb16-171"><a href="#cb16-171" aria-hidden="true" tabindex="-1"></a>Iteration 14:  residual SS =  1.672068</span>
<span id="cb16-172"><a href="#cb16-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-173"><a href="#cb16-173" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       179</span>
<span id="cb16-174"><a href="#cb16-174" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 19,   160) =    871.41</span>
<span id="cb16-175"><a href="#cb16-175" aria-hidden="true" tabindex="-1"></a>       Model |  173.025768    19  9.10661939         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb16-176"><a href="#cb16-176" aria-hidden="true" tabindex="-1"></a>    Residual |  1.67206775   160  .010450423         R-squared     =    0.9904</span>
<span id="cb16-177"><a href="#cb16-177" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9893</span>
<span id="cb16-178"><a href="#cb16-178" aria-hidden="true" tabindex="-1"></a>       Total |  174.697836   179  .975965565         Root MSE      =  .1022273</span>
<span id="cb16-179"><a href="#cb16-179" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -328.5451</span>
<span id="cb16-180"><a href="#cb16-180" aria-hidden="true" tabindex="-1"></a>(ncar)</span>
<span id="cb16-181"><a href="#cb16-181" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-182"><a href="#cb16-182" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb16-183"><a href="#cb16-183" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb16-184"><a href="#cb16-184" aria-hidden="true" tabindex="-1"></a>          a3 |   410.4256   619.1744     0.66   0.508    -812.3829    1633.234</span>
<span id="cb16-185"><a href="#cb16-185" aria-hidden="true" tabindex="-1"></a>          a4 |    378.927   650.2562     0.58   0.561     -905.265    1663.119</span>
<span id="cb16-186"><a href="#cb16-186" aria-hidden="true" tabindex="-1"></a>          a5 |   770.6115   601.2054     1.28   0.202    -416.7099    1957.933</span>
<span id="cb16-187"><a href="#cb16-187" aria-hidden="true" tabindex="-1"></a>          a6 |   624.3817   618.9925     1.01   0.315    -598.0676    1846.831</span>
<span id="cb16-188"><a href="#cb16-188" aria-hidden="true" tabindex="-1"></a>          a7 |  -122.9148   719.4492    -0.17   0.865    -1543.756    1297.927</span>
<span id="cb16-189"><a href="#cb16-189" aria-hidden="true" tabindex="-1"></a>          b2 |   .0089535   .0309918     0.29   0.773    -.0522522    .0701592</span>
<span id="cb16-190"><a href="#cb16-190" aria-hidden="true" tabindex="-1"></a>          b3 |   .0474345   .1093808     0.43   0.665    -.1685818    .2634509</span>
<span id="cb16-191"><a href="#cb16-191" aria-hidden="true" tabindex="-1"></a>          b4 |   .0938457    .108274     0.87   0.387    -.1199848    .3076761</span>
<span id="cb16-192"><a href="#cb16-192" aria-hidden="true" tabindex="-1"></a>          b5 |   .0195742   .1052628     0.19   0.853    -.1883094    .2274579</span>
<span id="cb16-193"><a href="#cb16-193" aria-hidden="true" tabindex="-1"></a>          b6 |   .0918745   .1019572     0.90   0.369     -.109481      .29323</span>
<span id="cb16-194"><a href="#cb16-194" aria-hidden="true" tabindex="-1"></a>          b7 |   .2189293   .1012639     2.16   0.032      .018943    .4189156</span>
<span id="cb16-195"><a href="#cb16-195" aria-hidden="true" tabindex="-1"></a>          c1 |   .0254744   .1207686     0.21   0.833    -.2130317    .2639805</span>
<span id="cb16-196"><a href="#cb16-196" aria-hidden="true" tabindex="-1"></a>          c2 |   .3565755   .1083292     3.29   0.001      .142636     .570515</span>
<span id="cb16-197"><a href="#cb16-197" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0630705   .0554954    -1.14   0.257    -.1726685    .0465275</span>
<span id="cb16-198"><a href="#cb16-198" aria-hidden="true" tabindex="-1"></a>          c4 |   .6899452   .0852231     8.10   0.000      .521638    .8582524</span>
<span id="cb16-199"><a href="#cb16-199" aria-hidden="true" tabindex="-1"></a>          c5 |   .1428588   .0244762     5.84   0.000     .0945207    .1911968</span>
<span id="cb16-200"><a href="#cb16-200" aria-hidden="true" tabindex="-1"></a>          c6 |   .0581011   .0272835     2.13   0.035     .0042188    .1119834</span>
<span id="cb16-201"><a href="#cb16-201" aria-hidden="true" tabindex="-1"></a>          c7 |   .1473354    .033027     4.46   0.000     .0821103    .2125606</span>
<span id="cb16-202"><a href="#cb16-202" aria-hidden="true" tabindex="-1"></a>          c8 |   6.328371   .5830815    10.85   0.000     5.176842    7.479899</span>
<span id="cb16-203"><a href="#cb16-203" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb16-204"><a href="#cb16-204" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb16-205"><a href="#cb16-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-206"><a href="#cb16-206" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb16-207"><a href="#cb16-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-208"><a href="#cb16-208" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb16-209"><a href="#cb16-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-210"><a href="#cb16-210" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb16-211"><a href="#cb16-211" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb16-212"><a href="#cb16-212" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb16-213"><a href="#cb16-213" aria-hidden="true" tabindex="-1"></a>&gt; er-8\car_reg.<span class="fu">log</span></span>
<span id="cb16-214"><a href="#cb16-214" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb16-215"><a href="#cb16-215" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 19:29:06</span>
<span id="cb16-216"><a href="#cb16-216" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb16-217"><a href="#cb16-217" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-218"><a href="#cb16-218" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb16-219"><a href="#cb16-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-220"><a href="#cb16-220" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-1" class="level3">
<h3 class="anchored" data-anchor-id="my-code-1">My code</h3>
<section id="truck_reg.do" class="level4">
<h4 class="anchored" data-anchor-id="truck_reg.do">truck_reg.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(minpack.lm) <span class="co"># for nlsLM()</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">factor</span>(year)) <span class="sc">%&gt;%</span></span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">id =</span> <span class="fu">row_number</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>()</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(yd) <span class="sc">%&gt;%</span></span>
<span id="cb17-12"><a href="#cb17-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb17-13"><a href="#cb17-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb17-14"><a href="#cb17-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb17-15"><a href="#cb17-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb17-16"><a href="#cb17-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb17-17"><a href="#cb17-17" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
  yd     freq percent   cum
  &lt;fct&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1 79       21    11.7  11.7
2 80       24    13.4  25.1
3 81       24    13.4  38.5
4 82       24    13.4  52.0
5 83       26    14.5  66.5
6 84       29    16.2  82.7
7 85       31    17.3 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand the yd variable to 0/1 columns</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"># in R, you cannot multiply a factor/categorical variable</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.integer</span>(yd)) <span class="sc">%&gt;%</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd_ind =</span> <span class="fu">as.factor</span>(yd_ind <span class="sc">-</span> <span class="fu">min</span>(yd_ind) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a>car_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd_ind <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> car_7990)</span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(car_7990_dummy) <span class="ot">&lt;-</span> <span class="fu">gsub</span>(<span class="st">"_ind"</span>, <span class="st">""</span>, <span class="fu">colnames</span>(car_7990_dummy))</span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(car_7990_dummy))</span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a><span class="co"># fit the non-linear specification with initial values</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a><span class="co"># nls() fails, so I use nlsLM() that implements the Levenberg-Marquardt</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a><span class="co"># algorithm</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> yd3 <span class="sc">+</span> a4 <span class="sc">*</span> yd4 <span class="sc">+</span> a5 <span class="sc">*</span> yd5 <span class="sc">+</span> a6 <span class="sc">*</span> yd6 <span class="sc">+</span> a7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(</span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a>      b2 <span class="sc">*</span> yd2 <span class="sc">+</span> b3 <span class="sc">*</span> yd3 <span class="sc">+</span> b4 <span class="sc">*</span> yd4 <span class="sc">+</span> b5 <span class="sc">*</span> yd5 <span class="sc">+</span> b6 <span class="sc">*</span> yd6 <span class="sc">+</span> b7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>        c1 <span class="sc">*</span> wght <span class="sc">+</span> c2 <span class="sc">*</span> wdth <span class="sc">+</span> c3 <span class="sc">*</span> hght <span class="sc">+</span> c4 <span class="sc">*</span> hp <span class="sc">+</span> c5 <span class="sc">*</span> tran <span class="sc">+</span> c6 <span class="sc">*</span> ps <span class="sc">+</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>        c7 <span class="sc">*</span> ac <span class="sc">+</span> c8</span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> car_7990,</span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * yd3 + a4 * yd4 + a5 * yd5 + a6 * yd6 + a7 * yd7 + 
    exp(b2 * yd2 + b3 * yd3 + b4 * yd4 + b5 * yd5 + b6 * yd6 + 
        b7 * yd7 + c1 * wght + c2 * wdth + c3 * hght + c4 * hp + 
        c5 * tran + c6 * ps + c7 * ac + c8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3 -2.947e+02  7.233e+02  -0.407 0.684236    
a4 -3.049e+02  7.145e+02  -0.427 0.670137    
a5 -1.374e+02  7.008e+02  -0.196 0.844867    
a6  7.293e+01  6.954e+02   0.105 0.916608    
a7 -1.033e+02  7.429e+02  -0.139 0.889554    
b2  9.967e-03  3.630e-02   0.275 0.783991    
b3  1.523e-01  1.023e-01   1.489 0.138586    
b4  1.899e-01  9.653e-02   1.968 0.050842 .  
b5  1.541e-01  9.591e-02   1.607 0.110130    
b6  1.730e-01  9.447e-02   1.831 0.068972 .  
b7  2.274e-01  9.450e-02   2.407 0.017243 *  
c1 -6.998e-04  1.022e-01  -0.007 0.994545    
c2  3.682e-01  1.020e-01   3.610 0.000409 ***
c3 -1.432e-01  5.194e-02  -2.756 0.006522 ** 
c4  6.070e-01  6.652e-02   9.126 2.93e-16 ***
c5  1.316e-01  2.645e-02   4.975 1.67e-06 ***
c6  5.158e-02  2.182e-02   2.364 0.019283 *  
c7  1.635e-01  2.285e-02   7.157 2.81e-11 ***
c8  6.730e+00  5.719e-01  11.768  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 724.1 on 160 degrees of freedom

Number of iterations to convergence: 19 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> yd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> yd3 <span class="sc">+</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> yd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> yd5 <span class="sc">+</span> fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> yd6 <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> yd7 <span class="sc">+</span> fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght <span class="sc">+</span> fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth <span class="sc">+</span></span>
<span id="cb21-8"><a href="#cb21-8" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght <span class="sc">+</span> fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp <span class="sc">+</span> fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran <span class="sc">+</span></span>
<span id="cb21-9"><a href="#cb21-9" aria-hidden="true" tabindex="-1"></a>      fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps <span class="sc">+</span> fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb21-10"><a href="#cb21-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv,</span>
<span id="cb21-11"><a href="#cb21-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd3 =</span> yd3 <span class="sc">*</span> winv,</span>
<span id="cb21-12"><a href="#cb21-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd4 =</span> yd4 <span class="sc">*</span> winv,</span>
<span id="cb21-13"><a href="#cb21-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd5 =</span> yd5 <span class="sc">*</span> winv,</span>
<span id="cb21-14"><a href="#cb21-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd6 =</span> yd6 <span class="sc">*</span> winv,</span>
<span id="cb21-15"><a href="#cb21-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">nyd7 =</span> yd7 <span class="sc">*</span> winv</span>
<span id="cb21-16"><a href="#cb21-16" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb21-17"><a href="#cb21-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-18"><a href="#cb21-18" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb21-19"><a href="#cb21-19" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> a3 <span class="sc">*</span> nyd3 <span class="sc">+</span> a4 <span class="sc">*</span> nyd4 <span class="sc">+</span> a5 <span class="sc">*</span> nyd5 <span class="sc">+</span> a6 <span class="sc">*</span> nyd6 <span class="sc">+</span> a7 <span class="sc">*</span> nyd7 <span class="sc">+</span></span>
<span id="cb21-20"><a href="#cb21-20" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(</span>
<span id="cb21-21"><a href="#cb21-21" aria-hidden="true" tabindex="-1"></a>      b2 <span class="sc">*</span> yd2 <span class="sc">+</span> b3 <span class="sc">*</span> yd3 <span class="sc">+</span> b4 <span class="sc">*</span> yd4 <span class="sc">+</span> b5 <span class="sc">*</span> yd5 <span class="sc">+</span> b6 <span class="sc">*</span> yd6 <span class="sc">+</span> b7 <span class="sc">*</span> yd7 <span class="sc">+</span></span>
<span id="cb21-22"><a href="#cb21-22" aria-hidden="true" tabindex="-1"></a>        c1 <span class="sc">*</span> wght <span class="sc">+</span> c2 <span class="sc">*</span> wdth <span class="sc">+</span> c3 <span class="sc">*</span> hght <span class="sc">+</span> c4 <span class="sc">*</span> hp <span class="sc">+</span> c5 <span class="sc">*</span> tran <span class="sc">+</span> c6 <span class="sc">*</span> ps <span class="sc">+</span></span>
<span id="cb21-23"><a href="#cb21-23" aria-hidden="true" tabindex="-1"></a>        c7 <span class="sc">*</span> ac <span class="sc">+</span> c8</span>
<span id="cb21-24"><a href="#cb21-24" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb21-25"><a href="#cb21-25" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> car_7990,</span>
<span id="cb21-26"><a href="#cb21-26" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb21-27"><a href="#cb21-27" aria-hidden="true" tabindex="-1"></a>  <span class="co"># increase the number of iterations to avoid convergence issues</span></span>
<span id="cb21-28"><a href="#cb21-28" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">100</span>)</span>
<span id="cb21-29"><a href="#cb21-29" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb21-30"><a href="#cb21-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb21-31"><a href="#cb21-31" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ a3 * nyd3 + a4 * nyd4 + a5 * nyd5 + a6 * nyd6 + a7 * 
    nyd7 + winv * exp(b2 * yd2 + b3 * yd3 + b4 * yd4 + b5 * yd5 + 
    b6 * yd6 + b7 * yd7 + c1 * wght + c2 * wdth + c3 * hght + 
    c4 * hp + c5 * tran + c6 * ps + c7 * ac + c8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  4.105e+02  6.192e+02   0.663  0.50834    
a4  3.789e+02  6.503e+02   0.583  0.56087    
a5  7.706e+02  6.012e+02   1.282  0.20176    
a6  6.244e+02  6.190e+02   1.009  0.31465    
a7 -1.229e+02  7.194e+02  -0.171  0.86455    
b2  8.954e-03  3.099e-02   0.289  0.77303    
b3  4.743e-02  1.094e-01   0.434  0.66515    
b4  9.384e-02  1.083e-01   0.867  0.38740    
b5  1.957e-02  1.053e-01   0.186  0.85274    
b6  9.188e-02  1.020e-01   0.901  0.36887    
b7  2.189e-01  1.013e-01   2.162  0.03211 *  
c1  2.548e-02  1.208e-01   0.211  0.83316    
c2  3.566e-01  1.083e-01   3.292  0.00123 ** 
c3 -6.306e-02  5.550e-02  -1.136  0.25748    
c4  6.899e-01  8.522e-02   8.096 1.36e-13 ***
c5  1.429e-01  2.448e-02   5.837 2.88e-08 ***
c6  5.810e-02  2.728e-02   2.130  0.03474 *  
c7  1.473e-01  3.303e-02   4.461 1.53e-05 ***
c8  6.328e+00  5.831e-01  10.853  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1022 on 160 degrees of freedom

Number of iterations to convergence: 18 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-3" class="level2">
<h2 class="anchored" data-anchor-id="exercise-3">Exercise 3</h2>
<p>Pooling car and truck data, run <code>system_7985.do</code> to reproduce columns (3) and (4) in Table 8.4 with the constraints specified in equation (8.22). How are these constraints built into the program for the nonlinear regression?</p>
<section id="feenstras-code-2" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-2">Feenstra’s code</h3>
<div class="sourceCode" id="cb23"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\system_7985.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb23-13"><a href="#cb23-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb23-14"><a href="#cb23-14" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb23-15"><a href="#cb23-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-16"><a href="#cb23-16" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb23-17"><a href="#cb23-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-18"><a href="#cb23-18" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb23-19"><a href="#cb23-19" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb23-20"><a href="#cb23-20" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb23-21"><a href="#cb23-21" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb23-22"><a href="#cb23-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb23-23"><a href="#cb23-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb23-24"><a href="#cb23-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb23-25"><a href="#cb23-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb23-26"><a href="#cb23-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb23-27"><a href="#cb23-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb23-28"><a href="#cb23-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb23-29"><a href="#cb23-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-30"><a href="#cb23-30" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb23-31"><a href="#cb23-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-32"><a href="#cb23-32" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb23-33"><a href="#cb23-33" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb23-34"><a href="#cb23-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb23-35"><a href="#cb23-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb23-36"><a href="#cb23-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb23-37"><a href="#cb23-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb23-38"><a href="#cb23-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb23-39"><a href="#cb23-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb23-40"><a href="#cb23-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb23-41"><a href="#cb23-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb23-42"><a href="#cb23-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb23-43"><a href="#cb23-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb23-44"><a href="#cb23-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb23-45"><a href="#cb23-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb23-46"><a href="#cb23-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb23-47"><a href="#cb23-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb23-48"><a href="#cb23-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-49"><a href="#cb23-49" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb23-50"><a href="#cb23-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-51"><a href="#cb23-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb23-52"><a href="#cb23-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb23-53"><a href="#cb23-53" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-54"><a href="#cb23-54" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-55"><a href="#cb23-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-56"><a href="#cb23-56" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb23-57"><a href="#cb23-57" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb23-58"><a href="#cb23-58" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-59"><a href="#cb23-59" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-60"><a href="#cb23-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-61"><a href="#cb23-61" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb23-62"><a href="#cb23-62" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb23-63"><a href="#cb23-63" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-64"><a href="#cb23-64" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-65"><a href="#cb23-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-66"><a href="#cb23-66" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb23-67"><a href="#cb23-67" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb23-68"><a href="#cb23-68" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-69"><a href="#cb23-69" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-70"><a href="#cb23-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-71"><a href="#cb23-71" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb23-72"><a href="#cb23-72" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb23-73"><a href="#cb23-73" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-74"><a href="#cb23-74" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-75"><a href="#cb23-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-76"><a href="#cb23-76" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb23-77"><a href="#cb23-77" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb23-78"><a href="#cb23-78" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb23-79"><a href="#cb23-79" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb23-80"><a href="#cb23-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-81"><a href="#cb23-81" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb23-82"><a href="#cb23-82" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb23-83"><a href="#cb23-83" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb23-84"><a href="#cb23-84" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb23-85"><a href="#cb23-85" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb23-86"><a href="#cb23-86" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb23-87"><a href="#cb23-87" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb23-88"><a href="#cb23-88" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb23-89"><a href="#cb23-89" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb23-90"><a href="#cb23-90" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb23-91"><a href="#cb23-91" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb23-92"><a href="#cb23-92" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb23-93"><a href="#cb23-93" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb23-94"><a href="#cb23-94" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb23-95"><a href="#cb23-95" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb23-96"><a href="#cb23-96" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb23-97"><a href="#cb23-97" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb23-98"><a href="#cb23-98" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb23-99"><a href="#cb23-99" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb23-100"><a href="#cb23-100" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb23-101"><a href="#cb23-101" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb23-102"><a href="#cb23-102" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb23-103"><a href="#cb23-103" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb23-104"><a href="#cb23-104" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb23-105"><a href="#cb23-105" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb23-106"><a href="#cb23-106" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb23-107"><a href="#cb23-107" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb23-108"><a href="#cb23-108" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb23-109"><a href="#cb23-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb23-110"><a href="#cb23-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb23-111"><a href="#cb23-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb23-112"><a href="#cb23-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb23-113"><a href="#cb23-113" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb23-114"><a href="#cb23-114" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-115"><a href="#cb23-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-116"><a href="#cb23-116" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb23-117"><a href="#cb23-117" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb23-118"><a href="#cb23-118" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb23-119"><a href="#cb23-119" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb23-120"><a href="#cb23-120" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb23-121"><a href="#cb23-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-122"><a href="#cb23-122" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb23-123"><a href="#cb23-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-124"><a href="#cb23-124" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb23-125"><a href="#cb23-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-126"><a href="#cb23-126" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb23-127"><a href="#cb23-127" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb23-128"><a href="#cb23-128" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb23-129"><a href="#cb23-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-130"><a href="#cb23-130" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb23-131"><a href="#cb23-131" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb23-132"><a href="#cb23-132" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb23-133"><a href="#cb23-133" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb23-134"><a href="#cb23-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-135"><a href="#cb23-135" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb23-136"><a href="#cb23-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-137"><a href="#cb23-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-138"><a href="#cb23-138" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb23-139"><a href="#cb23-139" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb23-140"><a href="#cb23-140" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb23-141"><a href="#cb23-141" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb23-142"><a href="#cb23-142" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb23-143"><a href="#cb23-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb23-144"><a href="#cb23-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb23-145"><a href="#cb23-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb23-146"><a href="#cb23-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb23-147"><a href="#cb23-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb23-148"><a href="#cb23-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb23-149"><a href="#cb23-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb23-150"><a href="#cb23-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb23-151"><a href="#cb23-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb23-152"><a href="#cb23-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb23-153"><a href="#cb23-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb23-154"><a href="#cb23-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb23-155"><a href="#cb23-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb23-156"><a href="#cb23-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb23-157"><a href="#cb23-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb23-158"><a href="#cb23-158" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb23-159"><a href="#cb23-159" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb23-160"><a href="#cb23-160" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb23-161"><a href="#cb23-161" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb23-162"><a href="#cb23-162" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb23-163"><a href="#cb23-163" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb23-164"><a href="#cb23-164" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb23-165"><a href="#cb23-165" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb23-166"><a href="#cb23-166" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb23-167"><a href="#cb23-167" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb23-168"><a href="#cb23-168" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb23-169"><a href="#cb23-169" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb23-170"><a href="#cb23-170" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb23-171"><a href="#cb23-171" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb23-172"><a href="#cb23-172" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb23-173"><a href="#cb23-173" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb23-174"><a href="#cb23-174" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb23-175"><a href="#cb23-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb23-176"><a href="#cb23-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb23-177"><a href="#cb23-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-178"><a href="#cb23-178" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb23-179"><a href="#cb23-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-180"><a href="#cb23-180" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb23-181"><a href="#cb23-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-182"><a href="#cb23-182" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb23-183"><a href="#cb23-183" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb23-184"><a href="#cb23-184" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb24"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\system_7985.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb24-7"><a href="#cb24-7" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb24-8"><a href="#cb24-8" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_7985.<span class="fu">log</span></span>
<span id="cb24-9"><a href="#cb24-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb24-10"><a href="#cb24-10" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 21:59:23</span>
<span id="cb24-11"><a href="#cb24-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-13"><a href="#cb24-13" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb24-14"><a href="#cb24-14" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb24-15"><a href="#cb24-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-16"><a href="#cb24-16" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb24-17"><a href="#cb24-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-18"><a href="#cb24-18" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb24-19"><a href="#cb24-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb24-21"><a href="#cb24-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-22"><a href="#cb24-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb24-23"><a href="#cb24-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-24"><a href="#cb24-24" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb24-25"><a href="#cb24-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-26"><a href="#cb24-26" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb24-27"><a href="#cb24-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-28"><a href="#cb24-28" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb24-29"><a href="#cb24-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-30"><a href="#cb24-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb24-31"><a href="#cb24-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-32"><a href="#cb24-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb24-33"><a href="#cb24-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-34"><a href="#cb24-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb24-35"><a href="#cb24-35" aria-hidden="true" tabindex="-1"></a>(45 observations deleted)</span>
<span id="cb24-36"><a href="#cb24-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-37"><a href="#cb24-37" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-38"><a href="#cb24-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb24-39"><a href="#cb24-39" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb24-40"><a href="#cb24-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb24-41"><a href="#cb24-41" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb24-42"><a href="#cb24-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-43"><a href="#cb24-43" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-44"><a href="#cb24-44" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb24-45"><a href="#cb24-45" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb24-46"><a href="#cb24-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-47"><a href="#cb24-47" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb24-48"><a href="#cb24-48" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb24-49"><a href="#cb24-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-50"><a href="#cb24-50" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb24-51"><a href="#cb24-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-52"><a href="#cb24-52" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb24-53"><a href="#cb24-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-54"><a href="#cb24-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb24-55"><a href="#cb24-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-56"><a href="#cb24-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb24-57"><a href="#cb24-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-58"><a href="#cb24-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb24-59"><a href="#cb24-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-60"><a href="#cb24-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb24-61"><a href="#cb24-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-62"><a href="#cb24-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb24-63"><a href="#cb24-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-64"><a href="#cb24-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb24-65"><a href="#cb24-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-66"><a href="#cb24-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb24-67"><a href="#cb24-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-68"><a href="#cb24-68" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-69"><a href="#cb24-69" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb24-70"><a href="#cb24-70" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb24-71"><a href="#cb24-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-72"><a href="#cb24-72" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-73"><a href="#cb24-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb24-74"><a href="#cb24-74" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-75"><a href="#cb24-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-76"><a href="#cb24-76" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb24-77"><a href="#cb24-77" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-78"><a href="#cb24-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-79"><a href="#cb24-79" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb24-80"><a href="#cb24-80" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-81"><a href="#cb24-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-82"><a href="#cb24-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb24-83"><a href="#cb24-83" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-84"><a href="#cb24-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-85"><a href="#cb24-85" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb24-86"><a href="#cb24-86" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-87"><a href="#cb24-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-88"><a href="#cb24-88" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb24-89"><a href="#cb24-89" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-90"><a href="#cb24-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-91"><a href="#cb24-91" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb24-92"><a href="#cb24-92" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-93"><a href="#cb24-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-94"><a href="#cb24-94" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb24-95"><a href="#cb24-95" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-96"><a href="#cb24-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-97"><a href="#cb24-97" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb24-98"><a href="#cb24-98" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-99"><a href="#cb24-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-100"><a href="#cb24-100" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb24-101"><a href="#cb24-101" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-102"><a href="#cb24-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-103"><a href="#cb24-103" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb24-104"><a href="#cb24-104" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-105"><a href="#cb24-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-106"><a href="#cb24-106" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb24-107"><a href="#cb24-107" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-108"><a href="#cb24-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-109"><a href="#cb24-109" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb24-110"><a href="#cb24-110" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-111"><a href="#cb24-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-112"><a href="#cb24-112" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb24-113"><a href="#cb24-113" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-114"><a href="#cb24-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-115"><a href="#cb24-115" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb24-116"><a href="#cb24-116" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-117"><a href="#cb24-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-118"><a href="#cb24-118" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb24-119"><a href="#cb24-119" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb24-120"><a href="#cb24-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-121"><a href="#cb24-121" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-122"><a href="#cb24-122" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb24-123"><a href="#cb24-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-124"><a href="#cb24-124" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb24-125"><a href="#cb24-125" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb24-126"><a href="#cb24-126" aria-hidden="true" tabindex="-1"></a>         79 |         31       12.20       12.20</span>
<span id="cb24-127"><a href="#cb24-127" aria-hidden="true" tabindex="-1"></a>         80 |         34       13.39       25.59</span>
<span id="cb24-128"><a href="#cb24-128" aria-hidden="true" tabindex="-1"></a>         81 |         35       13.78       39.37</span>
<span id="cb24-129"><a href="#cb24-129" aria-hidden="true" tabindex="-1"></a>         82 |         35       13.78       53.15</span>
<span id="cb24-130"><a href="#cb24-130" aria-hidden="true" tabindex="-1"></a>         83 |         36       14.17       67.32</span>
<span id="cb24-131"><a href="#cb24-131" aria-hidden="true" tabindex="-1"></a>         84 |         40       15.75       83.07</span>
<span id="cb24-132"><a href="#cb24-132" aria-hidden="true" tabindex="-1"></a>         85 |         43       16.93      100.00</span>
<span id="cb24-133"><a href="#cb24-133" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb24-134"><a href="#cb24-134" aria-hidden="true" tabindex="-1"></a>      Total |        254      100.00</span>
<span id="cb24-135"><a href="#cb24-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-136"><a href="#cb24-136" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-137"><a href="#cb24-137" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb24-138"><a href="#cb24-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-139"><a href="#cb24-139" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb24-140"><a href="#cb24-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-141"><a href="#cb24-141" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-142"><a href="#cb24-142" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb24-143"><a href="#cb24-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-144"><a href="#cb24-144" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-145"><a href="#cb24-145" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb24-146"><a href="#cb24-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-147"><a href="#cb24-147" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-148"><a href="#cb24-148" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb24-149"><a href="#cb24-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-150"><a href="#cb24-150" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb24-151"><a href="#cb24-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-152"><a href="#cb24-152" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-153"><a href="#cb24-153" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb24-154"><a href="#cb24-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-155"><a href="#cb24-155" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-156"><a href="#cb24-156" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb24-157"><a href="#cb24-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-158"><a href="#cb24-158" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-159"><a href="#cb24-159" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb24-160"><a href="#cb24-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-161"><a href="#cb24-161" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb24-162"><a href="#cb24-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-163"><a href="#cb24-163" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-164"><a href="#cb24-164" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb24-165"><a href="#cb24-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-166"><a href="#cb24-166" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-167"><a href="#cb24-167" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb24-168"><a href="#cb24-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-169"><a href="#cb24-169" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-170"><a href="#cb24-170" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb24-171"><a href="#cb24-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-172"><a href="#cb24-172" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb24-173"><a href="#cb24-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-174"><a href="#cb24-174" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-175"><a href="#cb24-175" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb24-176"><a href="#cb24-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-177"><a href="#cb24-177" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-178"><a href="#cb24-178" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb24-179"><a href="#cb24-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-180"><a href="#cb24-180" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-181"><a href="#cb24-181" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb24-182"><a href="#cb24-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-183"><a href="#cb24-183" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb24-184"><a href="#cb24-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-185"><a href="#cb24-185" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-186"><a href="#cb24-186" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb24-187"><a href="#cb24-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-188"><a href="#cb24-188" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-189"><a href="#cb24-189" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb24-190"><a href="#cb24-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-191"><a href="#cb24-191" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-192"><a href="#cb24-192" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb24-193"><a href="#cb24-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-194"><a href="#cb24-194" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb24-195"><a href="#cb24-195" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-196"><a href="#cb24-196" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb24-197"><a href="#cb24-197" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb24-198"><a href="#cb24-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-199"><a href="#cb24-199" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb24-200"><a href="#cb24-200" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb24-201"><a href="#cb24-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-202"><a href="#cb24-202" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-203"><a href="#cb24-203" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb24-204"><a href="#cb24-204" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb24-205"><a href="#cb24-205" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb24-206"><a href="#cb24-206" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb24-207"><a href="#cb24-207" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb24-208"><a href="#cb24-208" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb24-209"><a href="#cb24-209" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb24-210"><a href="#cb24-210" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb24-211"><a href="#cb24-211" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb24-212"><a href="#cb24-212" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb24-213"><a href="#cb24-213" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb24-214"><a href="#cb24-214" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb24-215"><a href="#cb24-215" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb24-216"><a href="#cb24-216" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb24-217"><a href="#cb24-217" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb24-218"><a href="#cb24-218" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb24-219"><a href="#cb24-219" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb24-220"><a href="#cb24-220" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb24-221"><a href="#cb24-221" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb24-222"><a href="#cb24-222" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb24-223"><a href="#cb24-223" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb24-224"><a href="#cb24-224" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb24-225"><a href="#cb24-225" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb24-226"><a href="#cb24-226" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb24-227"><a href="#cb24-227" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb24-228"><a href="#cb24-228" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb24-229"><a href="#cb24-229" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb24-230"><a href="#cb24-230" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb24-231"><a href="#cb24-231" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb24-232"><a href="#cb24-232" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb24-233"><a href="#cb24-233" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb24-234"><a href="#cb24-234" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb24-235"><a href="#cb24-235" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb24-236"><a href="#cb24-236" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb24-237"><a href="#cb24-237" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb24-238"><a href="#cb24-238" aria-hidden="true" tabindex="-1"></a> 34. </span>
<span id="cb24-239"><a href="#cb24-239" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb24-240"><a href="#cb24-240" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb24-241"><a href="#cb24-241" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb24-242"><a href="#cb24-242" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6</span>
<span id="cb24-243"><a href="#cb24-243" aria-hidden="true" tabindex="-1"></a>&gt; +<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb24-244"><a href="#cb24-244" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb24-245"><a href="#cb24-245" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb24-246"><a href="#cb24-246" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb24-247"><a href="#cb24-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-248"><a href="#cb24-248" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-249"><a href="#cb24-249" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb24-250"><a href="#cb24-250" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb24-251"><a href="#cb24-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-252"><a href="#cb24-252" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.51e+10</span>
<span id="cb24-253"><a href="#cb24-253" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb24-254"><a href="#cb24-254" aria-hidden="true" tabindex="-1"></a>Iteration 24:  residual SS =  1.01e+08</span>
<span id="cb24-255"><a href="#cb24-255" aria-hidden="true" tabindex="-1"></a>Iteration 25:  residual SS =  1.01e+08</span>
<span id="cb24-256"><a href="#cb24-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-257"><a href="#cb24-257" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb24-258"><a href="#cb24-258" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =   1210.09</span>
<span id="cb24-259"><a href="#cb24-259" aria-hidden="true" tabindex="-1"></a>       Model |  1.5069e+10    28   538194036         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb24-260"><a href="#cb24-260" aria-hidden="true" tabindex="-1"></a>    Residual |   100515047   226  444756.844         R-squared     =    0.9934</span>
<span id="cb24-261"><a href="#cb24-261" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9926</span>
<span id="cb24-262"><a href="#cb24-262" aria-hidden="true" tabindex="-1"></a>       Total |  1.5170e+10   254  59724204.9         Root MSE      =  666.9009</span>
<span id="cb24-263"><a href="#cb24-263" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  3994.496</span>
<span id="cb24-264"><a href="#cb24-264" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb24-265"><a href="#cb24-265" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb24-266"><a href="#cb24-266" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb24-267"><a href="#cb24-267" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb24-268"><a href="#cb24-268" aria-hidden="true" tabindex="-1"></a>          a3 |   254.0918   317.1045     0.80   0.424    -370.7678    878.9513</span>
<span id="cb24-269"><a href="#cb24-269" aria-hidden="true" tabindex="-1"></a>          a4 |   505.1058   325.6388     1.55   0.122    -136.5708    1146.782</span>
<span id="cb24-270"><a href="#cb24-270" aria-hidden="true" tabindex="-1"></a>          a5 |   708.9466   317.3172     2.23   0.026       83.668    1334.225</span>
<span id="cb24-271"><a href="#cb24-271" aria-hidden="true" tabindex="-1"></a>          a6 |   1082.054   322.4415     3.36   0.001     446.6773     1717.43</span>
<span id="cb24-272"><a href="#cb24-272" aria-hidden="true" tabindex="-1"></a>          a7 |   1063.014   373.9703     2.84   0.005     326.0995    1799.929</span>
<span id="cb24-273"><a href="#cb24-273" aria-hidden="true" tabindex="-1"></a>          b2 |   .0040633   .0329008     0.12   0.902    -.0607683    .0688948</span>
<span id="cb24-274"><a href="#cb24-274" aria-hidden="true" tabindex="-1"></a>          b3 |   .0756038    .049061     1.54   0.125    -.0210716    .1722792</span>
<span id="cb24-275"><a href="#cb24-275" aria-hidden="true" tabindex="-1"></a>          b4 |   .0828575   .0490467     1.69   0.093    -.0137897    .1795048</span>
<span id="cb24-276"><a href="#cb24-276" aria-hidden="true" tabindex="-1"></a>          b5 |   .0327776    .050707     0.65   0.519    -.0671415    .1326967</span>
<span id="cb24-277"><a href="#cb24-277" aria-hidden="true" tabindex="-1"></a>          b6 |   .0351224   .0514768     0.68   0.496    -.0663135    .1365582</span>
<span id="cb24-278"><a href="#cb24-278" aria-hidden="true" tabindex="-1"></a>          b7 |   .0825554   .0557608     1.48   0.140    -.0273221    .1924329</span>
<span id="cb24-279"><a href="#cb24-279" aria-hidden="true" tabindex="-1"></a>          c1 |   .0326037   .1117298     0.29   0.771    -.1875618    .2527691</span>
<span id="cb24-280"><a href="#cb24-280" aria-hidden="true" tabindex="-1"></a>          c2 |    .385946   .1204171     3.21   0.002     .1486621    .6232299</span>
<span id="cb24-281"><a href="#cb24-281" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1929238   .0568197    -3.40   0.001     -.304888   -.0809596</span>
<span id="cb24-282"><a href="#cb24-282" aria-hidden="true" tabindex="-1"></a>          c4 |    .715212   .0736084     9.72   0.000     .5701655    .8602585</span>
<span id="cb24-283"><a href="#cb24-283" aria-hidden="true" tabindex="-1"></a>          c5 |   .1578585     .03381     4.67   0.000     .0912354    .2244816</span>
<span id="cb24-284"><a href="#cb24-284" aria-hidden="true" tabindex="-1"></a>          c6 |   .0641097   .0247061     2.59   0.010     .0154259    .1127934</span>
<span id="cb24-285"><a href="#cb24-285" aria-hidden="true" tabindex="-1"></a>          c7 |   .1829447   .0242773     7.54   0.000     .1351059    .2307836</span>
<span id="cb24-286"><a href="#cb24-286" aria-hidden="true" tabindex="-1"></a>          c8 |   6.599831   .7305317     9.03   0.000     5.160306    8.039356</span>
<span id="cb24-287"><a href="#cb24-287" aria-hidden="true" tabindex="-1"></a>          c9 |   .1171992   .0634238     1.85   0.066    -.0077785    .2421769</span>
<span id="cb24-288"><a href="#cb24-288" aria-hidden="true" tabindex="-1"></a>          d1 |   .4917133   .0795807     6.18   0.000     .3348983    .6485283</span>
<span id="cb24-289"><a href="#cb24-289" aria-hidden="true" tabindex="-1"></a>          d2 |   .2622177   .1757206     1.49   0.137    -.0840426    .6084779</span>
<span id="cb24-290"><a href="#cb24-290" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0451278   .0677055    -0.67   0.506    -.1785426     .088287</span>
<span id="cb24-291"><a href="#cb24-291" aria-hidden="true" tabindex="-1"></a>          d4 |   .3030767   .1701249     1.78   0.076    -.0321571    .6383106</span>
<span id="cb24-292"><a href="#cb24-292" aria-hidden="true" tabindex="-1"></a>          d5 |   .0397822   .0362731     1.10   0.274    -.0316947     .111259</span>
<span id="cb24-293"><a href="#cb24-293" aria-hidden="true" tabindex="-1"></a>          d6 |   .0967659   .0501832     1.93   0.055    -.0021208    .1956526</span>
<span id="cb24-294"><a href="#cb24-294" aria-hidden="true" tabindex="-1"></a>          d7 |   .3052359   .0715711     4.26   0.000     .1642038     .446268</span>
<span id="cb24-295"><a href="#cb24-295" aria-hidden="true" tabindex="-1"></a>          d8 |   6.299805   .9622249     6.55   0.000     4.403726    8.195885</span>
<span id="cb24-296"><a href="#cb24-296" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb24-297"><a href="#cb24-297" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb24-298"><a href="#cb24-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-299"><a href="#cb24-299" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-300"><a href="#cb24-300" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb24-301"><a href="#cb24-301" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb24-302"><a href="#cb24-302" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb24-303"><a href="#cb24-303" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb24-304"><a href="#cb24-304" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb24-305"><a href="#cb24-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-306"><a href="#cb24-306" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-307"><a href="#cb24-307" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb24-308"><a href="#cb24-308" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb24-309"><a href="#cb24-309" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb24-310"><a href="#cb24-310" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb24-311"><a href="#cb24-311" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb24-312"><a href="#cb24-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-313"><a href="#cb24-313" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-314"><a href="#cb24-314" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb24-315"><a href="#cb24-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-316"><a href="#cb24-316" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-317"><a href="#cb24-317" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-318"><a href="#cb24-318" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb24-319"><a href="#cb24-319" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb24-320"><a href="#cb24-320" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb24-321"><a href="#cb24-321" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb24-322"><a href="#cb24-322" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb24-323"><a href="#cb24-323" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb24-324"><a href="#cb24-324" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb24-325"><a href="#cb24-325" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb24-326"><a href="#cb24-326" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb24-327"><a href="#cb24-327" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb24-328"><a href="#cb24-328" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb24-329"><a href="#cb24-329" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb24-330"><a href="#cb24-330" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb24-331"><a href="#cb24-331" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb24-332"><a href="#cb24-332" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb24-333"><a href="#cb24-333" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb24-334"><a href="#cb24-334" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb24-335"><a href="#cb24-335" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb24-336"><a href="#cb24-336" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb24-337"><a href="#cb24-337" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb24-338"><a href="#cb24-338" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb24-339"><a href="#cb24-339" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb24-340"><a href="#cb24-340" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb24-341"><a href="#cb24-341" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb24-342"><a href="#cb24-342" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb24-343"><a href="#cb24-343" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb24-344"><a href="#cb24-344" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb24-345"><a href="#cb24-345" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb24-346"><a href="#cb24-346" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb24-347"><a href="#cb24-347" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb24-348"><a href="#cb24-348" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb24-349"><a href="#cb24-349" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb24-350"><a href="#cb24-350" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb24-351"><a href="#cb24-351" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb24-352"><a href="#cb24-352" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb24-353"><a href="#cb24-353" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb24-354"><a href="#cb24-354" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb24-355"><a href="#cb24-355" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb24-356"><a href="#cb24-356" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)</span>
<span id="cb24-357"><a href="#cb24-357" aria-hidden="true" tabindex="-1"></a>&gt; *tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb24-358"><a href="#cb24-358" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb24-359"><a href="#cb24-359" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb24-360"><a href="#cb24-360" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb24-361"><a href="#cb24-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-362"><a href="#cb24-362" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-363"><a href="#cb24-363" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb24-364"><a href="#cb24-364" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb24-365"><a href="#cb24-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-366"><a href="#cb24-366" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  353.5865</span>
<span id="cb24-367"><a href="#cb24-367" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb24-368"><a href="#cb24-368" aria-hidden="true" tabindex="-1"></a>Iteration 20:  residual SS =  2.957295</span>
<span id="cb24-369"><a href="#cb24-369" aria-hidden="true" tabindex="-1"></a>Iteration 21:  residual SS =  2.957295</span>
<span id="cb24-370"><a href="#cb24-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-371"><a href="#cb24-371" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb24-372"><a href="#cb24-372" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =    958.75</span>
<span id="cb24-373"><a href="#cb24-373" aria-hidden="true" tabindex="-1"></a>       Model |  351.277591    28  12.5456282         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb24-374"><a href="#cb24-374" aria-hidden="true" tabindex="-1"></a>    Residual |  2.95729549   226  .013085378         R-squared     =    0.9917</span>
<span id="cb24-375"><a href="#cb24-375" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9906</span>
<span id="cb24-376"><a href="#cb24-376" aria-hidden="true" tabindex="-1"></a>       Total |  354.234886   254  1.39462554         Root MSE      =  .1143913</span>
<span id="cb24-377"><a href="#cb24-377" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -410.2562</span>
<span id="cb24-378"><a href="#cb24-378" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb24-379"><a href="#cb24-379" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb24-380"><a href="#cb24-380" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb24-381"><a href="#cb24-381" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb24-382"><a href="#cb24-382" aria-hidden="true" tabindex="-1"></a>          a3 |   367.9829    239.059     1.54   0.125    -103.0867    839.0525</span>
<span id="cb24-383"><a href="#cb24-383" aria-hidden="true" tabindex="-1"></a>          a4 |    600.553   254.2261     2.36   0.019     99.59628     1101.51</span>
<span id="cb24-384"><a href="#cb24-384" aria-hidden="true" tabindex="-1"></a>          a5 |   887.9399   243.5428     3.65   0.000     408.0348    1367.845</span>
<span id="cb24-385"><a href="#cb24-385" aria-hidden="true" tabindex="-1"></a>          a6 |   1104.433   251.0245     4.40   0.000     609.7847     1599.08</span>
<span id="cb24-386"><a href="#cb24-386" aria-hidden="true" tabindex="-1"></a>          a7 |   855.7993   366.2444     2.34   0.020     134.1088     1577.49</span>
<span id="cb24-387"><a href="#cb24-387" aria-hidden="true" tabindex="-1"></a>          b2 |   .0130387   .0303131     0.43   0.668    -.0466937    .0727711</span>
<span id="cb24-388"><a href="#cb24-388" aria-hidden="true" tabindex="-1"></a>          b3 |   .0674477   .0425176     1.59   0.114     -.016334    .1512294</span>
<span id="cb24-389"><a href="#cb24-389" aria-hidden="true" tabindex="-1"></a>          b4 |   .0701234   .0441821     1.59   0.114    -.0169382     .157185</span>
<span id="cb24-390"><a href="#cb24-390" aria-hidden="true" tabindex="-1"></a>          b5 |  -.0005627   .0470779    -0.01   0.990    -.0933305    .0922051</span>
<span id="cb24-391"><a href="#cb24-391" aria-hidden="true" tabindex="-1"></a>          b6 |   .0179989   .0473905     0.38   0.704    -.0753848    .1113826</span>
<span id="cb24-392"><a href="#cb24-392" aria-hidden="true" tabindex="-1"></a>          b7 |   .1007712   .0641587     1.57   0.118    -.0256545    .2271969</span>
<span id="cb24-393"><a href="#cb24-393" aria-hidden="true" tabindex="-1"></a>          c1 |   .0492474   .1311096     0.38   0.708    -.2091061     .307601</span>
<span id="cb24-394"><a href="#cb24-394" aria-hidden="true" tabindex="-1"></a>          c2 |   .3908689   .1383663     2.82   0.005     .1182159     .663522</span>
<span id="cb24-395"><a href="#cb24-395" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0618204   .0611492    -1.01   0.313    -.1823158     .058675</span>
<span id="cb24-396"><a href="#cb24-396" aria-hidden="true" tabindex="-1"></a>          c4 |   .8103277   .1038045     7.81   0.000     .6057792    1.014876</span>
<span id="cb24-397"><a href="#cb24-397" aria-hidden="true" tabindex="-1"></a>          c5 |   .1779391   .0355273     5.01   0.000     .1079319    .2479463</span>
<span id="cb24-398"><a href="#cb24-398" aria-hidden="true" tabindex="-1"></a>          c6 |   .0693687   .0304968     2.27   0.024     .0092743     .129463</span>
<span id="cb24-399"><a href="#cb24-399" aria-hidden="true" tabindex="-1"></a>          c7 |   .1567051   .0360384     4.35   0.000     .0856908    .2277193</span>
<span id="cb24-400"><a href="#cb24-400" aria-hidden="true" tabindex="-1"></a>          c8 |   5.839036   .8621144     6.77   0.000     4.140226    7.537847</span>
<span id="cb24-401"><a href="#cb24-401" aria-hidden="true" tabindex="-1"></a>          c9 |   .1059852   .0550545     1.93   0.055    -.0025007    .2144711</span>
<span id="cb24-402"><a href="#cb24-402" aria-hidden="true" tabindex="-1"></a>          d1 |   .4759918   .1172145     4.06   0.000     .2450187    .7069649</span>
<span id="cb24-403"><a href="#cb24-403" aria-hidden="true" tabindex="-1"></a>          d2 |   .2120021   .1419991     1.49   0.137    -.0678094    .4918136</span>
<span id="cb24-404"><a href="#cb24-404" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0270369    .074052    -0.37   0.715    -.1729575    .1188837</span>
<span id="cb24-405"><a href="#cb24-405" aria-hidden="true" tabindex="-1"></a>          d4 |     .24435   .1516866     1.61   0.109    -.0545508    .5432508</span>
<span id="cb24-406"><a href="#cb24-406" aria-hidden="true" tabindex="-1"></a>          d5 |   .0530065   .0356148     1.49   0.138     -.017173     .123186</span>
<span id="cb24-407"><a href="#cb24-407" aria-hidden="true" tabindex="-1"></a>          d6 |   .0575178   .0639555     0.90   0.369    -.0685076    .1835431</span>
<span id="cb24-408"><a href="#cb24-408" aria-hidden="true" tabindex="-1"></a>          d7 |   .2971909   .0566882     5.24   0.000      .185486    .4088959</span>
<span id="cb24-409"><a href="#cb24-409" aria-hidden="true" tabindex="-1"></a>          d8 |   6.630805   .7652819     8.66   0.000     5.122804    8.138805</span>
<span id="cb24-410"><a href="#cb24-410" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb24-411"><a href="#cb24-411" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb24-412"><a href="#cb24-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-413"><a href="#cb24-413" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb24-414"><a href="#cb24-414" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb24-415"><a href="#cb24-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-416"><a href="#cb24-416" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb24-417"><a href="#cb24-417" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb24-418"><a href="#cb24-418" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb24-419"><a href="#cb24-419" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_7985.<span class="fu">log</span></span>
<span id="cb24-420"><a href="#cb24-420" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb24-421"><a href="#cb24-421" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 21:59:28</span>
<span id="cb24-422"><a href="#cb24-422" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb24-423"><a href="#cb24-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-424"><a href="#cb24-424" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb24-425"><a href="#cb24-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb24-426"><a href="#cb24-426" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="my-code-2" class="level3">
<h3 class="anchored" data-anchor-id="my-code-2">My code</h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth, <span class="at">hght_t =</span> hght, <span class="at">wght_t =</span> weight, <span class="at">hp_t =</span> hp, <span class="at">four_t =</span> four,</span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran, <span class="at">ps_t =</span> ps, <span class="at">ac_t =</span> ac</span>
<span id="cb25-7"><a href="#cb25-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-8"><a href="#cb25-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-9"><a href="#cb25-9" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb25-10"><a href="#cb25-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-11"><a href="#cb25-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb25-12"><a href="#cb25-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb25-13"><a href="#cb25-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth, <span class="at">hght_c =</span> hght, <span class="at">wght_c =</span> wght, <span class="at">hp_c =</span> hp, <span class="at">four_c =</span> four,</span>
<span id="cb25-14"><a href="#cb25-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran, <span class="at">ps_c =</span> ps, <span class="at">ac_c =</span> ac</span>
<span id="cb25-15"><a href="#cb25-15" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-16"><a href="#cb25-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-17"><a href="#cb25-17" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb25-18"><a href="#cb25-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb25-19"><a href="#cb25-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-20"><a href="#cb25-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb25-21"><a href="#cb25-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb25-22"><a href="#cb25-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb25-23"><a href="#cb25-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb25-24"><a href="#cb25-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb25-25"><a href="#cb25-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb25-26"><a href="#cb25-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb25-27"><a href="#cb25-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb25-28"><a href="#cb25-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb25-29"><a href="#cb25-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb25-30"><a href="#cb25-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb25-31"><a href="#cb25-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb25-32"><a href="#cb25-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb25-33"><a href="#cb25-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb25-34"><a href="#cb25-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb25-35"><a href="#cb25-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb25-36"><a href="#cb25-36" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb25-37"><a href="#cb25-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-38"><a href="#cb25-38" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb25-39"><a href="#cb25-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb25-40"><a href="#cb25-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb25-41"><a href="#cb25-41" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb25-42"><a href="#cb25-42" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb25-43"><a href="#cb25-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb25-44"><a href="#cb25-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb25-45"><a href="#cb25-45" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
   year  freq percent   cum
  &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1    79    31    12.2  12.2
2    80    34    13.4  25.6
3    81    35    13.8  39.4
4    82    35    13.8  53.1
5    83    36    14.2  67.3
6    84    40    15.7  83.1
7    85    43    16.9 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="co"># expand the yd variable</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a><span class="co"># generate the cyd and tyd variables</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-13"><a href="#cb27-13" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb27-14"><a href="#cb27-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb27-15"><a href="#cb27-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd2),</span>
<span id="cb27-16"><a href="#cb27-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd2),</span>
<span id="cb27-17"><a href="#cb27-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd3),</span>
<span id="cb27-18"><a href="#cb27-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd3),</span>
<span id="cb27-19"><a href="#cb27-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd4),</span>
<span id="cb27-20"><a href="#cb27-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd4),</span>
<span id="cb27-21"><a href="#cb27-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd5),</span>
<span id="cb27-22"><a href="#cb27-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd5),</span>
<span id="cb27-23"><a href="#cb27-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd6),</span>
<span id="cb27-24"><a href="#cb27-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd6),</span>
<span id="cb27-25"><a href="#cb27-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">case_when</span>(type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd7),</span>
<span id="cb27-26"><a href="#cb27-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">case_when</span>(type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>, <span class="cn">TRUE</span> <span class="sc">~</span> yd7)</span>
<span id="cb27-27"><a href="#cb27-27" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb27-28"><a href="#cb27-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-29"><a href="#cb27-29" aria-hidden="true" tabindex="-1"></a><span class="co"># fit the models</span></span>
<span id="cb27-30"><a href="#cb27-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-31"><a href="#cb27-31" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb27-32"><a href="#cb27-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb27-33"><a href="#cb27-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb27-34"><a href="#cb27-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb27-35"><a href="#cb27-35" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>, <span class="at">c9 =</span> <span class="fl">0.1</span>,</span>
<span id="cb27-36"><a href="#cb27-36" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb27-37"><a href="#cb27-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span></span>
<span id="cb27-38"><a href="#cb27-38" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-39"><a href="#cb27-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-40"><a href="#cb27-40" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb27-41"><a href="#cb27-41" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb27-42"><a href="#cb27-42" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span> b7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb27-43"><a href="#cb27-43" aria-hidden="true" tabindex="-1"></a>      c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span> c5 <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb27-44"><a href="#cb27-44" aria-hidden="true" tabindex="-1"></a>      c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb27-45"><a href="#cb27-45" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb27-46"><a href="#cb27-46" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span></span>
<span id="cb27-47"><a href="#cb27-47" aria-hidden="true" tabindex="-1"></a>      d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb27-48"><a href="#cb27-48" aria-hidden="true" tabindex="-1"></a>      d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb27-49"><a href="#cb27-49" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb27-50"><a href="#cb27-50" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb27-51"><a href="#cb27-51" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb27-52"><a href="#cb27-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-53"><a href="#cb27-53" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * cyd5 + 
    b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + c3 * 
    hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * ac_c + 
    c8) + exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + (b4 + 0.16) * 
    tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + c9 * tyd7 + 
    d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * 
    tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  2.542e+02  3.171e+02   0.802 0.423598    
a4  5.052e+02  3.256e+02   1.552 0.122150    
a5  7.090e+02  3.173e+02   2.235 0.026415 *  
a6  1.082e+03  3.224e+02   3.356 0.000926 ***
a7  1.063e+03  3.739e+02   2.843 0.004876 ** 
b2  4.065e-03  3.290e-02   0.124 0.901779    
b3  7.559e-02  4.906e-02   1.541 0.124732    
b4  8.284e-02  4.904e-02   1.689 0.092555 .  
b5  3.276e-02  5.070e-02   0.646 0.518840    
b6  3.510e-02  5.147e-02   0.682 0.495934    
b7  8.254e-02  5.576e-02   1.480 0.140197    
c1  3.261e-02  1.117e-01   0.292 0.770715    
c2  3.860e-01  1.204e-01   3.205 0.001545 ** 
c3 -1.929e-01  5.683e-02  -3.395 0.000811 ***
c4  7.152e-01  7.362e-02   9.715  &lt; 2e-16 ***
c5  1.579e-01  3.382e-02   4.668 5.21e-06 ***
c6  6.412e-02  2.471e-02   2.595 0.010082 *  
c7  1.830e-01  2.428e-02   7.535 1.16e-12 ***
c8  6.599e+00  7.307e-01   9.032  &lt; 2e-16 ***
c9  1.172e-01  6.342e-02   1.848 0.065932 .  
d1  4.917e-01  7.958e-02   6.179 2.97e-09 ***
d2  2.621e-01  1.757e-01   1.492 0.137107    
d3 -4.513e-02  6.770e-02  -0.667 0.505752    
d4  3.031e-01  1.701e-01   1.782 0.076158 .  
d5  3.978e-02  3.627e-02   1.097 0.273899    
d6  9.676e-02  5.018e-02   1.928 0.055072 .  
d7  3.052e-01  7.156e-02   4.265 2.94e-05 ***
d8  6.300e+00  9.620e-01   6.549 3.85e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 666.9 on 226 degrees of freedom

Number of iterations to convergence: 30 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(<span class="fu">coef</span>(fit)[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"c8"</span>]),</span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>((<span class="fu">coef</span>(fit)[<span class="st">"b2"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd2 <span class="sc">+</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>        (<span class="fu">coef</span>(fit)[<span class="st">"b3"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (<span class="fu">coef</span>(fit)[<span class="st">"b4"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>        (<span class="fu">coef</span>(fit)[<span class="st">"b5"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (<span class="fu">coef</span>(fit)[<span class="st">"b6"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"c9"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> <span class="fu">coef</span>(fit)[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>        <span class="fu">coef</span>(fit)[<span class="st">"d8"</span>])</span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb29-22"><a href="#cb29-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-23"><a href="#cb29-23" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb29-24"><a href="#cb29-24" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7) <span class="sc">+</span></span>
<span id="cb29-25"><a href="#cb29-25" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb29-26"><a href="#cb29-26" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb29-27"><a href="#cb29-27" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb29-28"><a href="#cb29-28" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb29-29"><a href="#cb29-29" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb29-30"><a href="#cb29-30" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb29-31"><a href="#cb29-31" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb29-32"><a href="#cb29-32" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb29-33"><a href="#cb29-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb29-34"><a href="#cb29-34" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb29-35"><a href="#cb29-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-36"><a href="#cb29-36" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + winv * exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + 
    (b4 + 0.16) * tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + 
    c9 * tyd7 + d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * 
    hp_t + d5 * tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  3.679e+02  2.391e+02   1.539 0.125219    
a4  6.005e+02  2.543e+02   2.362 0.019041 *  
a5  8.879e+02  2.436e+02   3.645 0.000332 ***
a6  1.104e+03  2.511e+02   4.399 1.68e-05 ***
a7  8.556e+02  3.663e+02   2.336 0.020379 *  
b2  1.304e-02  3.031e-02   0.430 0.667488    
b3  6.745e-02  4.252e-02   1.586 0.114086    
b4  7.013e-02  4.419e-02   1.587 0.113886    
b5 -5.484e-04  4.708e-02  -0.012 0.990718    
b6  1.801e-02  4.740e-02   0.380 0.704268    
b7  1.008e-01  6.416e-02   1.571 0.117554    
c1  4.925e-02  1.311e-01   0.376 0.707523    
c2  3.908e-01  1.383e-01   2.825 0.005153 ** 
c3 -6.182e-02  6.114e-02  -1.011 0.313088    
c4  8.103e-01  1.038e-01   7.807 2.17e-13 ***
c5  1.779e-01  3.552e-02   5.009 1.10e-06 ***
c6  6.936e-02  3.049e-02   2.275 0.023864 *  
c7  1.567e-01  3.604e-02   4.348 2.08e-05 ***
c8  5.839e+00  8.619e-01   6.775 1.07e-10 ***
c9  1.060e-01  5.506e-02   1.925 0.055494 .  
d1  4.760e-01  1.172e-01   4.060 6.76e-05 ***
d2  2.121e-01  1.420e-01   1.493 0.136773    
d3 -2.704e-02  7.406e-02  -0.365 0.715380    
d4  2.443e-01  1.517e-01   1.611 0.108659    
d5  5.301e-02  3.562e-02   1.488 0.138112    
d6  5.751e-02  6.396e-02   0.899 0.369534    
d7  2.972e-01  5.670e-02   5.242 3.64e-07 ***
d8  6.630e+00  7.655e-01   8.661 8.98e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1144 on 226 degrees of freedom

Number of iterations to convergence: 31 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>
</section>
</section>
<section id="exercise-4" class="level2">
<h2 class="anchored" data-anchor-id="exercise-4">Exercise 4</h2>
<p>Run the programs <code>unit_quality.do</code>, <code>qindex_c.do</code>, <code>qindex_t.do</code> to reproduce the quality indexes and unit-qualities for cars and trucks in Table 8.3. What formula is used for the quality of each model and the quality indexes, and how does this differ from the unit-quality?</p>
<section id="feenstras-code-3" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-3">Feenstra’s code</h3>
<section id="unit_quality.do" class="level4">
<h4 class="anchored" data-anchor-id="unit_quality.do">unit_quality.do</h4>
<div class="sourceCode" id="cb31"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\unit_quality.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> quan quan_t</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb31-20"><a href="#cb31-20" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb31-21"><a href="#cb31-21" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb31-22"><a href="#cb31-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> quan quan_c</span>
<span id="cb31-23"><a href="#cb31-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb31-24"><a href="#cb31-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb31-25"><a href="#cb31-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb31-26"><a href="#cb31-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb31-27"><a href="#cb31-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb31-28"><a href="#cb31-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb31-29"><a href="#cb31-29" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb31-30"><a href="#cb31-30" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb31-31"><a href="#cb31-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-32"><a href="#cb31-32" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb31-33"><a href="#cb31-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-34"><a href="#cb31-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb31-35"><a href="#cb31-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb31-36"><a href="#cb31-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb31-37"><a href="#cb31-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb31-38"><a href="#cb31-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb31-39"><a href="#cb31-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb31-40"><a href="#cb31-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb31-41"><a href="#cb31-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb31-42"><a href="#cb31-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb31-43"><a href="#cb31-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb31-44"><a href="#cb31-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb31-45"><a href="#cb31-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb31-46"><a href="#cb31-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb31-47"><a href="#cb31-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb31-48"><a href="#cb31-48" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb31-49"><a href="#cb31-49" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb31-50"><a href="#cb31-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-51"><a href="#cb31-51" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb31-52"><a href="#cb31-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-53"><a href="#cb31-53" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb31-54"><a href="#cb31-54" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb31-55"><a href="#cb31-55" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-56"><a href="#cb31-56" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-57"><a href="#cb31-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-58"><a href="#cb31-58" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb31-59"><a href="#cb31-59" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb31-60"><a href="#cb31-60" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-61"><a href="#cb31-61" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-62"><a href="#cb31-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-63"><a href="#cb31-63" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb31-64"><a href="#cb31-64" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb31-65"><a href="#cb31-65" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-66"><a href="#cb31-66" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-67"><a href="#cb31-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-68"><a href="#cb31-68" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb31-69"><a href="#cb31-69" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb31-70"><a href="#cb31-70" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-71"><a href="#cb31-71" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-72"><a href="#cb31-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-73"><a href="#cb31-73" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb31-74"><a href="#cb31-74" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb31-75"><a href="#cb31-75" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-76"><a href="#cb31-76" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-77"><a href="#cb31-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-78"><a href="#cb31-78" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb31-79"><a href="#cb31-79" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb31-80"><a href="#cb31-80" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb31-81"><a href="#cb31-81" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb31-82"><a href="#cb31-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-83"><a href="#cb31-83" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb31-84"><a href="#cb31-84" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb31-85"><a href="#cb31-85" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb31-86"><a href="#cb31-86" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb31-87"><a href="#cb31-87" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb31-88"><a href="#cb31-88" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb31-89"><a href="#cb31-89" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb31-90"><a href="#cb31-90" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb31-91"><a href="#cb31-91" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb31-92"><a href="#cb31-92" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb31-93"><a href="#cb31-93" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb31-94"><a href="#cb31-94" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb31-95"><a href="#cb31-95" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb31-96"><a href="#cb31-96" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb31-97"><a href="#cb31-97" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb31-98"><a href="#cb31-98" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb31-99"><a href="#cb31-99" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb31-100"><a href="#cb31-100" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb31-101"><a href="#cb31-101" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb31-102"><a href="#cb31-102" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb31-103"><a href="#cb31-103" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb31-104"><a href="#cb31-104" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb31-105"><a href="#cb31-105" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb31-106"><a href="#cb31-106" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb31-107"><a href="#cb31-107" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb31-108"><a href="#cb31-108" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb31-109"><a href="#cb31-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb31-110"><a href="#cb31-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb31-111"><a href="#cb31-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb31-112"><a href="#cb31-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb31-113"><a href="#cb31-113" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb31-114"><a href="#cb31-114" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb31-115"><a href="#cb31-115" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb31-116"><a href="#cb31-116" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-117"><a href="#cb31-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-118"><a href="#cb31-118" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-119"><a href="#cb31-119" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-120"><a href="#cb31-120" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb31-121"><a href="#cb31-121" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb31-122"><a href="#cb31-122" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb31-123"><a href="#cb31-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-124"><a href="#cb31-124" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-125"><a href="#cb31-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-126"><a href="#cb31-126" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb31-127"><a href="#cb31-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-128"><a href="#cb31-128" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb31-129"><a href="#cb31-129" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb31-130"><a href="#cb31-130" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb31-131"><a href="#cb31-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-132"><a href="#cb31-132" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb31-133"><a href="#cb31-133" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb31-134"><a href="#cb31-134" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb31-135"><a href="#cb31-135" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb31-136"><a href="#cb31-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-137"><a href="#cb31-137" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb31-138"><a href="#cb31-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-139"><a href="#cb31-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-140"><a href="#cb31-140" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb31-141"><a href="#cb31-141" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb31-142"><a href="#cb31-142" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb31-143"><a href="#cb31-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2 d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb31-144"><a href="#cb31-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb31-145"><a href="#cb31-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb31-146"><a href="#cb31-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb31-147"><a href="#cb31-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb31-148"><a href="#cb31-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb31-149"><a href="#cb31-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb31-150"><a href="#cb31-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb31-151"><a href="#cb31-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb31-152"><a href="#cb31-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb31-153"><a href="#cb31-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb31-154"><a href="#cb31-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb31-155"><a href="#cb31-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb31-156"><a href="#cb31-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb31-157"><a href="#cb31-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb31-158"><a href="#cb31-158" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb31-159"><a href="#cb31-159" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb31-160"><a href="#cb31-160" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb31-161"><a href="#cb31-161" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb31-162"><a href="#cb31-162" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb31-163"><a href="#cb31-163" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c9=.1</span>
<span id="cb31-164"><a href="#cb31-164" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb31-165"><a href="#cb31-165" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb31-166"><a href="#cb31-166" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb31-167"><a href="#cb31-167" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb31-168"><a href="#cb31-168" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb31-169"><a href="#cb31-169" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb31-170"><a href="#cb31-170" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb31-171"><a href="#cb31-171" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb31-172"><a href="#cb31-172" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb31-173"><a href="#cb31-173" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb31-174"><a href="#cb31-174" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb31-175"><a href="#cb31-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb31-176"><a href="#cb31-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb31-177"><a href="#cb31-177" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb31-178"><a href="#cb31-178" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb31-179"><a href="#cb31-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-180"><a href="#cb31-180" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb31-181"><a href="#cb31-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-182"><a href="#cb31-182" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb31-183"><a href="#cb31-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-184"><a href="#cb31-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-185"><a href="#cb31-185" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb31-186"><a href="#cb31-186" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> ve==1</span>
<span id="cb31-187"><a href="#cb31-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-188"><a href="#cb31-188" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[c8]+_b[b2]+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c<span class="co">/*</span></span>
<span id="cb31-189"><a href="#cb31-189" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c5]*tran_c+_b[c6]*ps_c+_b[c7]*ac_c)</span>
<span id="cb31-190"><a href="#cb31-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-191"><a href="#cb31-191" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_c,<span class="kw">replace</span></span>
<span id="cb31-192"><a href="#cb31-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-193"><a href="#cb31-193" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nvalue=quality*quan_c</span>
<span id="cb31-194"><a href="#cb31-194" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_c), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-195"><a href="#cb31-195" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-196"><a href="#cb31-196" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb31-197"><a href="#cb31-197" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-198"><a href="#cb31-198" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb31-199"><a href="#cb31-199" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb31-200"><a href="#cb31-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-201"><a href="#cb31-201" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb31-202"><a href="#cb31-202" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> ve==2</span>
<span id="cb31-203"><a href="#cb31-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-204"><a href="#cb31-204" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[d8]+_b[b2]+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb31-205"><a href="#cb31-205" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t)</span>
<span id="cb31-206"><a href="#cb31-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-207"><a href="#cb31-207" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_t,<span class="kw">replace</span></span>
<span id="cb31-208"><a href="#cb31-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-209"><a href="#cb31-209" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nvalue=quality*quan_t</span>
<span id="cb31-210"><a href="#cb31-210" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_t),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-211"><a href="#cb31-211" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-212"><a href="#cb31-212" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb31-213"><a href="#cb31-213" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb31-214"><a href="#cb31-214" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb31-215"><a href="#cb31-215" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb31-216"><a href="#cb31-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-217"><a href="#cb31-217" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb31-218"><a href="#cb31-218" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb31-219"><a href="#cb31-219" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_quality.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\unit_quality.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_quality.<span class="fu">log</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:03:32</span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>(45 observations deleted)</span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb32-22"><a href="#cb32-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-23"><a href="#cb32-23" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> quan quan_t</span>
<span id="cb32-24"><a href="#cb32-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-25"><a href="#cb32-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb32-26"><a href="#cb32-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-27"><a href="#cb32-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb32-28"><a href="#cb32-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-29"><a href="#cb32-29" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb32-30"><a href="#cb32-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-31"><a href="#cb32-31" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb32-32"><a href="#cb32-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-33"><a href="#cb32-33" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb32-34"><a href="#cb32-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-35"><a href="#cb32-35" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb32-36"><a href="#cb32-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-37"><a href="#cb32-37" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb32-38"><a href="#cb32-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-39"><a href="#cb32-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb32-40"><a href="#cb32-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-41"><a href="#cb32-41" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-42"><a href="#cb32-42" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb32-43"><a href="#cb32-43" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb32-44"><a href="#cb32-44" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb32-45"><a href="#cb32-45" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb32-46"><a href="#cb32-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-47"><a href="#cb32-47" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-48"><a href="#cb32-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb32-49"><a href="#cb32-49" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb32-50"><a href="#cb32-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-51"><a href="#cb32-51" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="kw">if</span> <span class="fu">year</span>&gt;=86</span>
<span id="cb32-52"><a href="#cb32-52" aria-hidden="true" tabindex="-1"></a>(105 observations deleted)</span>
<span id="cb32-53"><a href="#cb32-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-54"><a href="#cb32-54" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb32-55"><a href="#cb32-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-56"><a href="#cb32-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> quan quan_c</span>
<span id="cb32-57"><a href="#cb32-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-58"><a href="#cb32-58" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb32-59"><a href="#cb32-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-60"><a href="#cb32-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb32-61"><a href="#cb32-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-62"><a href="#cb32-62" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb32-63"><a href="#cb32-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-64"><a href="#cb32-64" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb32-65"><a href="#cb32-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-66"><a href="#cb32-66" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb32-67"><a href="#cb32-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-68"><a href="#cb32-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb32-69"><a href="#cb32-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-70"><a href="#cb32-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb32-71"><a href="#cb32-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-72"><a href="#cb32-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb32-73"><a href="#cb32-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-74"><a href="#cb32-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-75"><a href="#cb32-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb32-76"><a href="#cb32-76" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb32-77"><a href="#cb32-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-78"><a href="#cb32-78" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-79"><a href="#cb32-79" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb32-80"><a href="#cb32-80" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-81"><a href="#cb32-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-82"><a href="#cb32-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb32-83"><a href="#cb32-83" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-84"><a href="#cb32-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-85"><a href="#cb32-85" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb32-86"><a href="#cb32-86" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-87"><a href="#cb32-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-88"><a href="#cb32-88" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb32-89"><a href="#cb32-89" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-90"><a href="#cb32-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-91"><a href="#cb32-91" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb32-92"><a href="#cb32-92" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-93"><a href="#cb32-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-94"><a href="#cb32-94" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb32-95"><a href="#cb32-95" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-96"><a href="#cb32-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-97"><a href="#cb32-97" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb32-98"><a href="#cb32-98" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-99"><a href="#cb32-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-100"><a href="#cb32-100" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb32-101"><a href="#cb32-101" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-102"><a href="#cb32-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-103"><a href="#cb32-103" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb32-104"><a href="#cb32-104" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-105"><a href="#cb32-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-106"><a href="#cb32-106" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb32-107"><a href="#cb32-107" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-108"><a href="#cb32-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-109"><a href="#cb32-109" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb32-110"><a href="#cb32-110" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-111"><a href="#cb32-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-112"><a href="#cb32-112" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb32-113"><a href="#cb32-113" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-114"><a href="#cb32-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-115"><a href="#cb32-115" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb32-116"><a href="#cb32-116" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-117"><a href="#cb32-117" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-118"><a href="#cb32-118" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb32-119"><a href="#cb32-119" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-120"><a href="#cb32-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-121"><a href="#cb32-121" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb32-122"><a href="#cb32-122" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-123"><a href="#cb32-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-124"><a href="#cb32-124" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb32-125"><a href="#cb32-125" aria-hidden="true" tabindex="-1"></a>(179 <span class="fu">real</span> changes made)</span>
<span id="cb32-126"><a href="#cb32-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-127"><a href="#cb32-127" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-128"><a href="#cb32-128" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb32-129"><a href="#cb32-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-130"><a href="#cb32-130" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb32-131"><a href="#cb32-131" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb32-132"><a href="#cb32-132" aria-hidden="true" tabindex="-1"></a>         79 |         31       12.20       12.20</span>
<span id="cb32-133"><a href="#cb32-133" aria-hidden="true" tabindex="-1"></a>         80 |         34       13.39       25.59</span>
<span id="cb32-134"><a href="#cb32-134" aria-hidden="true" tabindex="-1"></a>         81 |         35       13.78       39.37</span>
<span id="cb32-135"><a href="#cb32-135" aria-hidden="true" tabindex="-1"></a>         82 |         35       13.78       53.15</span>
<span id="cb32-136"><a href="#cb32-136" aria-hidden="true" tabindex="-1"></a>         83 |         36       14.17       67.32</span>
<span id="cb32-137"><a href="#cb32-137" aria-hidden="true" tabindex="-1"></a>         84 |         40       15.75       83.07</span>
<span id="cb32-138"><a href="#cb32-138" aria-hidden="true" tabindex="-1"></a>         85 |         43       16.93      100.00</span>
<span id="cb32-139"><a href="#cb32-139" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb32-140"><a href="#cb32-140" aria-hidden="true" tabindex="-1"></a>      Total |        254      100.00</span>
<span id="cb32-141"><a href="#cb32-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-142"><a href="#cb32-142" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-143"><a href="#cb32-143" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb32-144"><a href="#cb32-144" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-145"><a href="#cb32-145" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb32-146"><a href="#cb32-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-147"><a href="#cb32-147" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-148"><a href="#cb32-148" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb32-149"><a href="#cb32-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-150"><a href="#cb32-150" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-151"><a href="#cb32-151" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-152"><a href="#cb32-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-153"><a href="#cb32-153" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-154"><a href="#cb32-154" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb32-155"><a href="#cb32-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-156"><a href="#cb32-156" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb32-157"><a href="#cb32-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-158"><a href="#cb32-158" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-159"><a href="#cb32-159" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb32-160"><a href="#cb32-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-161"><a href="#cb32-161" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-162"><a href="#cb32-162" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-163"><a href="#cb32-163" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-164"><a href="#cb32-164" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-165"><a href="#cb32-165" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb32-166"><a href="#cb32-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-167"><a href="#cb32-167" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb32-168"><a href="#cb32-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-169"><a href="#cb32-169" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-170"><a href="#cb32-170" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb32-171"><a href="#cb32-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-172"><a href="#cb32-172" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-173"><a href="#cb32-173" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb32-174"><a href="#cb32-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-175"><a href="#cb32-175" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-176"><a href="#cb32-176" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb32-177"><a href="#cb32-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-178"><a href="#cb32-178" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb32-179"><a href="#cb32-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-180"><a href="#cb32-180" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-181"><a href="#cb32-181" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-182"><a href="#cb32-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-183"><a href="#cb32-183" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-184"><a href="#cb32-184" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb32-185"><a href="#cb32-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-186"><a href="#cb32-186" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-187"><a href="#cb32-187" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb32-188"><a href="#cb32-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-189"><a href="#cb32-189" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb32-190"><a href="#cb32-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-191"><a href="#cb32-191" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-192"><a href="#cb32-192" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-193"><a href="#cb32-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-194"><a href="#cb32-194" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-195"><a href="#cb32-195" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb32-196"><a href="#cb32-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-197"><a href="#cb32-197" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-198"><a href="#cb32-198" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb32-199"><a href="#cb32-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-200"><a href="#cb32-200" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb32-201"><a href="#cb32-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-202"><a href="#cb32-202" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb32-203"><a href="#cb32-203" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb32-204"><a href="#cb32-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-205"><a href="#cb32-205" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb32-206"><a href="#cb32-206" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb32-207"><a href="#cb32-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-208"><a href="#cb32-208" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-209"><a href="#cb32-209" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb32-210"><a href="#cb32-210" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb32-211"><a href="#cb32-211" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb32-212"><a href="#cb32-212" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb32-213"><a href="#cb32-213" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb32-214"><a href="#cb32-214" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb32-215"><a href="#cb32-215" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb32-216"><a href="#cb32-216" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb32-217"><a href="#cb32-217" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb32-218"><a href="#cb32-218" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb32-219"><a href="#cb32-219" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb32-220"><a href="#cb32-220" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb32-221"><a href="#cb32-221" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb32-222"><a href="#cb32-222" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb32-223"><a href="#cb32-223" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb32-224"><a href="#cb32-224" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb32-225"><a href="#cb32-225" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb32-226"><a href="#cb32-226" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb32-227"><a href="#cb32-227" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb32-228"><a href="#cb32-228" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb32-229"><a href="#cb32-229" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb32-230"><a href="#cb32-230" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb32-231"><a href="#cb32-231" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb32-232"><a href="#cb32-232" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb32-233"><a href="#cb32-233" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb32-234"><a href="#cb32-234" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb32-235"><a href="#cb32-235" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb32-236"><a href="#cb32-236" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb32-237"><a href="#cb32-237" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb32-238"><a href="#cb32-238" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb32-239"><a href="#cb32-239" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb32-240"><a href="#cb32-240" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb32-241"><a href="#cb32-241" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb32-242"><a href="#cb32-242" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb32-243"><a href="#cb32-243" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb32-244"><a href="#cb32-244" aria-hidden="true" tabindex="-1"></a> 34. </span>
<span id="cb32-245"><a href="#cb32-245" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-246"><a href="#cb32-246" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-247"><a href="#cb32-247" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb32-248"><a href="#cb32-248" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)*tyd6</span>
<span id="cb32-249"><a href="#cb32-249" aria-hidden="true" tabindex="-1"></a>&gt; +<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb32-250"><a href="#cb32-250" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb32-251"><a href="#cb32-251" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb32-252"><a href="#cb32-252" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb32-253"><a href="#cb32-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-254"><a href="#cb32-254" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-255"><a href="#cb32-255" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb32-256"><a href="#cb32-256" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb32-257"><a href="#cb32-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-258"><a href="#cb32-258" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  1.51e+10</span>
<span id="cb32-259"><a href="#cb32-259" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb32-260"><a href="#cb32-260" aria-hidden="true" tabindex="-1"></a>Iteration 24:  residual SS =  1.01e+08</span>
<span id="cb32-261"><a href="#cb32-261" aria-hidden="true" tabindex="-1"></a>Iteration 25:  residual SS =  1.01e+08</span>
<span id="cb32-262"><a href="#cb32-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-263"><a href="#cb32-263" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb32-264"><a href="#cb32-264" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =   1210.09</span>
<span id="cb32-265"><a href="#cb32-265" aria-hidden="true" tabindex="-1"></a>       Model |  1.5069e+10    28   538194036         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb32-266"><a href="#cb32-266" aria-hidden="true" tabindex="-1"></a>    Residual |   100515047   226  444756.844         R-squared     =    0.9934</span>
<span id="cb32-267"><a href="#cb32-267" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9926</span>
<span id="cb32-268"><a href="#cb32-268" aria-hidden="true" tabindex="-1"></a>       Total |  1.5170e+10   254  59724204.9         Root MSE      =  666.9009</span>
<span id="cb32-269"><a href="#cb32-269" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  3994.496</span>
<span id="cb32-270"><a href="#cb32-270" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb32-271"><a href="#cb32-271" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-272"><a href="#cb32-272" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb32-273"><a href="#cb32-273" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb32-274"><a href="#cb32-274" aria-hidden="true" tabindex="-1"></a>          a3 |   254.0918   317.1045     0.80   0.424    -370.7678    878.9513</span>
<span id="cb32-275"><a href="#cb32-275" aria-hidden="true" tabindex="-1"></a>          a4 |   505.1058   325.6388     1.55   0.122    -136.5708    1146.782</span>
<span id="cb32-276"><a href="#cb32-276" aria-hidden="true" tabindex="-1"></a>          a5 |   708.9466   317.3172     2.23   0.026       83.668    1334.225</span>
<span id="cb32-277"><a href="#cb32-277" aria-hidden="true" tabindex="-1"></a>          a6 |   1082.054   322.4415     3.36   0.001     446.6773     1717.43</span>
<span id="cb32-278"><a href="#cb32-278" aria-hidden="true" tabindex="-1"></a>          a7 |   1063.014   373.9703     2.84   0.005     326.0995    1799.929</span>
<span id="cb32-279"><a href="#cb32-279" aria-hidden="true" tabindex="-1"></a>          b2 |   .0040633   .0329008     0.12   0.902    -.0607683    .0688948</span>
<span id="cb32-280"><a href="#cb32-280" aria-hidden="true" tabindex="-1"></a>          b3 |   .0756038    .049061     1.54   0.125    -.0210716    .1722792</span>
<span id="cb32-281"><a href="#cb32-281" aria-hidden="true" tabindex="-1"></a>          b4 |   .0828575   .0490467     1.69   0.093    -.0137897    .1795048</span>
<span id="cb32-282"><a href="#cb32-282" aria-hidden="true" tabindex="-1"></a>          b5 |   .0327776    .050707     0.65   0.519    -.0671415    .1326967</span>
<span id="cb32-283"><a href="#cb32-283" aria-hidden="true" tabindex="-1"></a>          b6 |   .0351224   .0514768     0.68   0.496    -.0663135    .1365582</span>
<span id="cb32-284"><a href="#cb32-284" aria-hidden="true" tabindex="-1"></a>          b7 |   .0825554   .0557608     1.48   0.140    -.0273221    .1924329</span>
<span id="cb32-285"><a href="#cb32-285" aria-hidden="true" tabindex="-1"></a>          c1 |   .0326037   .1117298     0.29   0.771    -.1875618    .2527691</span>
<span id="cb32-286"><a href="#cb32-286" aria-hidden="true" tabindex="-1"></a>          c2 |    .385946   .1204171     3.21   0.002     .1486621    .6232299</span>
<span id="cb32-287"><a href="#cb32-287" aria-hidden="true" tabindex="-1"></a>          c3 |  -.1929238   .0568197    -3.40   0.001     -.304888   -.0809596</span>
<span id="cb32-288"><a href="#cb32-288" aria-hidden="true" tabindex="-1"></a>          c4 |    .715212   .0736084     9.72   0.000     .5701655    .8602585</span>
<span id="cb32-289"><a href="#cb32-289" aria-hidden="true" tabindex="-1"></a>          c5 |   .1578585     .03381     4.67   0.000     .0912354    .2244816</span>
<span id="cb32-290"><a href="#cb32-290" aria-hidden="true" tabindex="-1"></a>          c6 |   .0641097   .0247061     2.59   0.010     .0154259    .1127934</span>
<span id="cb32-291"><a href="#cb32-291" aria-hidden="true" tabindex="-1"></a>          c7 |   .1829447   .0242773     7.54   0.000     .1351059    .2307836</span>
<span id="cb32-292"><a href="#cb32-292" aria-hidden="true" tabindex="-1"></a>          c8 |   6.599831   .7305317     9.03   0.000     5.160306    8.039356</span>
<span id="cb32-293"><a href="#cb32-293" aria-hidden="true" tabindex="-1"></a>          c9 |   .1171992   .0634238     1.85   0.066    -.0077785    .2421769</span>
<span id="cb32-294"><a href="#cb32-294" aria-hidden="true" tabindex="-1"></a>          d1 |   .4917133   .0795807     6.18   0.000     .3348983    .6485283</span>
<span id="cb32-295"><a href="#cb32-295" aria-hidden="true" tabindex="-1"></a>          d2 |   .2622177   .1757206     1.49   0.137    -.0840426    .6084779</span>
<span id="cb32-296"><a href="#cb32-296" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0451278   .0677055    -0.67   0.506    -.1785426     .088287</span>
<span id="cb32-297"><a href="#cb32-297" aria-hidden="true" tabindex="-1"></a>          d4 |   .3030767   .1701249     1.78   0.076    -.0321571    .6383106</span>
<span id="cb32-298"><a href="#cb32-298" aria-hidden="true" tabindex="-1"></a>          d5 |   .0397822   .0362731     1.10   0.274    -.0316947     .111259</span>
<span id="cb32-299"><a href="#cb32-299" aria-hidden="true" tabindex="-1"></a>          d6 |   .0967659   .0501832     1.93   0.055    -.0021208    .1956526</span>
<span id="cb32-300"><a href="#cb32-300" aria-hidden="true" tabindex="-1"></a>          d7 |   .3052359   .0715711     4.26   0.000     .1642038     .446268</span>
<span id="cb32-301"><a href="#cb32-301" aria-hidden="true" tabindex="-1"></a>          d8 |   6.299805   .9622249     6.55   0.000     4.403726    8.195885</span>
<span id="cb32-302"><a href="#cb32-302" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-303"><a href="#cb32-303" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb32-304"><a href="#cb32-304" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-305"><a href="#cb32-305" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-306"><a href="#cb32-306" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb32-307"><a href="#cb32-307" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb32-308"><a href="#cb32-308" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb32-309"><a href="#cb32-309" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb32-310"><a href="#cb32-310" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb32-311"><a href="#cb32-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-312"><a href="#cb32-312" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-313"><a href="#cb32-313" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>((_b[b2]+0.16)*tyd2+(_b[b3]+.16)*tyd3+(_b[b4]+.16)*tyd4<span class="co">/*</span></span>
<span id="cb32-314"><a href="#cb32-314" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+(_b[b5]+.16)*tyd5+(_b[b6]+.16)*tyd6+_b[c9]*tyd7<span class="co">/*</span></span>
<span id="cb32-315"><a href="#cb32-315" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb32-316"><a href="#cb32-316" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb32-317"><a href="#cb32-317" aria-hidden="true" tabindex="-1"></a>(75 <span class="fu">real</span> changes made)</span>
<span id="cb32-318"><a href="#cb32-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-319"><a href="#cb32-319" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-320"><a href="#cb32-320" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb32-321"><a href="#cb32-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-322"><a href="#cb32-322" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-323"><a href="#cb32-323" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-324"><a href="#cb32-324" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb32-325"><a href="#cb32-325" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb32-326"><a href="#cb32-326" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb32-327"><a href="#cb32-327" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 b2 b3 b4 b5 b6 b7 c1 c2 c3 c4 c5 c6 c7 c8 c9 d1 d2</span></span>
<span id="cb32-328"><a href="#cb32-328" aria-hidden="true" tabindex="-1"></a><span class="st">&gt;  d3 d4 d5 d6 d7 d8"</span></span>
<span id="cb32-329"><a href="#cb32-329" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb32-330"><a href="#cb32-330" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb32-331"><a href="#cb32-331" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb32-332"><a href="#cb32-332" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb32-333"><a href="#cb32-333" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb32-334"><a href="#cb32-334" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> b2=.1</span>
<span id="cb32-335"><a href="#cb32-335" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> b3=.1</span>
<span id="cb32-336"><a href="#cb32-336" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> b4=.1</span>
<span id="cb32-337"><a href="#cb32-337" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> b5=.1</span>
<span id="cb32-338"><a href="#cb32-338" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> b6=.1</span>
<span id="cb32-339"><a href="#cb32-339" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b7=.1</span>
<span id="cb32-340"><a href="#cb32-340" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> c1=.1</span>
<span id="cb32-341"><a href="#cb32-341" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> c2=.1</span>
<span id="cb32-342"><a href="#cb32-342" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> c3=.1</span>
<span id="cb32-343"><a href="#cb32-343" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> c4=.1</span>
<span id="cb32-344"><a href="#cb32-344" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> c5=.1</span>
<span id="cb32-345"><a href="#cb32-345" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> c6=.1</span>
<span id="cb32-346"><a href="#cb32-346" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> c7=.1</span>
<span id="cb32-347"><a href="#cb32-347" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> c8=.1</span>
<span id="cb32-348"><a href="#cb32-348" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> c9=.1</span>
<span id="cb32-349"><a href="#cb32-349" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> d1=.1</span>
<span id="cb32-350"><a href="#cb32-350" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> d2=.1</span>
<span id="cb32-351"><a href="#cb32-351" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> d3=.1</span>
<span id="cb32-352"><a href="#cb32-352" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> d4=.1</span>
<span id="cb32-353"><a href="#cb32-353" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> d5=.1</span>
<span id="cb32-354"><a href="#cb32-354" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> d6=.1</span>
<span id="cb32-355"><a href="#cb32-355" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> d7=.1</span>
<span id="cb32-356"><a href="#cb32-356" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> d8=.1</span>
<span id="cb32-357"><a href="#cb32-357" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">exit</span></span>
<span id="cb32-358"><a href="#cb32-358" aria-hidden="true" tabindex="-1"></a> 33. }</span>
<span id="cb32-359"><a href="#cb32-359" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7)<span class="co">/*</span></span>
<span id="cb32-360"><a href="#cb32-360" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb32-361"><a href="#cb32-361" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb32-362"><a href="#cb32-362" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*tyd2+(<span class="ot">$b3</span>+.16)*tyd3+(<span class="ot">$b4</span>+.16)*tyd4+(<span class="ot">$b5</span>+.16)*tyd5+(<span class="ot">$b6</span>+.16)</span>
<span id="cb32-363"><a href="#cb32-363" aria-hidden="true" tabindex="-1"></a>&gt; *tyd6+<span class="ot">$c9</span>*tyd7<span class="co">/*</span></span>
<span id="cb32-364"><a href="#cb32-364" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb32-365"><a href="#cb32-365" aria-hidden="true" tabindex="-1"></a> 35. </span>
<span id="cb32-366"><a href="#cb32-366" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb32-367"><a href="#cb32-367" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-368"><a href="#cb32-368" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-369"><a href="#cb32-369" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb32-370"><a href="#cb32-370" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 254)</span>
<span id="cb32-371"><a href="#cb32-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-372"><a href="#cb32-372" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  353.5865</span>
<span id="cb32-373"><a href="#cb32-373" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb32-374"><a href="#cb32-374" aria-hidden="true" tabindex="-1"></a>Iteration 20:  residual SS =  2.957295</span>
<span id="cb32-375"><a href="#cb32-375" aria-hidden="true" tabindex="-1"></a>Iteration 21:  residual SS =  2.957295</span>
<span id="cb32-376"><a href="#cb32-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-377"><a href="#cb32-377" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       254</span>
<span id="cb32-378"><a href="#cb32-378" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 28,   226) =    958.75</span>
<span id="cb32-379"><a href="#cb32-379" aria-hidden="true" tabindex="-1"></a>       Model |  351.277591    28  12.5456282         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb32-380"><a href="#cb32-380" aria-hidden="true" tabindex="-1"></a>    Residual |  2.95729549   226  .013085378         R-squared     =    0.9917</span>
<span id="cb32-381"><a href="#cb32-381" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9906</span>
<span id="cb32-382"><a href="#cb32-382" aria-hidden="true" tabindex="-1"></a>       Total |  354.234886   254  1.39462554         Root MSE      =  .1143913</span>
<span id="cb32-383"><a href="#cb32-383" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -410.2562</span>
<span id="cb32-384"><a href="#cb32-384" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb32-385"><a href="#cb32-385" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-386"><a href="#cb32-386" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb32-387"><a href="#cb32-387" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb32-388"><a href="#cb32-388" aria-hidden="true" tabindex="-1"></a>          a3 |   367.9829    239.059     1.54   0.125    -103.0867    839.0525</span>
<span id="cb32-389"><a href="#cb32-389" aria-hidden="true" tabindex="-1"></a>          a4 |    600.553   254.2261     2.36   0.019     99.59628     1101.51</span>
<span id="cb32-390"><a href="#cb32-390" aria-hidden="true" tabindex="-1"></a>          a5 |   887.9399   243.5428     3.65   0.000     408.0348    1367.845</span>
<span id="cb32-391"><a href="#cb32-391" aria-hidden="true" tabindex="-1"></a>          a6 |   1104.433   251.0245     4.40   0.000     609.7847     1599.08</span>
<span id="cb32-392"><a href="#cb32-392" aria-hidden="true" tabindex="-1"></a>          a7 |   855.7993   366.2444     2.34   0.020     134.1088     1577.49</span>
<span id="cb32-393"><a href="#cb32-393" aria-hidden="true" tabindex="-1"></a>          b2 |   .0130387   .0303131     0.43   0.668    -.0466937    .0727711</span>
<span id="cb32-394"><a href="#cb32-394" aria-hidden="true" tabindex="-1"></a>          b3 |   .0674477   .0425176     1.59   0.114     -.016334    .1512294</span>
<span id="cb32-395"><a href="#cb32-395" aria-hidden="true" tabindex="-1"></a>          b4 |   .0701234   .0441821     1.59   0.114    -.0169382     .157185</span>
<span id="cb32-396"><a href="#cb32-396" aria-hidden="true" tabindex="-1"></a>          b5 |  -.0005627   .0470779    -0.01   0.990    -.0933305    .0922051</span>
<span id="cb32-397"><a href="#cb32-397" aria-hidden="true" tabindex="-1"></a>          b6 |   .0179989   .0473905     0.38   0.704    -.0753848    .1113826</span>
<span id="cb32-398"><a href="#cb32-398" aria-hidden="true" tabindex="-1"></a>          b7 |   .1007712   .0641587     1.57   0.118    -.0256545    .2271969</span>
<span id="cb32-399"><a href="#cb32-399" aria-hidden="true" tabindex="-1"></a>          c1 |   .0492474   .1311096     0.38   0.708    -.2091061     .307601</span>
<span id="cb32-400"><a href="#cb32-400" aria-hidden="true" tabindex="-1"></a>          c2 |   .3908689   .1383663     2.82   0.005     .1182159     .663522</span>
<span id="cb32-401"><a href="#cb32-401" aria-hidden="true" tabindex="-1"></a>          c3 |  -.0618204   .0611492    -1.01   0.313    -.1823158     .058675</span>
<span id="cb32-402"><a href="#cb32-402" aria-hidden="true" tabindex="-1"></a>          c4 |   .8103277   .1038045     7.81   0.000     .6057792    1.014876</span>
<span id="cb32-403"><a href="#cb32-403" aria-hidden="true" tabindex="-1"></a>          c5 |   .1779391   .0355273     5.01   0.000     .1079319    .2479463</span>
<span id="cb32-404"><a href="#cb32-404" aria-hidden="true" tabindex="-1"></a>          c6 |   .0693687   .0304968     2.27   0.024     .0092743     .129463</span>
<span id="cb32-405"><a href="#cb32-405" aria-hidden="true" tabindex="-1"></a>          c7 |   .1567051   .0360384     4.35   0.000     .0856908    .2277193</span>
<span id="cb32-406"><a href="#cb32-406" aria-hidden="true" tabindex="-1"></a>          c8 |   5.839036   .8621144     6.77   0.000     4.140226    7.537847</span>
<span id="cb32-407"><a href="#cb32-407" aria-hidden="true" tabindex="-1"></a>          c9 |   .1059852   .0550545     1.93   0.055    -.0025007    .2144711</span>
<span id="cb32-408"><a href="#cb32-408" aria-hidden="true" tabindex="-1"></a>          d1 |   .4759918   .1172145     4.06   0.000     .2450187    .7069649</span>
<span id="cb32-409"><a href="#cb32-409" aria-hidden="true" tabindex="-1"></a>          d2 |   .2120021   .1419991     1.49   0.137    -.0678094    .4918136</span>
<span id="cb32-410"><a href="#cb32-410" aria-hidden="true" tabindex="-1"></a>          d3 |  -.0270369    .074052    -0.37   0.715    -.1729575    .1188837</span>
<span id="cb32-411"><a href="#cb32-411" aria-hidden="true" tabindex="-1"></a>          d4 |     .24435   .1516866     1.61   0.109    -.0545508    .5432508</span>
<span id="cb32-412"><a href="#cb32-412" aria-hidden="true" tabindex="-1"></a>          d5 |   .0530065   .0356148     1.49   0.138     -.017173     .123186</span>
<span id="cb32-413"><a href="#cb32-413" aria-hidden="true" tabindex="-1"></a>          d6 |   .0575178   .0639555     0.90   0.369    -.0685076    .1835431</span>
<span id="cb32-414"><a href="#cb32-414" aria-hidden="true" tabindex="-1"></a>          d7 |   .2971909   .0566882     5.24   0.000      .185486    .4088959</span>
<span id="cb32-415"><a href="#cb32-415" aria-hidden="true" tabindex="-1"></a>          d8 |   6.630805   .7652819     8.66   0.000     5.122804    8.138805</span>
<span id="cb32-416"><a href="#cb32-416" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb32-417"><a href="#cb32-417" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb32-418"><a href="#cb32-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-419"><a href="#cb32-419" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-420"><a href="#cb32-420" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-421"><a href="#cb32-421" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb32-422"><a href="#cb32-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-423"><a href="#cb32-423" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> ve==1</span>
<span id="cb32-424"><a href="#cb32-424" aria-hidden="true" tabindex="-1"></a>(75 observations deleted)</span>
<span id="cb32-425"><a href="#cb32-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-426"><a href="#cb32-426" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-427"><a href="#cb32-427" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[c8]+_b[b2]+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*<span class="kw">h</span></span>
<span id="cb32-428"><a href="#cb32-428" aria-hidden="true" tabindex="-1"></a>&gt; p_c<span class="co">/*</span></span>
<span id="cb32-429"><a href="#cb32-429" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c5]*tran_c+_b[c6]*ps_c+_b[c7]*ac_c)</span>
<span id="cb32-430"><a href="#cb32-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-431"><a href="#cb32-431" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-432"><a href="#cb32-432" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb32-433"><a href="#cb32-433" aria-hidden="true" tabindex="-1"></a>&gt; uality_c,<span class="kw">replace</span></span>
<span id="cb32-434"><a href="#cb32-434" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb32-435"><a href="#cb32-435" aria-hidden="true" tabindex="-1"></a>&gt; lity_c.dta saved</span>
<span id="cb32-436"><a href="#cb32-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-437"><a href="#cb32-437" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-438"><a href="#cb32-438" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nvalue=quality*quan_c</span>
<span id="cb32-439"><a href="#cb32-439" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-440"><a href="#cb32-440" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_c), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-441"><a href="#cb32-441" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-442"><a href="#cb32-442" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-443"><a href="#cb32-443" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-444"><a href="#cb32-444" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb32-445"><a href="#cb32-445" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-446"><a href="#cb32-446" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-447"><a href="#cb32-447" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-448"><a href="#cb32-448" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb32-449"><a href="#cb32-449" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-450"><a href="#cb32-450" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb32-451"><a href="#cb32-451" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>   uquality |</span>
<span id="cb32-452"><a href="#cb32-452" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb32-453"><a href="#cb32-453" aria-hidden="true" tabindex="-1"></a>  1. |   79   4360.772 |</span>
<span id="cb32-454"><a href="#cb32-454" aria-hidden="true" tabindex="-1"></a>  2. |   80   4472.789 |</span>
<span id="cb32-455"><a href="#cb32-455" aria-hidden="true" tabindex="-1"></a>  3. |   81   4867.316 |</span>
<span id="cb32-456"><a href="#cb32-456" aria-hidden="true" tabindex="-1"></a>  4. |   82   5252.845 |</span>
<span id="cb32-457"><a href="#cb32-457" aria-hidden="true" tabindex="-1"></a>  5. |   83   5636.667 |</span>
<span id="cb32-458"><a href="#cb32-458" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb32-459"><a href="#cb32-459" aria-hidden="true" tabindex="-1"></a>  6. |   84    5862.13 |</span>
<span id="cb32-460"><a href="#cb32-460" aria-hidden="true" tabindex="-1"></a>  7. |   85   6130.052 |</span>
<span id="cb32-461"><a href="#cb32-461" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb32-462"><a href="#cb32-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-463"><a href="#cb32-463" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb32-464"><a href="#cb32-464" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-465"><a href="#cb32-465" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-466"><a href="#cb32-466" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb32-467"><a href="#cb32-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-468"><a href="#cb32-468" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> ve==2</span>
<span id="cb32-469"><a href="#cb32-469" aria-hidden="true" tabindex="-1"></a>(179 observations deleted)</span>
<span id="cb32-470"><a href="#cb32-470" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-471"><a href="#cb32-471" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-472"><a href="#cb32-472" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> quality=<span class="fu">exp</span>(_b[d8]+_b[b2]+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*<span class="kw">h</span></span>
<span id="cb32-473"><a href="#cb32-473" aria-hidden="true" tabindex="-1"></a>&gt; p_t<span class="co">/*</span></span>
<span id="cb32-474"><a href="#cb32-474" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t)</span>
<span id="cb32-475"><a href="#cb32-475" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-476"><a href="#cb32-476" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-477"><a href="#cb32-477" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb32-478"><a href="#cb32-478" aria-hidden="true" tabindex="-1"></a>&gt; uality_t,<span class="kw">replace</span></span>
<span id="cb32-479"><a href="#cb32-479" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb32-480"><a href="#cb32-480" aria-hidden="true" tabindex="-1"></a>&gt; lity_t.dta saved</span>
<span id="cb32-481"><a href="#cb32-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-482"><a href="#cb32-482" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-483"><a href="#cb32-483" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nvalue=quality*quan_t</span>
<span id="cb32-484"><a href="#cb32-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-485"><a href="#cb32-485" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> aquan=<span class="kw">mean</span>(quan_t),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-486"><a href="#cb32-486" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-487"><a href="#cb32-487" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> anvalue=<span class="kw">mean</span>(nvalue), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-488"><a href="#cb32-488" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-489"><a href="#cb32-489" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> uquality=anvalue/aquan</span>
<span id="cb32-490"><a href="#cb32-490" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-491"><a href="#cb32-491" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>)uquality, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb32-492"><a href="#cb32-492" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-493"><a href="#cb32-493" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb32-494"><a href="#cb32-494" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-495"><a href="#cb32-495" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb32-496"><a href="#cb32-496" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>   uquality |</span>
<span id="cb32-497"><a href="#cb32-497" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb32-498"><a href="#cb32-498" aria-hidden="true" tabindex="-1"></a>  1. |   79   4626.836 |</span>
<span id="cb32-499"><a href="#cb32-499" aria-hidden="true" tabindex="-1"></a>  2. |   80   4637.583 |</span>
<span id="cb32-500"><a href="#cb32-500" aria-hidden="true" tabindex="-1"></a>  3. |   81   4791.255 |</span>
<span id="cb32-501"><a href="#cb32-501" aria-hidden="true" tabindex="-1"></a>  4. |   82   4929.792 |</span>
<span id="cb32-502"><a href="#cb32-502" aria-hidden="true" tabindex="-1"></a>  5. |   83   4997.103 |</span>
<span id="cb32-503"><a href="#cb32-503" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb32-504"><a href="#cb32-504" aria-hidden="true" tabindex="-1"></a>  6. |   84   5009.971 |</span>
<span id="cb32-505"><a href="#cb32-505" aria-hidden="true" tabindex="-1"></a>  7. |   85   5432.772 |</span>
<span id="cb32-506"><a href="#cb32-506" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb32-507"><a href="#cb32-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-508"><a href="#cb32-508" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb32-509"><a href="#cb32-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-510"><a href="#cb32-510" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb32-511"><a href="#cb32-511" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb32-512"><a href="#cb32-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-513"><a href="#cb32-513" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb32-514"><a href="#cb32-514" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb32-515"><a href="#cb32-515" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb32-516"><a href="#cb32-516" aria-hidden="true" tabindex="-1"></a>&gt; er-8\unit_quality.<span class="fu">log</span></span>
<span id="cb32-517"><a href="#cb32-517" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb32-518"><a href="#cb32-518" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:03:38</span>
<span id="cb32-519"><a href="#cb32-519" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb32-520"><a href="#cb32-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-521"><a href="#cb32-521" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb32-522"><a href="#cb32-522" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-523"><a href="#cb32-523" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="qindex_c.do" class="level4">
<h4 class="anchored" data-anchor-id="qindex_c.do">qindex_c.do</h4>
<div class="sourceCode" id="cb33"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="kw">clear</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_c,<span class="kw">clear</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_c</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan_c quan</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="kw">preserve</span></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quality quality_80</span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a><span class="kw">ren</span> quan quan_80</span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_80_c,<span class="kw">replace</span></span>
<span id="cb33-16"><a href="#cb33-16" aria-hidden="true" tabindex="-1"></a><span class="kw">restore</span></span>
<span id="cb33-17"><a href="#cb33-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-18"><a href="#cb33-18" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb33-19"><a href="#cb33-19" aria-hidden="true" tabindex="-1"></a><span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\quality_80_c</span>
<span id="cb33-20"><a href="#cb33-20" aria-hidden="true" tabindex="-1"></a><span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb33-21"><a href="#cb33-21" aria-hidden="true" tabindex="-1"></a><span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb33-22"><a href="#cb33-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-23"><a href="#cb33-23" aria-hidden="true" tabindex="-1"></a><span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb33-24"><a href="#cb33-24" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb33-25"><a href="#cb33-25" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb33-26"><a href="#cb33-26" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb33-27"><a href="#cb33-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-28"><a href="#cb33-28" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb33-29"><a href="#cb33-29" aria-hidden="true" tabindex="-1"></a><span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb33-30"><a href="#cb33-30" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb33-31"><a href="#cb33-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-32"><a href="#cb33-32" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb33-33"><a href="#cb33-33" aria-hidden="true" tabindex="-1"></a><span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb33-34"><a href="#cb33-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-35"><a href="#cb33-35" aria-hidden="true" tabindex="-1"></a><span class="ot">list</span></span>
<span id="cb33-36"><a href="#cb33-36" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_c.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_c.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_c.<span class="fu">log</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:06:51</span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-16"><a href="#cb34-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-17"><a href="#cb34-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qu</span>
<span id="cb34-18"><a href="#cb34-18" aria-hidden="true" tabindex="-1"></a>&gt; ality_c,<span class="kw">clear</span></span>
<span id="cb34-19"><a href="#cb34-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-20"><a href="#cb34-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_c</span>
<span id="cb34-21"><a href="#cb34-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-22"><a href="#cb34-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan_c quan</span>
<span id="cb34-23"><a href="#cb34-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-24"><a href="#cb34-24" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-25"><a href="#cb34-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb34-26"><a href="#cb34-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-27"><a href="#cb34-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb34-28"><a href="#cb34-28" aria-hidden="true" tabindex="-1"></a>(155 observations deleted)</span>
<span id="cb34-29"><a href="#cb34-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-30"><a href="#cb34-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb34-31"><a href="#cb34-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-32"><a href="#cb34-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quality quality_80</span>
<span id="cb34-33"><a href="#cb34-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-34"><a href="#cb34-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb34-35"><a href="#cb34-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-36"><a href="#cb34-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb34-37"><a href="#cb34-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-38"><a href="#cb34-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb34-39"><a href="#cb34-39" aria-hidden="true" tabindex="-1"></a>&gt; uality_80_c,<span class="kw">replace</span></span>
<span id="cb34-40"><a href="#cb34-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb34-41"><a href="#cb34-41" aria-hidden="true" tabindex="-1"></a>&gt; lity_80_c.dta saved</span>
<span id="cb34-42"><a href="#cb34-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-43"><a href="#cb34-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb34-44"><a href="#cb34-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-45"><a href="#cb34-45" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-46"><a href="#cb34-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb34-47"><a href="#cb34-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-48"><a href="#cb34-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb34-49"><a href="#cb34-49" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\quality_80_c</span>
<span id="cb34-50"><a href="#cb34-50" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb34-51"><a href="#cb34-51" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb34-52"><a href="#cb34-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-53"><a href="#cb34-53" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb34-54"><a href="#cb34-54" aria-hidden="true" tabindex="-1"></a>(23 observations deleted)</span>
<span id="cb34-55"><a href="#cb34-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-56"><a href="#cb34-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb34-57"><a href="#cb34-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-58"><a href="#cb34-58" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-59"><a href="#cb34-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb34-60"><a href="#cb34-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-61"><a href="#cb34-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb34-62"><a href="#cb34-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-63"><a href="#cb34-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb34-64"><a href="#cb34-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-65"><a href="#cb34-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb34-66"><a href="#cb34-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-67"><a href="#cb34-67" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-68"><a href="#cb34-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb34-69"><a href="#cb34-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-70"><a href="#cb34-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb34-71"><a href="#cb34-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-72"><a href="#cb34-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb34-73"><a href="#cb34-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-74"><a href="#cb34-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-75"><a href="#cb34-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb34-76"><a href="#cb34-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-77"><a href="#cb34-77" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb34-78"><a href="#cb34-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-79"><a href="#cb34-79" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-80"><a href="#cb34-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb34-81"><a href="#cb34-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-82"><a href="#cb34-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb34-83"><a href="#cb34-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     qindex |</span>
<span id="cb34-84"><a href="#cb34-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb34-85"><a href="#cb34-85" aria-hidden="true" tabindex="-1"></a>  1. |   79    .986878 |</span>
<span id="cb34-86"><a href="#cb34-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb34-87"><a href="#cb34-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.085813 |</span>
<span id="cb34-88"><a href="#cb34-88" aria-hidden="true" tabindex="-1"></a>  4. |   82    1.15183 |</span>
<span id="cb34-89"><a href="#cb34-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.212675 |</span>
<span id="cb34-90"><a href="#cb34-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb34-91"><a href="#cb34-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.266379 |</span>
<span id="cb34-92"><a href="#cb34-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.305744 |</span>
<span id="cb34-93"><a href="#cb34-93" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb34-94"><a href="#cb34-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-95"><a href="#cb34-95" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb34-96"><a href="#cb34-96" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb34-97"><a href="#cb34-97" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb34-98"><a href="#cb34-98" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_c.<span class="fu">log</span></span>
<span id="cb34-99"><a href="#cb34-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb34-100"><a href="#cb34-100" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:06:53</span>
<span id="cb34-101"><a href="#cb34-101" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb34-102"><a href="#cb34-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-103"><a href="#cb34-103" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb34-104"><a href="#cb34-104" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="qindex_t.do" class="level4">
<h4 class="anchored" data-anchor-id="qindex_t.do">qindex_t.do</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>. <span class="kw">clear</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_t.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\qindex_t.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_t.<span class="fu">log</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb35-14"><a href="#cb35-14" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  19 Jun 2024, 23:09:00</span>
<span id="cb35-15"><a href="#cb35-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-16"><a href="#cb35-16" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-17"><a href="#cb35-17" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qu</span>
<span id="cb35-18"><a href="#cb35-18" aria-hidden="true" tabindex="-1"></a>&gt; ality_t,<span class="kw">clear</span></span>
<span id="cb35-19"><a href="#cb35-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-20"><a href="#cb35-20" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="fu">year</span> <span class="kw">model</span> <span class="dv">type</span> quality quan_t</span>
<span id="cb35-21"><a href="#cb35-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-22"><a href="#cb35-22" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan_t quan</span>
<span id="cb35-23"><a href="#cb35-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-24"><a href="#cb35-24" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-25"><a href="#cb35-25" aria-hidden="true" tabindex="-1"></a>. <span class="kw">preserve</span></span>
<span id="cb35-26"><a href="#cb35-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-27"><a href="#cb35-27" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="fu">year</span>==80</span>
<span id="cb35-28"><a href="#cb35-28" aria-hidden="true" tabindex="-1"></a>(65 observations deleted)</span>
<span id="cb35-29"><a href="#cb35-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-30"><a href="#cb35-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">model</span> <span class="dv">type</span> quality quan</span>
<span id="cb35-31"><a href="#cb35-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-32"><a href="#cb35-32" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quality quality_80</span>
<span id="cb35-33"><a href="#cb35-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-34"><a href="#cb35-34" aria-hidden="true" tabindex="-1"></a>. <span class="kw">ren</span> quan quan_80</span>
<span id="cb35-35"><a href="#cb35-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-36"><a href="#cb35-36" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb35-37"><a href="#cb35-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-38"><a href="#cb35-38" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="fu">q</span></span>
<span id="cb35-39"><a href="#cb35-39" aria-hidden="true" tabindex="-1"></a>&gt; uality_80_t,<span class="kw">replace</span></span>
<span id="cb35-40"><a href="#cb35-40" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\qua</span>
<span id="cb35-41"><a href="#cb35-41" aria-hidden="true" tabindex="-1"></a>&gt; lity_80_t.dta saved</span>
<span id="cb35-42"><a href="#cb35-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-43"><a href="#cb35-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">restore</span></span>
<span id="cb35-44"><a href="#cb35-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-45"><a href="#cb35-45" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-46"><a href="#cb35-46" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="kw">model</span></span>
<span id="cb35-47"><a href="#cb35-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-48"><a href="#cb35-48" aria-hidden="true" tabindex="-1"></a>. <span class="kw">merge</span> <span class="kw">model</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-editio</span>
<span id="cb35-49"><a href="#cb35-49" aria-hidden="true" tabindex="-1"></a>&gt; n\Chapter-8\quality_80_t</span>
<span id="cb35-50"><a href="#cb35-50" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: you are <span class="kw">using</span> old <span class="kw">merge</span> <span class="kw">syntax</span>; see [R] <span class="kw">merge</span> <span class="kw">for</span> <span class="kw">new</span> <span class="kw">syntax</span>)</span>
<span id="cb35-51"><a href="#cb35-51" aria-hidden="true" tabindex="-1"></a><span class="kw">variable</span> <span class="kw">model</span> does <span class="kw">not</span> uniquely identify observations <span class="kw">in</span> the master <span class="kw">data</span></span>
<span id="cb35-52"><a href="#cb35-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-53"><a href="#cb35-53" aria-hidden="true" tabindex="-1"></a>. <span class="kw">keep</span> <span class="kw">if</span> <span class="dt">_merge</span>==3</span>
<span id="cb35-54"><a href="#cb35-54" aria-hidden="true" tabindex="-1"></a>(14 observations deleted)</span>
<span id="cb35-55"><a href="#cb35-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-56"><a href="#cb35-56" aria-hidden="true" tabindex="-1"></a>. <span class="kw">drop</span> <span class="dt">_merge</span></span>
<span id="cb35-57"><a href="#cb35-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-58"><a href="#cb35-58" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-59"><a href="#cb35-59" aria-hidden="true" tabindex="-1"></a>. <span class="kw">sort</span> <span class="fu">year</span> <span class="kw">model</span></span>
<span id="cb35-60"><a href="#cb35-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-61"><a href="#cb35-61" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_80=<span class="kw">sum</span>(quality_80*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb35-62"><a href="#cb35-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-63"><a href="#cb35-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cp=<span class="kw">sum</span>(quality*quan_80), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb35-64"><a href="#cb35-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-65"><a href="#cb35-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> lasp=value_cp/value_80</span>
<span id="cb35-66"><a href="#cb35-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-67"><a href="#cb35-67" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-68"><a href="#cb35-68" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_c=<span class="kw">sum</span>(quality*quan),<span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb35-69"><a href="#cb35-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-70"><a href="#cb35-70" aria-hidden="true" tabindex="-1"></a>. <span class="kw">egen</span> value_cq=<span class="kw">sum</span>(quality_80*quan), <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb35-71"><a href="#cb35-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-72"><a href="#cb35-72" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> pasp=value_c/value_cq</span>
<span id="cb35-73"><a href="#cb35-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-74"><a href="#cb35-74" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-75"><a href="#cb35-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> qindex=(lasp*pasp)^0.5</span>
<span id="cb35-76"><a href="#cb35-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-77"><a href="#cb35-77" aria-hidden="true" tabindex="-1"></a>. <span class="kw">collapse</span> (<span class="kw">mean</span>) qindex, <span class="kw">by</span>(<span class="fu">year</span>)</span>
<span id="cb35-78"><a href="#cb35-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-79"><a href="#cb35-79" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-80"><a href="#cb35-80" aria-hidden="true" tabindex="-1"></a>. <span class="ot">list</span></span>
<span id="cb35-81"><a href="#cb35-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-82"><a href="#cb35-82" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb35-83"><a href="#cb35-83" aria-hidden="true" tabindex="-1"></a>     | <span class="fu">year</span>     qindex |</span>
<span id="cb35-84"><a href="#cb35-84" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb35-85"><a href="#cb35-85" aria-hidden="true" tabindex="-1"></a>  1. |   79   .9956951 |</span>
<span id="cb35-86"><a href="#cb35-86" aria-hidden="true" tabindex="-1"></a>  2. |   80          1 |</span>
<span id="cb35-87"><a href="#cb35-87" aria-hidden="true" tabindex="-1"></a>  3. |   81   1.035043 |</span>
<span id="cb35-88"><a href="#cb35-88" aria-hidden="true" tabindex="-1"></a>  4. |   82   1.058717 |</span>
<span id="cb35-89"><a href="#cb35-89" aria-hidden="true" tabindex="-1"></a>  5. |   83   1.057227 |</span>
<span id="cb35-90"><a href="#cb35-90" aria-hidden="true" tabindex="-1"></a>     |-----------------|</span>
<span id="cb35-91"><a href="#cb35-91" aria-hidden="true" tabindex="-1"></a>  6. |   84   1.053449 |</span>
<span id="cb35-92"><a href="#cb35-92" aria-hidden="true" tabindex="-1"></a>  7. |   85   1.160353 |</span>
<span id="cb35-93"><a href="#cb35-93" aria-hidden="true" tabindex="-1"></a>     +-----------------+</span>
<span id="cb35-94"><a href="#cb35-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-95"><a href="#cb35-95" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb35-96"><a href="#cb35-96" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb35-97"><a href="#cb35-97" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb35-98"><a href="#cb35-98" aria-hidden="true" tabindex="-1"></a>&gt; er-8\qindex_t.<span class="fu">log</span></span>
<span id="cb35-99"><a href="#cb35-99" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb35-100"><a href="#cb35-100" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  19 Jun 2024, 23:09:01</span>
<span id="cb35-101"><a href="#cb35-101" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb35-102"><a href="#cb35-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-103"><a href="#cb35-103" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb35-104"><a href="#cb35-104" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-3" class="level3">
<h3 class="anchored" data-anchor-id="my-code-3">My code</h3>
<section id="unit_quality.do-1" class="level4">
<h4 class="anchored" data-anchor-id="unit_quality.do-1">unit_quality.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_t =</span> quan,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth,</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> hght,</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> weight,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> hp,</span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> four,</span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran,</span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> ps,</span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> ac</span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-16"><a href="#cb36-16" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb36-17"><a href="#cb36-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">&lt;</span> <span class="dv">86</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-18"><a href="#cb36-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb36-19"><a href="#cb36-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb36-20"><a href="#cb36-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_c =</span> quan,</span>
<span id="cb36-21"><a href="#cb36-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth,</span>
<span id="cb36-22"><a href="#cb36-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> hght,</span>
<span id="cb36-23"><a href="#cb36-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> wght,</span>
<span id="cb36-24"><a href="#cb36-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> hp,</span>
<span id="cb36-25"><a href="#cb36-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> four,</span>
<span id="cb36-26"><a href="#cb36-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran,</span>
<span id="cb36-27"><a href="#cb36-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> ps,</span>
<span id="cb36-28"><a href="#cb36-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> ac</span>
<span id="cb36-29"><a href="#cb36-29" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-30"><a href="#cb36-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-31"><a href="#cb36-31" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb36-32"><a href="#cb36-32" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb36-33"><a href="#cb36-33" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-34"><a href="#cb36-34" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb36-35"><a href="#cb36-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb36-36"><a href="#cb36-36" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb36-37"><a href="#cb36-37" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb36-38"><a href="#cb36-38" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb36-39"><a href="#cb36-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb36-40"><a href="#cb36-40" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb36-41"><a href="#cb36-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb36-42"><a href="#cb36-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb36-43"><a href="#cb36-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb36-44"><a href="#cb36-44" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb36-45"><a href="#cb36-45" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb36-46"><a href="#cb36-46" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb36-47"><a href="#cb36-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb36-48"><a href="#cb36-48" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb36-49"><a href="#cb36-49" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb36-50"><a href="#cb36-50" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb36-51"><a href="#cb36-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-52"><a href="#cb36-52" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb36-53"><a href="#cb36-53" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb36-54"><a href="#cb36-54" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb36-55"><a href="#cb36-55" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb36-56"><a href="#cb36-56" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb36-57"><a href="#cb36-57" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb36-58"><a href="#cb36-58" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb36-59"><a href="#cb36-59" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 4
   year  freq percent   cum
  &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt; &lt;dbl&gt;
1    79    31    12.2  12.2
2    80    34    13.4  25.6
3    81    35    13.8  39.4
4    82    35    13.8  53.1
5    83    36    14.2  67.3
6    84    40    15.7  83.1
7    85    43    16.9 100  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd2</span>
<span id="cb38-14"><a href="#cb38-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-15"><a href="#cb38-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-16"><a href="#cb38-16" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-17"><a href="#cb38-17" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd2</span>
<span id="cb38-18"><a href="#cb38-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-19"><a href="#cb38-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-20"><a href="#cb38-20" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-21"><a href="#cb38-21" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd3</span>
<span id="cb38-22"><a href="#cb38-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-23"><a href="#cb38-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-24"><a href="#cb38-24" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-25"><a href="#cb38-25" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd3</span>
<span id="cb38-26"><a href="#cb38-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-27"><a href="#cb38-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-28"><a href="#cb38-28" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-29"><a href="#cb38-29" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd4</span>
<span id="cb38-30"><a href="#cb38-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-31"><a href="#cb38-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-32"><a href="#cb38-32" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-33"><a href="#cb38-33" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd4</span>
<span id="cb38-34"><a href="#cb38-34" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-35"><a href="#cb38-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-36"><a href="#cb38-36" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-37"><a href="#cb38-37" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd5</span>
<span id="cb38-38"><a href="#cb38-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-39"><a href="#cb38-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-40"><a href="#cb38-40" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-41"><a href="#cb38-41" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd5</span>
<span id="cb38-42"><a href="#cb38-42" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-43"><a href="#cb38-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-44"><a href="#cb38-44" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-45"><a href="#cb38-45" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd6</span>
<span id="cb38-46"><a href="#cb38-46" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-47"><a href="#cb38-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-48"><a href="#cb38-48" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-49"><a href="#cb38-49" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd6</span>
<span id="cb38-50"><a href="#cb38-50" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-51"><a href="#cb38-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-52"><a href="#cb38-52" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-53"><a href="#cb38-53" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd7</span>
<span id="cb38-54"><a href="#cb38-54" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb38-55"><a href="#cb38-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">case_when</span>(</span>
<span id="cb38-56"><a href="#cb38-56" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb38-57"><a href="#cb38-57" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd7</span>
<span id="cb38-58"><a href="#cb38-58" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb38-59"><a href="#cb38-59" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb38-60"><a href="#cb38-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-61"><a href="#cb38-61" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb38-62"><a href="#cb38-62" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>,</span>
<span id="cb38-63"><a href="#cb38-63" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb38-64"><a href="#cb38-64" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb38-65"><a href="#cb38-65" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>, <span class="at">c9 =</span> <span class="fl">0.1</span>,</span>
<span id="cb38-66"><a href="#cb38-66" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb38-67"><a href="#cb38-67" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span></span>
<span id="cb38-68"><a href="#cb38-68" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-69"><a href="#cb38-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-70"><a href="#cb38-70" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb38-71"><a href="#cb38-71" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb38-72"><a href="#cb38-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb38-73"><a href="#cb38-73" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb38-74"><a href="#cb38-74" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb38-75"><a href="#cb38-75" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb38-76"><a href="#cb38-76" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb38-77"><a href="#cb38-77" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb38-78"><a href="#cb38-78" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb38-79"><a href="#cb38-79" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb38-80"><a href="#cb38-80" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb38-81"><a href="#cb38-81" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb38-82"><a href="#cb38-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-83"><a href="#cb38-83" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * cyd5 + 
    b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + c3 * 
    hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * ac_c + 
    c8) + exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + (b4 + 0.16) * 
    tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + c9 * tyd7 + 
    d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * 
    tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  2.542e+02  3.171e+02   0.802 0.423598    
a4  5.052e+02  3.256e+02   1.552 0.122150    
a5  7.090e+02  3.173e+02   2.235 0.026415 *  
a6  1.082e+03  3.224e+02   3.356 0.000926 ***
a7  1.063e+03  3.739e+02   2.843 0.004876 ** 
b2  4.065e-03  3.290e-02   0.124 0.901779    
b3  7.559e-02  4.906e-02   1.541 0.124732    
b4  8.284e-02  4.904e-02   1.689 0.092555 .  
b5  3.276e-02  5.070e-02   0.646 0.518840    
b6  3.510e-02  5.147e-02   0.682 0.495934    
b7  8.254e-02  5.576e-02   1.480 0.140197    
c1  3.261e-02  1.117e-01   0.292 0.770715    
c2  3.860e-01  1.204e-01   3.205 0.001545 ** 
c3 -1.929e-01  5.683e-02  -3.395 0.000811 ***
c4  7.152e-01  7.362e-02   9.715  &lt; 2e-16 ***
c5  1.579e-01  3.382e-02   4.668 5.21e-06 ***
c6  6.412e-02  2.471e-02   2.595 0.010082 *  
c7  1.830e-01  2.428e-02   7.535 1.16e-12 ***
c8  6.599e+00  7.307e-01   9.032  &lt; 2e-16 ***
c9  1.172e-01  6.342e-02   1.848 0.065932 .  
d1  4.917e-01  7.958e-02   6.179 2.97e-09 ***
d2  2.621e-01  1.757e-01   1.492 0.137107    
d3 -4.513e-02  6.770e-02  -0.667 0.505752    
d4  3.031e-01  1.701e-01   1.782 0.076158 .  
d5  3.978e-02  3.627e-02   1.097 0.273899    
d6  9.676e-02  5.018e-02   1.928 0.055072 .  
d7  3.052e-01  7.156e-02   4.265 2.94e-05 ***
d8  6.300e+00  9.620e-01   6.549 3.85e-10 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 666.9 on 226 degrees of freedom

Number of iterations to convergence: 30 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span> fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span> fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span> fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span> fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>((fit_coef[<span class="st">"b2"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd2 <span class="sc">+</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a>        (fit_coef[<span class="st">"b3"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (fit_coef[<span class="st">"b4"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a>        (fit_coef[<span class="st">"b5"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (fit_coef[<span class="st">"b6"</span>] <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c9"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> fit_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span> fit_coef[<span class="st">"d8"</span>])</span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span> winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7) <span class="sc">+</span></span>
<span id="cb40-26"><a href="#cb40-26" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb40-27"><a href="#cb40-27" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb40-28"><a href="#cb40-28" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb40-29"><a href="#cb40-29" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> tyd2 <span class="sc">+</span> (b3 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd3 <span class="sc">+</span> (b4 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd4 <span class="sc">+</span></span>
<span id="cb40-30"><a href="#cb40-30" aria-hidden="true" tabindex="-1"></a>      (b5 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd5 <span class="sc">+</span> (b6 <span class="sc">+</span> <span class="fl">0.16</span>) <span class="sc">*</span> tyd6 <span class="sc">+</span> c9 <span class="sc">*</span> tyd7 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb40-31"><a href="#cb40-31" aria-hidden="true" tabindex="-1"></a>      d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span></span>
<span id="cb40-32"><a href="#cb40-32" aria-hidden="true" tabindex="-1"></a>      d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb40-33"><a href="#cb40-33" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb40-34"><a href="#cb40-34" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values</span>
<span id="cb40-35"><a href="#cb40-35" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb40-36"><a href="#cb40-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-37"><a href="#cb40-37" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + winv * exp(b2 * tyd2 + (b3 + 0.16) * tyd3 + 
    (b4 + 0.16) * tyd4 + (b5 + 0.16) * tyd5 + (b6 + 0.16) * tyd6 + 
    c9 * tyd7 + d1 * wght_t + d2 * wdth_t + d3 * hght_t + d4 * 
    hp_t + d5 * tran_t + d6 * ps_t + d7 * four_t + d8)

Parameters:
     Estimate Std. Error t value Pr(&gt;|t|)    
a3  3.679e+02  2.391e+02   1.539 0.125219    
a4  6.005e+02  2.543e+02   2.362 0.019041 *  
a5  8.879e+02  2.436e+02   3.645 0.000332 ***
a6  1.104e+03  2.511e+02   4.399 1.68e-05 ***
a7  8.556e+02  3.663e+02   2.336 0.020379 *  
b2  1.304e-02  3.031e-02   0.430 0.667488    
b3  6.745e-02  4.252e-02   1.586 0.114086    
b4  7.013e-02  4.419e-02   1.587 0.113886    
b5 -5.484e-04  4.708e-02  -0.012 0.990718    
b6  1.801e-02  4.740e-02   0.380 0.704268    
b7  1.008e-01  6.416e-02   1.571 0.117554    
c1  4.925e-02  1.311e-01   0.376 0.707523    
c2  3.908e-01  1.383e-01   2.825 0.005153 ** 
c3 -6.182e-02  6.114e-02  -1.011 0.313088    
c4  8.103e-01  1.038e-01   7.807 2.17e-13 ***
c5  1.779e-01  3.552e-02   5.009 1.10e-06 ***
c6  6.936e-02  3.049e-02   2.275 0.023864 *  
c7  1.567e-01  3.604e-02   4.348 2.08e-05 ***
c8  5.839e+00  8.619e-01   6.775 1.07e-10 ***
c9  1.060e-01  5.506e-02   1.925 0.055494 .  
d1  4.760e-01  1.172e-01   4.060 6.76e-05 ***
d2  2.121e-01  1.420e-01   1.493 0.136773    
d3 -2.704e-02  7.406e-02  -0.365 0.715380    
d4  2.443e-01  1.517e-01   1.611 0.108659    
d5  5.301e-02  3.562e-02   1.488 0.138112    
d6  5.751e-02  6.396e-02   0.899 0.369534    
d7  2.972e-01  5.670e-02   5.242 3.64e-07 ***
d8  6.630e+00  7.655e-01   8.661 8.98e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1144 on 226 degrees of freedom

Number of iterations to convergence: 31 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>fit2_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit2)</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a>truck_7990_2 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ve <span class="sc">==</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality =</span> <span class="fu">exp</span>(fit2_coef[<span class="st">"c8"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"b2"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span> fit2_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span> fit2_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span> fit2_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c),</span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a>    <span class="at">nvalue =</span> quality <span class="sc">*</span> quan_c</span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb42-12"><a href="#cb42-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-13"><a href="#cb42-13" aria-hidden="true" tabindex="-1"></a>truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb42-14"><a href="#cb42-14" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb42-15"><a href="#cb42-15" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb42-16"><a href="#cb42-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan_c),</span>
<span id="cb42-17"><a href="#cb42-17" aria-hidden="true" tabindex="-1"></a>    <span class="at">anvalue =</span> <span class="fu">mean</span>(nvalue)</span>
<span id="cb42-18"><a href="#cb42-18" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb42-19"><a href="#cb42-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb42-20"><a href="#cb42-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">uquality =</span> anvalue <span class="sc">/</span> aquan) <span class="sc">%&gt;%</span></span>
<span id="cb42-21"><a href="#cb42-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb42-22"><a href="#cb42-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_uquality =</span> <span class="fu">mean</span>(uquality))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_uquality
  &lt;dbl&gt;         &lt;dbl&gt;
1    79         4361.
2    80         4473.
3    81         4868.
4    82         5253.
5    83         5637.
6    84         5862.
7    85         6130.</code></pre>
</div>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>truck_7990_3 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(ve <span class="sc">==</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality =</span> <span class="fu">exp</span>(fit2_coef[<span class="st">"d8"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"b2"</span>] <span class="sc">+</span> fit2_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit2_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit2_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>      fit2_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit2_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t),</span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a>    <span class="at">nvalue =</span> quality <span class="sc">*</span> quan_t</span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">aquan =</span> <span class="fu">mean</span>(quan_t),</span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">anvalue =</span> <span class="fu">mean</span>(nvalue)</span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">uquality =</span> anvalue <span class="sc">/</span> aquan) <span class="sc">%&gt;%</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_uquality =</span> <span class="fu">mean</span>(uquality))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_uquality
  &lt;dbl&gt;         &lt;dbl&gt;
1    79         4627.
2    80         4637.
3    81         4791.
4    82         4930.
5    83         4997.
6    84         5010.
7    85         5433.</code></pre>
</div>
</div>
</section>
<section id="qindex_c.do-1" class="level4">
<h4 class="anchored" data-anchor-id="qindex_c.do-1">qindex_c.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>truck_7990_2_80 <span class="ot">&lt;-</span> truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, quality, quan_c) <span class="sc">%&gt;%</span></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality_80 =</span> quality,</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_80 =</span> quan_c</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a>truck_7990_2 <span class="sc">%&gt;%</span></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, quality, quan_c) <span class="sc">%&gt;%</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(truck_7990_2_80, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"model"</span>, <span class="st">"type"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb46-12"><a href="#cb46-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, model) <span class="sc">%&gt;%</span></span>
<span id="cb46-13"><a href="#cb46-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-14"><a href="#cb46-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_80),</span>
<span id="cb46-15"><a href="#cb46-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cp =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_80),</span>
<span id="cb46-16"><a href="#cb46-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lasp =</span> value_cp <span class="sc">/</span> value_80</span>
<span id="cb46-17"><a href="#cb46-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb46-18"><a href="#cb46-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb46-19"><a href="#cb46-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb46-20"><a href="#cb46-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_c =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_c),</span>
<span id="cb46-21"><a href="#cb46-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_cq =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_c),</span>
<span id="cb46-22"><a href="#cb46-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pasp =</span> value_c <span class="sc">/</span> value_cq,</span>
<span id="cb46-23"><a href="#cb46-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">qindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)</span>
<span id="cb46-24"><a href="#cb46-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb46-25"><a href="#cb46-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_qindex =</span> <span class="fu">mean</span>(qindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_qindex
  &lt;dbl&gt;       &lt;dbl&gt;
1    79       0.985
2    80       1    
3    81       1.09 
4    82       1.14 
5    83       1.20 
6    84       1.26 
7    85       1.33 </code></pre>
</div>
</div>
</section>
<section id="qindex_t.do-1" class="level4">
<h4 class="anchored" data-anchor-id="qindex_t.do-1">qindex_t.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a>truck_7990_3_80 <span class="ot">&lt;-</span> truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(year <span class="sc">==</span> <span class="dv">80</span>) <span class="sc">%&gt;%</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(model, type, quality, quan_t) <span class="sc">%&gt;%</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">quality_80 =</span> quality,</span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a>    <span class="at">quan_80 =</span> quan_t</span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb48-8"><a href="#cb48-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-9"><a href="#cb48-9" aria-hidden="true" tabindex="-1"></a>truck_7990_3 <span class="sc">%&gt;%</span></span>
<span id="cb48-10"><a href="#cb48-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">select</span>(year, model, type, quality, quan_t) <span class="sc">%&gt;%</span></span>
<span id="cb48-11"><a href="#cb48-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">inner_join</span>(truck_7990_3_80, <span class="at">by =</span> <span class="fu">c</span>(<span class="st">"model"</span>, <span class="st">"type"</span>)) <span class="sc">%&gt;%</span></span>
<span id="cb48-12"><a href="#cb48-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year, model) <span class="sc">%&gt;%</span></span>
<span id="cb48-13"><a href="#cb48-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-14"><a href="#cb48-14" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_80 =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_80),</span>
<span id="cb48-15"><a href="#cb48-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_tp =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_80),</span>
<span id="cb48-16"><a href="#cb48-16" aria-hidden="true" tabindex="-1"></a>    <span class="at">lasp =</span> value_tp <span class="sc">/</span> value_80</span>
<span id="cb48-17"><a href="#cb48-17" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-18"><a href="#cb48-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb48-19"><a href="#cb48-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb48-20"><a href="#cb48-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_t =</span> <span class="fu">sum</span>(quality <span class="sc">*</span> quan_t),</span>
<span id="cb48-21"><a href="#cb48-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">value_tq =</span> <span class="fu">sum</span>(quality_80 <span class="sc">*</span> quan_t),</span>
<span id="cb48-22"><a href="#cb48-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">pasp =</span> value_t <span class="sc">/</span> value_tq,</span>
<span id="cb48-23"><a href="#cb48-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">qindex =</span> <span class="fu">sqrt</span>(lasp <span class="sc">*</span> pasp)</span>
<span id="cb48-24"><a href="#cb48-24" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">%&gt;%</span></span>
<span id="cb48-25"><a href="#cb48-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mean_qindex =</span> <span class="fu">mean</span>(qindex))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 × 2
   year mean_qindex
  &lt;dbl&gt;       &lt;dbl&gt;
1    79       0.983
2    80       1    
3    81       1.03 
4    82       1.06 
5    83       1.05 
6    84       1.07 
7    85       1.17 </code></pre>
</div>
</div>
</section>
</section>
</section>
<section id="exercise-5" class="level2">
<h2 class="anchored" data-anchor-id="exercise-5">Exercise 5</h2>
<p>Pooling car and truck data, run <code>system_nocom.do</code> and <code>system_wcon.do</code> to reproduce columns (1) – (4) in Table 8.5, with constraints specified in equation (8.22).</p>
<section id="feenstras-code-4" class="level3">
<h3 class="anchored" data-anchor-id="feenstras-code-4">Feenstra’s code</h3>
<section id="system_nocom.do" class="level4">
<h4 class="anchored" data-anchor-id="system_nocom.do">system_nocom.do</h4>
<p>I think there is a typo in the original code, in specific in the lines:</p>
<div class="sourceCode" id="cb50"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd10=yd10</span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd10=yd10</span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=10 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=10 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd11=yd11</span>
<span id="cb50-7"><a href="#cb50-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd11=yd11</span>
<span id="cb50-8"><a href="#cb50-8" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=11 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb50-9"><a href="#cb50-9" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=11 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb50-10"><a href="#cb50-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-11"><a href="#cb50-11" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd12=yd12</span>
<span id="cb50-12"><a href="#cb50-12" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd12=yd12</span>
<span id="cb50-13"><a href="#cb50-13" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=12 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb50-14"><a href="#cb50-14" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=12 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>To me, it is not clear why overwriting <code>cyd7</code> three times instead of replacing with “12” in one step. I corrected <code>cyd10</code>, <code>cyd11</code>, and <code>cyd12</code> below.</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\system_nocon.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="kw">set</span> <span class="dv">matsize</span> 400</span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_7990,<span class="kw">clear</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=2</span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_t</span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_t</span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_t</span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_t</span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_t</span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_t</span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a><span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp,<span class="kw">replace</span></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a><span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\car_7990,<span class="kw">clear</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> ve=1</span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wdth wdth_c</span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hght hght_c</span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> wght wght_c</span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> hp hp_c</span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> four four_c</span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> tran tran_c</span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> ps ps_c</span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a><span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a><span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\truck_temp</span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a><span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-51"><a href="#cb51-51" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd2=yd2</span>
<span id="cb51-52"><a href="#cb51-52" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd2=yd2</span>
<span id="cb51-53"><a href="#cb51-53" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-54"><a href="#cb51-54" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-55"><a href="#cb51-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-56"><a href="#cb51-56" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd3=yd3</span>
<span id="cb51-57"><a href="#cb51-57" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd3=yd3</span>
<span id="cb51-58"><a href="#cb51-58" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-59"><a href="#cb51-59" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-60"><a href="#cb51-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-61"><a href="#cb51-61" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd4=yd4</span>
<span id="cb51-62"><a href="#cb51-62" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd4=yd4</span>
<span id="cb51-63"><a href="#cb51-63" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-64"><a href="#cb51-64" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-65"><a href="#cb51-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-66"><a href="#cb51-66" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd5=yd5</span>
<span id="cb51-67"><a href="#cb51-67" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd5=yd5</span>
<span id="cb51-68"><a href="#cb51-68" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-69"><a href="#cb51-69" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-70"><a href="#cb51-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-71"><a href="#cb51-71" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd6=yd6</span>
<span id="cb51-72"><a href="#cb51-72" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd6=yd6</span>
<span id="cb51-73"><a href="#cb51-73" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-74"><a href="#cb51-74" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-75"><a href="#cb51-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-76"><a href="#cb51-76" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd7=yd7</span>
<span id="cb51-77"><a href="#cb51-77" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd7=yd7</span>
<span id="cb51-78"><a href="#cb51-78" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-79"><a href="#cb51-79" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-80"><a href="#cb51-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-81"><a href="#cb51-81" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd8=yd8</span>
<span id="cb51-82"><a href="#cb51-82" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd8=yd8</span>
<span id="cb51-83"><a href="#cb51-83" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd8=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-84"><a href="#cb51-84" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd8=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-85"><a href="#cb51-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-86"><a href="#cb51-86" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd9=yd9</span>
<span id="cb51-87"><a href="#cb51-87" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd9=yd9</span>
<span id="cb51-88"><a href="#cb51-88" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd9=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-89"><a href="#cb51-89" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd9=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-90"><a href="#cb51-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-91"><a href="#cb51-91" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd10=yd10</span>
<span id="cb51-92"><a href="#cb51-92" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd10=yd10</span>
<span id="cb51-93"><a href="#cb51-93" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd10=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-94"><a href="#cb51-94" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd10=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-95"><a href="#cb51-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-96"><a href="#cb51-96" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd11=yd11</span>
<span id="cb51-97"><a href="#cb51-97" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd11=yd11</span>
<span id="cb51-98"><a href="#cb51-98" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd11=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-99"><a href="#cb51-99" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd11=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-100"><a href="#cb51-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-101"><a href="#cb51-101" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> cyd12=yd12</span>
<span id="cb51-102"><a href="#cb51-102" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> tyd12=yd12</span>
<span id="cb51-103"><a href="#cb51-103" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> cyd12=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb51-104"><a href="#cb51-104" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> tyd12=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb51-105"><a href="#cb51-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-106"><a href="#cb51-106" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb51-107"><a href="#cb51-107" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb51-108"><a href="#cb51-108" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb51-109"><a href="#cb51-109" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 e11 e12"</span></span>
<span id="cb51-110"><a href="#cb51-110" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb51-111"><a href="#cb51-111" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb51-112"><a href="#cb51-112" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb51-113"><a href="#cb51-113" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb51-114"><a href="#cb51-114" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb51-115"><a href="#cb51-115" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a8=1</span>
<span id="cb51-116"><a href="#cb51-116" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a9=1</span>
<span id="cb51-117"><a href="#cb51-117" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a10=1</span>
<span id="cb51-118"><a href="#cb51-118" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a11=1</span>
<span id="cb51-119"><a href="#cb51-119" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a12=1</span>
<span id="cb51-120"><a href="#cb51-120" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb51-121"><a href="#cb51-121" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb51-122"><a href="#cb51-122" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb51-123"><a href="#cb51-123" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb51-124"><a href="#cb51-124" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb51-125"><a href="#cb51-125" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb51-126"><a href="#cb51-126" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b8=.1</span>
<span id="cb51-127"><a href="#cb51-127" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b9=.1</span>
<span id="cb51-128"><a href="#cb51-128" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b10=.1</span>
<span id="cb51-129"><a href="#cb51-129" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b11=.1</span>
<span id="cb51-130"><a href="#cb51-130" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b12=.1</span>
<span id="cb51-131"><a href="#cb51-131" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb51-132"><a href="#cb51-132" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb51-133"><a href="#cb51-133" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb51-134"><a href="#cb51-134" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb51-135"><a href="#cb51-135" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb51-136"><a href="#cb51-136" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb51-137"><a href="#cb51-137" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb51-138"><a href="#cb51-138" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb51-139"><a href="#cb51-139" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb51-140"><a href="#cb51-140" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb51-141"><a href="#cb51-141" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb51-142"><a href="#cb51-142" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb51-143"><a href="#cb51-143" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb51-144"><a href="#cb51-144" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb51-145"><a href="#cb51-145" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb51-146"><a href="#cb51-146" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb51-147"><a href="#cb51-147" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e2=.1</span>
<span id="cb51-148"><a href="#cb51-148" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e3=.1</span>
<span id="cb51-149"><a href="#cb51-149" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e4=.1</span>
<span id="cb51-150"><a href="#cb51-150" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e5=.1</span>
<span id="cb51-151"><a href="#cb51-151" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e6=.1</span>
<span id="cb51-152"><a href="#cb51-152" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e7=.1</span>
<span id="cb51-153"><a href="#cb51-153" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e8=.1</span>
<span id="cb51-154"><a href="#cb51-154" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e9=.1</span>
<span id="cb51-155"><a href="#cb51-155" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e10=.1</span>
<span id="cb51-156"><a href="#cb51-156" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e11=.1</span>
<span id="cb51-157"><a href="#cb51-157" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e12=.1</span>
<span id="cb51-158"><a href="#cb51-158" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb51-159"><a href="#cb51-159" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-160"><a href="#cb51-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-161"><a href="#cb51-161" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb51-162"><a href="#cb51-162" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12<span class="co">/*</span></span>
<span id="cb51-163"><a href="#cb51-163" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb51-164"><a href="#cb51-164" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb51-165"><a href="#cb51-165" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb51-166"><a href="#cb51-166" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb51-167"><a href="#cb51-167" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb51-168"><a href="#cb51-168" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb51-169"><a href="#cb51-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-170"><a href="#cb51-170" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb51-171"><a href="#cb51-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-172"><a href="#cb51-172" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_1 price</span>
<span id="cb51-173"><a href="#cb51-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-174"><a href="#cb51-174" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7]*cyd7<span class="co">/*</span></span>
<span id="cb51-175"><a href="#cb51-175" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[b8]*cyd8+_b[b9]*cyd9+_b[b10]*cyd10+_b[b11]*cyd11+_b[b12]*cyd12<span class="co">/*</span></span>
<span id="cb51-176"><a href="#cb51-176" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps_c<span class="co">/*</span></span>
<span id="cb51-177"><a href="#cb51-177" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb51-178"><a href="#cb51-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-179"><a href="#cb51-179" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> winv=1/<span class="fu">exp</span>(_b[e2]*tyd2+_b[e3]*tyd3+_b[e4]*tyd4+_b[e5]*tyd5+_b[e6]*tyd6<span class="co">/*</span></span>
<span id="cb51-180"><a href="#cb51-180" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[e7]*tyd7+_b[e8]*tyd8+_b[e9]*tyd9+_b[e10]*tyd10+_b[e11]*tyd11+_b[e12]*tyd12<span class="co">/*</span></span>
<span id="cb51-181"><a href="#cb51-181" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb51-182"><a href="#cb51-182" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb51-183"><a href="#cb51-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-184"><a href="#cb51-184" aria-hidden="true" tabindex="-1"></a><span class="kw">gen</span> nprice=price*winv</span>
<span id="cb51-185"><a href="#cb51-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-186"><a href="#cb51-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-187"><a href="#cb51-187" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb51-188"><a href="#cb51-188" aria-hidden="true" tabindex="-1"></a><span class="kw">version</span> 7.0</span>
<span id="cb51-189"><a href="#cb51-189" aria-hidden="true" tabindex="-1"></a><span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb51-190"><a href="#cb51-190" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 e11 e12"</span></span>
<span id="cb51-191"><a href="#cb51-191" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a3=1</span>
<span id="cb51-192"><a href="#cb51-192" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a4=1</span>
<span id="cb51-193"><a href="#cb51-193" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a5=1</span>
<span id="cb51-194"><a href="#cb51-194" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a6=1</span>
<span id="cb51-195"><a href="#cb51-195" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a7=1</span>
<span id="cb51-196"><a href="#cb51-196" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a8=1</span>
<span id="cb51-197"><a href="#cb51-197" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a9=1</span>
<span id="cb51-198"><a href="#cb51-198" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a10=1</span>
<span id="cb51-199"><a href="#cb51-199" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a11=1</span>
<span id="cb51-200"><a href="#cb51-200" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> a12=1</span>
<span id="cb51-201"><a href="#cb51-201" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b2=.1</span>
<span id="cb51-202"><a href="#cb51-202" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b3=.1</span>
<span id="cb51-203"><a href="#cb51-203" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b4=.1</span>
<span id="cb51-204"><a href="#cb51-204" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b5=.1</span>
<span id="cb51-205"><a href="#cb51-205" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b6=.1</span>
<span id="cb51-206"><a href="#cb51-206" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b7=.1</span>
<span id="cb51-207"><a href="#cb51-207" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b8=.1</span>
<span id="cb51-208"><a href="#cb51-208" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b9=.1</span>
<span id="cb51-209"><a href="#cb51-209" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b10=.1</span>
<span id="cb51-210"><a href="#cb51-210" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b11=.1</span>
<span id="cb51-211"><a href="#cb51-211" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> b12=.1</span>
<span id="cb51-212"><a href="#cb51-212" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c1=.1</span>
<span id="cb51-213"><a href="#cb51-213" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c2=.1</span>
<span id="cb51-214"><a href="#cb51-214" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c3=.1</span>
<span id="cb51-215"><a href="#cb51-215" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c4=.1</span>
<span id="cb51-216"><a href="#cb51-216" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c5=.1</span>
<span id="cb51-217"><a href="#cb51-217" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c6=.1</span>
<span id="cb51-218"><a href="#cb51-218" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c7=.1</span>
<span id="cb51-219"><a href="#cb51-219" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> c8=.1</span>
<span id="cb51-220"><a href="#cb51-220" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d1=.1</span>
<span id="cb51-221"><a href="#cb51-221" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d2=.1</span>
<span id="cb51-222"><a href="#cb51-222" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d3=.1</span>
<span id="cb51-223"><a href="#cb51-223" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d4=.1</span>
<span id="cb51-224"><a href="#cb51-224" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d5=.1</span>
<span id="cb51-225"><a href="#cb51-225" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d6=.1</span>
<span id="cb51-226"><a href="#cb51-226" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d7=.1</span>
<span id="cb51-227"><a href="#cb51-227" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> d8=.1</span>
<span id="cb51-228"><a href="#cb51-228" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e2=.1</span>
<span id="cb51-229"><a href="#cb51-229" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e3=.1</span>
<span id="cb51-230"><a href="#cb51-230" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e4=.1</span>
<span id="cb51-231"><a href="#cb51-231" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e5=.1</span>
<span id="cb51-232"><a href="#cb51-232" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e6=.1</span>
<span id="cb51-233"><a href="#cb51-233" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e7=.1</span>
<span id="cb51-234"><a href="#cb51-234" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e8=.1</span>
<span id="cb51-235"><a href="#cb51-235" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e9=.1</span>
<span id="cb51-236"><a href="#cb51-236" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e10=.1</span>
<span id="cb51-237"><a href="#cb51-237" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e11=.1</span>
<span id="cb51-238"><a href="#cb51-238" aria-hidden="true" tabindex="-1"></a><span class="kw">global</span> e12=.1</span>
<span id="cb51-239"><a href="#cb51-239" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span>
<span id="cb51-240"><a href="#cb51-240" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb51-241"><a href="#cb51-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-242"><a href="#cb51-242" aria-hidden="true" tabindex="-1"></a><span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb51-243"><a href="#cb51-243" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12)<span class="co">/*</span></span>
<span id="cb51-244"><a href="#cb51-244" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb51-245"><a href="#cb51-245" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb51-246"><a href="#cb51-246" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb51-247"><a href="#cb51-247" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb51-248"><a href="#cb51-248" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb51-249"><a href="#cb51-249" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb51-250"><a href="#cb51-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-251"><a href="#cb51-251" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span></span>
<span id="cb51-252"><a href="#cb51-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-253"><a href="#cb51-253" aria-hidden="true" tabindex="-1"></a><span class="kw">nl</span> ct_2 nprice</span>
<span id="cb51-254"><a href="#cb51-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-255"><a href="#cb51-255" aria-hidden="true" tabindex="-1"></a><span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb51-256"><a href="#cb51-256" aria-hidden="true" tabindex="-1"></a><span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb51-257"><a href="#cb51-257" aria-hidden="true" tabindex="-1"></a><span class="kw">exit</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Output:</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode stata code-with-copy"><code class="sourceCode stata"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a>. <span class="kw">capture</span> <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb52-5"><a href="#cb52-5" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\system_nocon.<span class="fu">log</span>,<span class="kw">replace</span></span>
<span id="cb52-6"><a href="#cb52-6" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb52-7"><a href="#cb52-7" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\system_nocon.<span class="fu">log</span> <span class="kw">not</span> found)</span>
<span id="cb52-8"><a href="#cb52-8" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb52-9"><a href="#cb52-9" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb52-10"><a href="#cb52-10" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb52-11"><a href="#cb52-11" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_nocon.<span class="fu">log</span></span>
<span id="cb52-12"><a href="#cb52-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb52-13"><a href="#cb52-13" aria-hidden="true" tabindex="-1"></a> opened <span class="kw">on</span>:  24 Jun 2024, 00:33:59</span>
<span id="cb52-14"><a href="#cb52-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-15"><a href="#cb52-15" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-16"><a href="#cb52-16" aria-hidden="true" tabindex="-1"></a>. <span class="kw">set</span> <span class="dv">matsize</span> 400</span>
<span id="cb52-17"><a href="#cb52-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-18"><a href="#cb52-18" aria-hidden="true" tabindex="-1"></a>Current <span class="dv">memory</span> allocation</span>
<span id="cb52-19"><a href="#cb52-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-20"><a href="#cb52-20" aria-hidden="true" tabindex="-1"></a>                    current                                 <span class="dv">memory</span> usage</span>
<span id="cb52-21"><a href="#cb52-21" aria-hidden="true" tabindex="-1"></a>    settable          <span class="ot">value</span>     description                 (1M = 1024k)</span>
<span id="cb52-22"><a href="#cb52-22" aria-hidden="true" tabindex="-1"></a>    --------------------------------------------------------------------</span>
<span id="cb52-23"><a href="#cb52-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">maxvar</span>         5000     <span class="fu">max</span>. variables allowed           1.909M</span>
<span id="cb52-24"><a href="#cb52-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">memory</span>           50M    <span class="fu">max</span>. <span class="kw">data</span> space                 50.000M</span>
<span id="cb52-25"><a href="#cb52-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">set</span> <span class="dv">matsize</span>         400     <span class="fu">max</span>. RHS vars <span class="kw">in</span> models          1.254M</span>
<span id="cb52-26"><a href="#cb52-26" aria-hidden="true" tabindex="-1"></a>                                                            -----------</span>
<span id="cb52-27"><a href="#cb52-27" aria-hidden="true" tabindex="-1"></a>                                                                53.163M</span>
<span id="cb52-28"><a href="#cb52-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-29"><a href="#cb52-29" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-30"><a href="#cb52-30" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr</span>
<span id="cb52-31"><a href="#cb52-31" aria-hidden="true" tabindex="-1"></a>&gt; uck_7990,<span class="kw">clear</span></span>
<span id="cb52-32"><a href="#cb52-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-33"><a href="#cb52-33" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=2</span>
<span id="cb52-34"><a href="#cb52-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-35"><a href="#cb52-35" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_t</span>
<span id="cb52-36"><a href="#cb52-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-37"><a href="#cb52-37" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_t</span>
<span id="cb52-38"><a href="#cb52-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-39"><a href="#cb52-39" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">weight</span> wght_t</span>
<span id="cb52-40"><a href="#cb52-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-41"><a href="#cb52-41" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_t</span>
<span id="cb52-42"><a href="#cb52-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-43"><a href="#cb52-43" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_t</span>
<span id="cb52-44"><a href="#cb52-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-45"><a href="#cb52-45" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_t</span>
<span id="cb52-46"><a href="#cb52-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-47"><a href="#cb52-47" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_t</span>
<span id="cb52-48"><a href="#cb52-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-49"><a href="#cb52-49" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_t</span>
<span id="cb52-50"><a href="#cb52-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-51"><a href="#cb52-51" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-52"><a href="#cb52-52" aria-hidden="true" tabindex="-1"></a>. <span class="kw">save</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t</span>
<span id="cb52-53"><a href="#cb52-53" aria-hidden="true" tabindex="-1"></a>&gt; ruck_temp,<span class="kw">replace</span></span>
<span id="cb52-54"><a href="#cb52-54" aria-hidden="true" tabindex="-1"></a>(<span class="kw">note</span>: file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapte</span>
<span id="cb52-55"><a href="#cb52-55" aria-hidden="true" tabindex="-1"></a>&gt; <span class="fu">r</span>-8\truck_temp.dta <span class="kw">not</span> found)</span>
<span id="cb52-56"><a href="#cb52-56" aria-hidden="true" tabindex="-1"></a>file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru</span>
<span id="cb52-57"><a href="#cb52-57" aria-hidden="true" tabindex="-1"></a>&gt; ck_temp.dta saved</span>
<span id="cb52-58"><a href="#cb52-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-59"><a href="#cb52-59" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-60"><a href="#cb52-60" aria-hidden="true" tabindex="-1"></a>. <span class="kw">use</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\<span class="kw">ca</span></span>
<span id="cb52-61"><a href="#cb52-61" aria-hidden="true" tabindex="-1"></a>&gt; r_7990,<span class="kw">clear</span></span>
<span id="cb52-62"><a href="#cb52-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-63"><a href="#cb52-63" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> ve=1</span>
<span id="cb52-64"><a href="#cb52-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-65"><a href="#cb52-65" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wdth wdth_c</span>
<span id="cb52-66"><a href="#cb52-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-67"><a href="#cb52-67" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hght hght_c</span>
<span id="cb52-68"><a href="#cb52-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-69"><a href="#cb52-69" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> wght wght_c</span>
<span id="cb52-70"><a href="#cb52-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-71"><a href="#cb52-71" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> hp hp_c</span>
<span id="cb52-72"><a href="#cb52-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-73"><a href="#cb52-73" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> four four_c</span>
<span id="cb52-74"><a href="#cb52-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-75"><a href="#cb52-75" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> tran tran_c</span>
<span id="cb52-76"><a href="#cb52-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-77"><a href="#cb52-77" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> ps ps_c</span>
<span id="cb52-78"><a href="#cb52-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-79"><a href="#cb52-79" aria-hidden="true" tabindex="-1"></a>. <span class="kw">rename</span> <span class="kw">ac</span> ac_c</span>
<span id="cb52-80"><a href="#cb52-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-81"><a href="#cb52-81" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-82"><a href="#cb52-82" aria-hidden="true" tabindex="-1"></a>. <span class="kw">append</span> <span class="kw">using</span> Z:\home\pacha\github\advanced-international-trade\first-edition\Cha</span>
<span id="cb52-83"><a href="#cb52-83" aria-hidden="true" tabindex="-1"></a>&gt; pter-8\truck_temp</span>
<span id="cb52-84"><a href="#cb52-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-85"><a href="#cb52-85" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-86"><a href="#cb52-86" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_c=0 <span class="kw">if</span> wdth_c==.</span>
<span id="cb52-87"><a href="#cb52-87" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-88"><a href="#cb52-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-89"><a href="#cb52-89" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_c=0 <span class="kw">if</span> hght_c==.</span>
<span id="cb52-90"><a href="#cb52-90" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-91"><a href="#cb52-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-92"><a href="#cb52-92" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_c=0 <span class="kw">if</span> wght_c==.</span>
<span id="cb52-93"><a href="#cb52-93" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-94"><a href="#cb52-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-95"><a href="#cb52-95" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_c=0 <span class="kw">if</span> hp_c==.</span>
<span id="cb52-96"><a href="#cb52-96" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-97"><a href="#cb52-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-98"><a href="#cb52-98" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_c=0 <span class="kw">if</span> four_c==.</span>
<span id="cb52-99"><a href="#cb52-99" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-100"><a href="#cb52-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-101"><a href="#cb52-101" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_c=0 <span class="kw">if</span> tran_c==.</span>
<span id="cb52-102"><a href="#cb52-102" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-103"><a href="#cb52-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-104"><a href="#cb52-104" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_c=0 <span class="kw">if</span> ps_c==.</span>
<span id="cb52-105"><a href="#cb52-105" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-106"><a href="#cb52-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-107"><a href="#cb52-107" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_c=0 <span class="kw">if</span> ac_c==.</span>
<span id="cb52-108"><a href="#cb52-108" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made)</span>
<span id="cb52-109"><a href="#cb52-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-110"><a href="#cb52-110" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wdth_t=0 <span class="kw">if</span> wdth_t==.</span>
<span id="cb52-111"><a href="#cb52-111" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-112"><a href="#cb52-112" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-113"><a href="#cb52-113" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hght_t=0 <span class="kw">if</span> hght_t==.</span>
<span id="cb52-114"><a href="#cb52-114" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-115"><a href="#cb52-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-116"><a href="#cb52-116" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> wght_t=0 <span class="kw">if</span> wght_t==.</span>
<span id="cb52-117"><a href="#cb52-117" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-118"><a href="#cb52-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-119"><a href="#cb52-119" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> hp_t=0 <span class="kw">if</span> hp_t==.</span>
<span id="cb52-120"><a href="#cb52-120" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-121"><a href="#cb52-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-122"><a href="#cb52-122" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> four_t=0 <span class="kw">if</span> four_t==.</span>
<span id="cb52-123"><a href="#cb52-123" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-124"><a href="#cb52-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-125"><a href="#cb52-125" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tran_t=0 <span class="kw">if</span> tran_t==.</span>
<span id="cb52-126"><a href="#cb52-126" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-127"><a href="#cb52-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-128"><a href="#cb52-128" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ps_t=0 <span class="kw">if</span> ps_t==.</span>
<span id="cb52-129"><a href="#cb52-129" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-130"><a href="#cb52-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-131"><a href="#cb52-131" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> ac_t=0 <span class="kw">if</span> ac_t==.</span>
<span id="cb52-132"><a href="#cb52-132" aria-hidden="true" tabindex="-1"></a>(284 <span class="fu">real</span> changes made)</span>
<span id="cb52-133"><a href="#cb52-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-134"><a href="#cb52-134" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-135"><a href="#cb52-135" aria-hidden="true" tabindex="-1"></a>. <span class="kw">tab</span> <span class="fu">year</span>, <span class="kw">gen</span>(yd)</span>
<span id="cb52-136"><a href="#cb52-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-137"><a href="#cb52-137" aria-hidden="true" tabindex="-1"></a>       <span class="fu">year</span> |      Freq.     Percent        Cum.</span>
<span id="cb52-138"><a href="#cb52-138" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb52-139"><a href="#cb52-139" aria-hidden="true" tabindex="-1"></a>         79 |         31        7.67        7.67</span>
<span id="cb52-140"><a href="#cb52-140" aria-hidden="true" tabindex="-1"></a>         80 |         34        8.42       16.09</span>
<span id="cb52-141"><a href="#cb52-141" aria-hidden="true" tabindex="-1"></a>         81 |         35        8.66       24.75</span>
<span id="cb52-142"><a href="#cb52-142" aria-hidden="true" tabindex="-1"></a>         82 |         35        8.66       33.42</span>
<span id="cb52-143"><a href="#cb52-143" aria-hidden="true" tabindex="-1"></a>         83 |         36        8.91       42.33</span>
<span id="cb52-144"><a href="#cb52-144" aria-hidden="true" tabindex="-1"></a>         84 |         40        9.90       52.23</span>
<span id="cb52-145"><a href="#cb52-145" aria-hidden="true" tabindex="-1"></a>         85 |         43       10.64       62.87</span>
<span id="cb52-146"><a href="#cb52-146" aria-hidden="true" tabindex="-1"></a>         86 |         33        8.17       71.04</span>
<span id="cb52-147"><a href="#cb52-147" aria-hidden="true" tabindex="-1"></a>         87 |         35        8.66       79.70</span>
<span id="cb52-148"><a href="#cb52-148" aria-hidden="true" tabindex="-1"></a>         88 |         30        7.43       87.13</span>
<span id="cb52-149"><a href="#cb52-149" aria-hidden="true" tabindex="-1"></a>         89 |         26        6.44       93.56</span>
<span id="cb52-150"><a href="#cb52-150" aria-hidden="true" tabindex="-1"></a>         90 |         26        6.44      100.00</span>
<span id="cb52-151"><a href="#cb52-151" aria-hidden="true" tabindex="-1"></a>------------+-----------------------------------</span>
<span id="cb52-152"><a href="#cb52-152" aria-hidden="true" tabindex="-1"></a>      Total |        404      100.00</span>
<span id="cb52-153"><a href="#cb52-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-154"><a href="#cb52-154" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-155"><a href="#cb52-155" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd2=yd2</span>
<span id="cb52-156"><a href="#cb52-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-157"><a href="#cb52-157" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd2=yd2</span>
<span id="cb52-158"><a href="#cb52-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-159"><a href="#cb52-159" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd2=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-160"><a href="#cb52-160" aria-hidden="true" tabindex="-1"></a>(8 <span class="fu">real</span> changes made)</span>
<span id="cb52-161"><a href="#cb52-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-162"><a href="#cb52-162" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd2=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-163"><a href="#cb52-163" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb52-164"><a href="#cb52-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-165"><a href="#cb52-165" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-166"><a href="#cb52-166" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd3=yd3</span>
<span id="cb52-167"><a href="#cb52-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-168"><a href="#cb52-168" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd3=yd3</span>
<span id="cb52-169"><a href="#cb52-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-170"><a href="#cb52-170" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd3=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-171"><a href="#cb52-171" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb52-172"><a href="#cb52-172" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-173"><a href="#cb52-173" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd3=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-174"><a href="#cb52-174" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb52-175"><a href="#cb52-175" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-176"><a href="#cb52-176" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-177"><a href="#cb52-177" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd4=yd4</span>
<span id="cb52-178"><a href="#cb52-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-179"><a href="#cb52-179" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd4=yd4</span>
<span id="cb52-180"><a href="#cb52-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-181"><a href="#cb52-181" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd4=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-182"><a href="#cb52-182" aria-hidden="true" tabindex="-1"></a>(9 <span class="fu">real</span> changes made)</span>
<span id="cb52-183"><a href="#cb52-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-184"><a href="#cb52-184" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd4=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-185"><a href="#cb52-185" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb52-186"><a href="#cb52-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-187"><a href="#cb52-187" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-188"><a href="#cb52-188" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd5=yd5</span>
<span id="cb52-189"><a href="#cb52-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-190"><a href="#cb52-190" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd5=yd5</span>
<span id="cb52-191"><a href="#cb52-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-192"><a href="#cb52-192" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd5=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-193"><a href="#cb52-193" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb52-194"><a href="#cb52-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-195"><a href="#cb52-195" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd5=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-196"><a href="#cb52-196" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb52-197"><a href="#cb52-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-198"><a href="#cb52-198" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-199"><a href="#cb52-199" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd6=yd6</span>
<span id="cb52-200"><a href="#cb52-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-201"><a href="#cb52-201" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd6=yd6</span>
<span id="cb52-202"><a href="#cb52-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-203"><a href="#cb52-203" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd6=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-204"><a href="#cb52-204" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb52-205"><a href="#cb52-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-206"><a href="#cb52-206" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd6=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-207"><a href="#cb52-207" aria-hidden="true" tabindex="-1"></a>(33 <span class="fu">real</span> changes made)</span>
<span id="cb52-208"><a href="#cb52-208" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-209"><a href="#cb52-209" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-210"><a href="#cb52-210" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd7=yd7</span>
<span id="cb52-211"><a href="#cb52-211" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-212"><a href="#cb52-212" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd7=yd7</span>
<span id="cb52-213"><a href="#cb52-213" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-214"><a href="#cb52-214" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd7=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-215"><a href="#cb52-215" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb52-216"><a href="#cb52-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-217"><a href="#cb52-217" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd7=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-218"><a href="#cb52-218" aria-hidden="true" tabindex="-1"></a>(36 <span class="fu">real</span> changes made)</span>
<span id="cb52-219"><a href="#cb52-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-220"><a href="#cb52-220" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-221"><a href="#cb52-221" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd8=yd8</span>
<span id="cb52-222"><a href="#cb52-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-223"><a href="#cb52-223" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd8=yd8</span>
<span id="cb52-224"><a href="#cb52-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-225"><a href="#cb52-225" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd8=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-226"><a href="#cb52-226" aria-hidden="true" tabindex="-1"></a>(7 <span class="fu">real</span> changes made)</span>
<span id="cb52-227"><a href="#cb52-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-228"><a href="#cb52-228" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd8=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-229"><a href="#cb52-229" aria-hidden="true" tabindex="-1"></a>(26 <span class="fu">real</span> changes made)</span>
<span id="cb52-230"><a href="#cb52-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-231"><a href="#cb52-231" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-232"><a href="#cb52-232" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd9=yd9</span>
<span id="cb52-233"><a href="#cb52-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-234"><a href="#cb52-234" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd9=yd9</span>
<span id="cb52-235"><a href="#cb52-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-236"><a href="#cb52-236" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd9=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-237"><a href="#cb52-237" aria-hidden="true" tabindex="-1"></a>(6 <span class="fu">real</span> changes made)</span>
<span id="cb52-238"><a href="#cb52-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-239"><a href="#cb52-239" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd9=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-240"><a href="#cb52-240" aria-hidden="true" tabindex="-1"></a>(29 <span class="fu">real</span> changes made)</span>
<span id="cb52-241"><a href="#cb52-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-242"><a href="#cb52-242" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-243"><a href="#cb52-243" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd10=yd10</span>
<span id="cb52-244"><a href="#cb52-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-245"><a href="#cb52-245" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd10=yd10</span>
<span id="cb52-246"><a href="#cb52-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-247"><a href="#cb52-247" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd10=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-248"><a href="#cb52-248" aria-hidden="true" tabindex="-1"></a>(5 <span class="fu">real</span> changes made)</span>
<span id="cb52-249"><a href="#cb52-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-250"><a href="#cb52-250" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd10=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-251"><a href="#cb52-251" aria-hidden="true" tabindex="-1"></a>(25 <span class="fu">real</span> changes made)</span>
<span id="cb52-252"><a href="#cb52-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-253"><a href="#cb52-253" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-254"><a href="#cb52-254" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd11=yd11</span>
<span id="cb52-255"><a href="#cb52-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-256"><a href="#cb52-256" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd11=yd11</span>
<span id="cb52-257"><a href="#cb52-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-258"><a href="#cb52-258" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd11=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-259"><a href="#cb52-259" aria-hidden="true" tabindex="-1"></a>(6 <span class="fu">real</span> changes made)</span>
<span id="cb52-260"><a href="#cb52-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-261"><a href="#cb52-261" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd11=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-262"><a href="#cb52-262" aria-hidden="true" tabindex="-1"></a>(20 <span class="fu">real</span> changes made)</span>
<span id="cb52-263"><a href="#cb52-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-264"><a href="#cb52-264" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-265"><a href="#cb52-265" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> cyd12=yd12</span>
<span id="cb52-266"><a href="#cb52-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-267"><a href="#cb52-267" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> tyd12=yd12</span>
<span id="cb52-268"><a href="#cb52-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-269"><a href="#cb52-269" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> cyd12=0 <span class="kw">if</span> <span class="dv">type</span>==<span class="st">"JT"</span></span>
<span id="cb52-270"><a href="#cb52-270" aria-hidden="true" tabindex="-1"></a>(5 <span class="fu">real</span> changes made)</span>
<span id="cb52-271"><a href="#cb52-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-272"><a href="#cb52-272" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> tyd12=0 <span class="kw">if</span> <span class="dv">type</span>~=<span class="st">"JT"</span></span>
<span id="cb52-273"><a href="#cb52-273" aria-hidden="true" tabindex="-1"></a>(21 <span class="fu">real</span> changes made)</span>
<span id="cb52-274"><a href="#cb52-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-275"><a href="#cb52-275" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-276"><a href="#cb52-276" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_1</span>
<span id="cb52-277"><a href="#cb52-277" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb52-278"><a href="#cb52-278" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb52-279"><a href="#cb52-279" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 </span></span>
<span id="cb52-280"><a href="#cb52-280" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 </span></span>
<span id="cb52-281"><a href="#cb52-281" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; e11 e12"</span></span>
<span id="cb52-282"><a href="#cb52-282" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb52-283"><a href="#cb52-283" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb52-284"><a href="#cb52-284" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb52-285"><a href="#cb52-285" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb52-286"><a href="#cb52-286" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb52-287"><a href="#cb52-287" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> a8=1</span>
<span id="cb52-288"><a href="#cb52-288" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> a9=1</span>
<span id="cb52-289"><a href="#cb52-289" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> a10=1</span>
<span id="cb52-290"><a href="#cb52-290" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> a11=1</span>
<span id="cb52-291"><a href="#cb52-291" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> a12=1</span>
<span id="cb52-292"><a href="#cb52-292" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b2=.1</span>
<span id="cb52-293"><a href="#cb52-293" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> b3=.1</span>
<span id="cb52-294"><a href="#cb52-294" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> b4=.1</span>
<span id="cb52-295"><a href="#cb52-295" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> b5=.1</span>
<span id="cb52-296"><a href="#cb52-296" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> b6=.1</span>
<span id="cb52-297"><a href="#cb52-297" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> b7=.1</span>
<span id="cb52-298"><a href="#cb52-298" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> b8=.1</span>
<span id="cb52-299"><a href="#cb52-299" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> b9=.1</span>
<span id="cb52-300"><a href="#cb52-300" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> b10=.1</span>
<span id="cb52-301"><a href="#cb52-301" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> b11=.1</span>
<span id="cb52-302"><a href="#cb52-302" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> b12=.1</span>
<span id="cb52-303"><a href="#cb52-303" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> c1=.1</span>
<span id="cb52-304"><a href="#cb52-304" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> c2=.1</span>
<span id="cb52-305"><a href="#cb52-305" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> c3=.1</span>
<span id="cb52-306"><a href="#cb52-306" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> c4=.1</span>
<span id="cb52-307"><a href="#cb52-307" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> c5=.1</span>
<span id="cb52-308"><a href="#cb52-308" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> c6=.1</span>
<span id="cb52-309"><a href="#cb52-309" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> c7=.1</span>
<span id="cb52-310"><a href="#cb52-310" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">global</span> c8=.1</span>
<span id="cb52-311"><a href="#cb52-311" aria-hidden="true" tabindex="-1"></a> 33. <span class="kw">global</span> d1=.1</span>
<span id="cb52-312"><a href="#cb52-312" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">global</span> d2=.1</span>
<span id="cb52-313"><a href="#cb52-313" aria-hidden="true" tabindex="-1"></a> 35. <span class="kw">global</span> d3=.1</span>
<span id="cb52-314"><a href="#cb52-314" aria-hidden="true" tabindex="-1"></a> 36. <span class="kw">global</span> d4=.1</span>
<span id="cb52-315"><a href="#cb52-315" aria-hidden="true" tabindex="-1"></a> 37. <span class="kw">global</span> d5=.1</span>
<span id="cb52-316"><a href="#cb52-316" aria-hidden="true" tabindex="-1"></a> 38. <span class="kw">global</span> d6=.1</span>
<span id="cb52-317"><a href="#cb52-317" aria-hidden="true" tabindex="-1"></a> 39. <span class="kw">global</span> d7=.1</span>
<span id="cb52-318"><a href="#cb52-318" aria-hidden="true" tabindex="-1"></a> 40. <span class="kw">global</span> d8=.1</span>
<span id="cb52-319"><a href="#cb52-319" aria-hidden="true" tabindex="-1"></a> 41. <span class="kw">global</span> e2=.1</span>
<span id="cb52-320"><a href="#cb52-320" aria-hidden="true" tabindex="-1"></a> 42. <span class="kw">global</span> e3=.1</span>
<span id="cb52-321"><a href="#cb52-321" aria-hidden="true" tabindex="-1"></a> 43. <span class="kw">global</span> e4=.1</span>
<span id="cb52-322"><a href="#cb52-322" aria-hidden="true" tabindex="-1"></a> 44. <span class="kw">global</span> e5=.1</span>
<span id="cb52-323"><a href="#cb52-323" aria-hidden="true" tabindex="-1"></a> 45. <span class="kw">global</span> e6=.1</span>
<span id="cb52-324"><a href="#cb52-324" aria-hidden="true" tabindex="-1"></a> 46. <span class="kw">global</span> e7=.1</span>
<span id="cb52-325"><a href="#cb52-325" aria-hidden="true" tabindex="-1"></a> 47. <span class="kw">global</span> e8=.1</span>
<span id="cb52-326"><a href="#cb52-326" aria-hidden="true" tabindex="-1"></a> 48. <span class="kw">global</span> e9=.1</span>
<span id="cb52-327"><a href="#cb52-327" aria-hidden="true" tabindex="-1"></a> 49. <span class="kw">global</span> e10=.1</span>
<span id="cb52-328"><a href="#cb52-328" aria-hidden="true" tabindex="-1"></a> 50. <span class="kw">global</span> e11=.1</span>
<span id="cb52-329"><a href="#cb52-329" aria-hidden="true" tabindex="-1"></a> 51. <span class="kw">global</span> e12=.1</span>
<span id="cb52-330"><a href="#cb52-330" aria-hidden="true" tabindex="-1"></a> 52. <span class="kw">exit</span></span>
<span id="cb52-331"><a href="#cb52-331" aria-hidden="true" tabindex="-1"></a> 53. }</span>
<span id="cb52-332"><a href="#cb52-332" aria-hidden="true" tabindex="-1"></a> 54. </span>
<span id="cb52-333"><a href="#cb52-333" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb52-334"><a href="#cb52-334" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12<span class="co">/*</span></span>
<span id="cb52-335"><a href="#cb52-335" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb52-336"><a href="#cb52-336" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb52-337"><a href="#cb52-337" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb52-338"><a href="#cb52-338" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb52-339"><a href="#cb52-339" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb52-340"><a href="#cb52-340" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb52-341"><a href="#cb52-341" aria-hidden="true" tabindex="-1"></a> 55. </span>
<span id="cb52-342"><a href="#cb52-342" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb52-343"><a href="#cb52-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-344"><a href="#cb52-344" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-345"><a href="#cb52-345" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_1 price</span>
<span id="cb52-346"><a href="#cb52-346" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 404)</span>
<span id="cb52-347"><a href="#cb52-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-348"><a href="#cb52-348" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  3.69e+10</span>
<span id="cb52-349"><a href="#cb52-349" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb52-350"><a href="#cb52-350" aria-hidden="true" tabindex="-1"></a>Iteration 59:  residual SS =  3.48e+08</span>
<span id="cb52-351"><a href="#cb52-351" aria-hidden="true" tabindex="-1"></a>Iteration 60:  residual SS =  3.48e+08</span>
<span id="cb52-352"><a href="#cb52-352" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-353"><a href="#cb52-353" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       404</span>
<span id="cb52-354"><a href="#cb52-354" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 45,   358) =    134.73</span>
<span id="cb52-355"><a href="#cb52-355" aria-hidden="true" tabindex="-1"></a>       Model |  5.8946e+09    45   130990377         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb52-356"><a href="#cb52-356" aria-hidden="true" tabindex="-1"></a>    Residual |   348069386   358  972260.856         R-squared     =    0.9442</span>
<span id="cb52-357"><a href="#cb52-357" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9372</span>
<span id="cb52-358"><a href="#cb52-358" aria-hidden="true" tabindex="-1"></a>       Total |  6.2426e+09   403  15490412.8         Root MSE      =  986.0329</span>
<span id="cb52-359"><a href="#cb52-359" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     =  6667.767</span>
<span id="cb52-360"><a href="#cb52-360" aria-hidden="true" tabindex="-1"></a>(ct_1)</span>
<span id="cb52-361"><a href="#cb52-361" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb52-362"><a href="#cb52-362" aria-hidden="true" tabindex="-1"></a>       price |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb52-363"><a href="#cb52-363" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb52-364"><a href="#cb52-364" aria-hidden="true" tabindex="-1"></a>          a3 |  -591.4105   1021.533    -0.58   0.563    -2600.371     1417.55</span>
<span id="cb52-365"><a href="#cb52-365" aria-hidden="true" tabindex="-1"></a>          a4 |  -1145.046   1057.554    -1.08   0.280    -3224.844    934.7527</span>
<span id="cb52-366"><a href="#cb52-366" aria-hidden="true" tabindex="-1"></a>          a5 |  -824.1875    1016.79    -0.81   0.418    -2823.819    1175.444</span>
<span id="cb52-367"><a href="#cb52-367" aria-hidden="true" tabindex="-1"></a>          a6 |  -592.6532   1010.202    -0.59   0.558    -2579.329    1394.023</span>
<span id="cb52-368"><a href="#cb52-368" aria-hidden="true" tabindex="-1"></a>          a7 |  -1306.657     1083.9    -1.21   0.229    -3438.268    824.9532</span>
<span id="cb52-369"><a href="#cb52-369" aria-hidden="true" tabindex="-1"></a>          a8 |  -98.11828   1087.933    -0.09   0.928    -2237.661    2041.425</span>
<span id="cb52-370"><a href="#cb52-370" aria-hidden="true" tabindex="-1"></a>          a9 |  -257.0587   1177.715    -0.22   0.827    -2573.168     2059.05</span>
<span id="cb52-371"><a href="#cb52-371" aria-hidden="true" tabindex="-1"></a>         a10 |  -413.3716   1310.795    -0.32   0.753    -2991.198    2164.455</span>
<span id="cb52-372"><a href="#cb52-372" aria-hidden="true" tabindex="-1"></a>         a11 |  -1220.982   1430.616    -0.85   0.394     -4034.45    1592.486</span>
<span id="cb52-373"><a href="#cb52-373" aria-hidden="true" tabindex="-1"></a>         a12 |  -1076.411   1450.708    -0.74   0.459    -3929.392    1776.569</span>
<span id="cb52-374"><a href="#cb52-374" aria-hidden="true" tabindex="-1"></a>          b2 |   .0197206   .0474133     0.42   0.678    -.0735229    .1129641</span>
<span id="cb52-375"><a href="#cb52-375" aria-hidden="true" tabindex="-1"></a>          b3 |   .2183407   .1415785     1.54   0.124    -.0600893    .4967707</span>
<span id="cb52-376"><a href="#cb52-376" aria-hidden="true" tabindex="-1"></a>          b4 |   .3398839   .1306741     2.60   0.010     .0828985    .5968693</span>
<span id="cb52-377"><a href="#cb52-377" aria-hidden="true" tabindex="-1"></a>          b5 |     .30743    .128895     2.39   0.018     .0539436    .5609165</span>
<span id="cb52-378"><a href="#cb52-378" aria-hidden="true" tabindex="-1"></a>          b6 |    .338236   .1254585     2.70   0.007     .0915077    .5849643</span>
<span id="cb52-379"><a href="#cb52-379" aria-hidden="true" tabindex="-1"></a>          b7 |   .4292664   .1225126     3.50   0.001     .1883316    .6702011</span>
<span id="cb52-380"><a href="#cb52-380" aria-hidden="true" tabindex="-1"></a>          b8 |   .3855295   .1262504     3.05   0.002     .1372438    .6338152</span>
<span id="cb52-381"><a href="#cb52-381" aria-hidden="true" tabindex="-1"></a>          b9 |   .4743625   .1264804     3.75   0.000     .2256246    .7231004</span>
<span id="cb52-382"><a href="#cb52-382" aria-hidden="true" tabindex="-1"></a>         b10 |   .5337515   .1278549     4.17   0.000     .2823104    .7851925</span>
<span id="cb52-383"><a href="#cb52-383" aria-hidden="true" tabindex="-1"></a>         b11 |   .6487194   .1271098     5.10   0.000     .3987437    .8986951</span>
<span id="cb52-384"><a href="#cb52-384" aria-hidden="true" tabindex="-1"></a>         b12 |   .6188886   .1311527     4.72   0.000      .360962    .8768152</span>
<span id="cb52-385"><a href="#cb52-385" aria-hidden="true" tabindex="-1"></a>          c1 |   .4598504   .0886104     5.19   0.000      .285588    .6341127</span>
<span id="cb52-386"><a href="#cb52-386" aria-hidden="true" tabindex="-1"></a>          c2 |   .1780578   .0341819     5.21   0.000     .1108352    .2452803</span>
<span id="cb52-387"><a href="#cb52-387" aria-hidden="true" tabindex="-1"></a>          c3 |  -.3850267   .0481769    -7.99   0.000     -.479772   -.2902814</span>
<span id="cb52-388"><a href="#cb52-388" aria-hidden="true" tabindex="-1"></a>          c4 |   .2680433   .0393044     6.82   0.000     .1907467    .3453399</span>
<span id="cb52-389"><a href="#cb52-389" aria-hidden="true" tabindex="-1"></a>          c5 |   .0679777   .0194236     3.50   0.001      .029779    .1061764</span>
<span id="cb52-390"><a href="#cb52-390" aria-hidden="true" tabindex="-1"></a>          c6 |   .0932556    .021253     4.39   0.000     .0514591     .135052</span>
<span id="cb52-391"><a href="#cb52-391" aria-hidden="true" tabindex="-1"></a>          c7 |   .1534133    .021252     7.22   0.000     .1116189    .1952077</span>
<span id="cb52-392"><a href="#cb52-392" aria-hidden="true" tabindex="-1"></a>          c8 |   8.572183   .0409525   209.32   0.000     8.491646    8.652721</span>
<span id="cb52-393"><a href="#cb52-393" aria-hidden="true" tabindex="-1"></a>          d1 |   1.024883   .2198255     4.66   0.000     .5925712    1.457194</span>
<span id="cb52-394"><a href="#cb52-394" aria-hidden="true" tabindex="-1"></a>          d2 |   .5861134   .7924544     0.74   0.460    -.9723374    2.144564</span>
<span id="cb52-395"><a href="#cb52-395" aria-hidden="true" tabindex="-1"></a>          d3 |   -.149842   .2155522    -0.70   0.487    -.5737496    .2740656</span>
<span id="cb52-396"><a href="#cb52-396" aria-hidden="true" tabindex="-1"></a>          d4 |   1.150419    .347234     3.31   0.001     .4675444    1.833294</span>
<span id="cb52-397"><a href="#cb52-397" aria-hidden="true" tabindex="-1"></a>          d5 |   .3132963   .1385789     2.26   0.024     .0407654    .5858273</span>
<span id="cb52-398"><a href="#cb52-398" aria-hidden="true" tabindex="-1"></a>          d6 |   .0163816   .1407749     0.12   0.907     -.260468    .2932313</span>
<span id="cb52-399"><a href="#cb52-399" aria-hidden="true" tabindex="-1"></a>          d7 |   226.2423   4.491789    50.37   0.000     217.4087    235.0759</span>
<span id="cb52-400"><a href="#cb52-400" aria-hidden="true" tabindex="-1"></a>          d8 |  -223.6678          .        .       .            .           .</span>
<span id="cb52-401"><a href="#cb52-401" aria-hidden="true" tabindex="-1"></a>          e2 |  -9.321882          .        .       .            .           .</span>
<span id="cb52-402"><a href="#cb52-402" aria-hidden="true" tabindex="-1"></a>          e3 |   225.8105   4.416818    51.13   0.000     217.1244    234.4967</span>
<span id="cb52-403"><a href="#cb52-403" aria-hidden="true" tabindex="-1"></a>          e4 |    225.818   4.410297    51.20   0.000     217.1447    234.4914</span>
<span id="cb52-404"><a href="#cb52-404" aria-hidden="true" tabindex="-1"></a>          e5 |   225.3464   4.385453    51.38   0.000      216.722    233.9709</span>
<span id="cb52-405"><a href="#cb52-405" aria-hidden="true" tabindex="-1"></a>          e6 |   225.4068   4.379008    51.47   0.000      216.795    234.0186</span>
<span id="cb52-406"><a href="#cb52-406" aria-hidden="true" tabindex="-1"></a>          e7 |   225.3594   4.388533    51.35   0.000     216.7288    233.9899</span>
<span id="cb52-407"><a href="#cb52-407" aria-hidden="true" tabindex="-1"></a>          e8 |   225.6487   4.417134    51.08   0.000     216.9619    234.3355</span>
<span id="cb52-408"><a href="#cb52-408" aria-hidden="true" tabindex="-1"></a>          e9 |   225.5402   4.407819    51.17   0.000     216.8718    234.2087</span>
<span id="cb52-409"><a href="#cb52-409" aria-hidden="true" tabindex="-1"></a>         e10 |   226.0232   4.412848    51.22   0.000     217.3448    234.7015</span>
<span id="cb52-410"><a href="#cb52-410" aria-hidden="true" tabindex="-1"></a>         e11 |   226.0775   4.462525    50.66   0.000     217.3015    234.8536</span>
<span id="cb52-411"><a href="#cb52-411" aria-hidden="true" tabindex="-1"></a>         e12 |    226.117   4.421014    51.15   0.000     217.4226    234.8115</span>
<span id="cb52-412"><a href="#cb52-412" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb52-413"><a href="#cb52-413" aria-hidden="true" tabindex="-1"></a>* Parameter e2 taken <span class="kw">as</span> constant term <span class="kw">in</span> <span class="kw">model</span> &amp; ANOVA <span class="kw">table</span></span>
<span id="cb52-414"><a href="#cb52-414" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb52-415"><a href="#cb52-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-416"><a href="#cb52-416" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-417"><a href="#cb52-417" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> winv=1/<span class="fu">exp</span>(_b[b2]*cyd2+_b[b3]*cyd3+_b[b4]*cyd4+_b[b5]*cyd5+_b[b6]*cyd6+_b[b7</span>
<span id="cb52-418"><a href="#cb52-418" aria-hidden="true" tabindex="-1"></a>&gt; ]*cyd7<span class="co">/*</span></span>
<span id="cb52-419"><a href="#cb52-419" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[b8]*cyd8+_b[b9]*cyd9+_b[b10]*cyd10+_b[b11]*cyd11+_b[b12]*cyd12<span class="co">/*</span></span>
<span id="cb52-420"><a href="#cb52-420" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c1]*wght_c+_b[c2]*wdth_c+_b[c3]*hght_c+_b[c4]*hp_c+_b[c5]*tran_c+_b[c6]*ps</span>
<span id="cb52-421"><a href="#cb52-421" aria-hidden="true" tabindex="-1"></a>&gt; _c<span class="co">/*</span></span>
<span id="cb52-422"><a href="#cb52-422" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[c7]*ac_c+_b[c8])</span>
<span id="cb52-423"><a href="#cb52-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-424"><a href="#cb52-424" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-425"><a href="#cb52-425" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> winv=1/<span class="fu">exp</span>(_b[e2]*tyd2+_b[e3]*tyd3+_b[e4]*tyd4+_b[e5]*tyd5+_b[e6]*tyd6<span class="co">/*</span></span>
<span id="cb52-426"><a href="#cb52-426" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[e7]*tyd7+_b[e8]*tyd8+_b[e9]*tyd9+_b[e10]*tyd10+_b[e11]*tyd11+_b[e12]*tyd12</span>
<span id="cb52-427"><a href="#cb52-427" aria-hidden="true" tabindex="-1"></a>&gt; <span class="co">/*</span></span>
<span id="cb52-428"><a href="#cb52-428" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d1]*wght_t+_b[d2]*wdth_t+_b[d3]*hght_t+_b[d4]*hp_t<span class="co">/*</span></span>
<span id="cb52-429"><a href="#cb52-429" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+_b[d5]*tran_t+_b[d6]*ps_t+_b[d7]*four_t+_b[d8]) <span class="kw">if</span> ve==2</span>
<span id="cb52-430"><a href="#cb52-430" aria-hidden="true" tabindex="-1"></a>(120 <span class="fu">real</span> changes made, 18 to <span class="fu">missing</span>)</span>
<span id="cb52-431"><a href="#cb52-431" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-432"><a href="#cb52-432" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-433"><a href="#cb52-433" aria-hidden="true" tabindex="-1"></a>. <span class="kw">gen</span> nprice=price*winv</span>
<span id="cb52-434"><a href="#cb52-434" aria-hidden="true" tabindex="-1"></a>(18 <span class="fu">missing</span> <span class="kw">values</span> generated)</span>
<span id="cb52-435"><a href="#cb52-435" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-436"><a href="#cb52-436" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-437"><a href="#cb52-437" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-438"><a href="#cb52-438" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">define</span> nlct_2</span>
<span id="cb52-439"><a href="#cb52-439" aria-hidden="true" tabindex="-1"></a>  1. <span class="kw">version</span> 7.0</span>
<span id="cb52-440"><a href="#cb52-440" aria-hidden="true" tabindex="-1"></a>  2. <span class="kw">if</span> <span class="st">"`1'"</span>==<span class="st">"?"</span>{</span>
<span id="cb52-441"><a href="#cb52-441" aria-hidden="true" tabindex="-1"></a>  3. <span class="kw">global</span> S_1 <span class="st">"a3 a4 a5 a6 a7 a8 a9 a10 a11 a12 b2 b3 b4 b5 b6 b7 b8 b9 b10 b11 </span></span>
<span id="cb52-442"><a href="#cb52-442" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; b12 c1 c2 c3 c4 c5 c6 c7 c8 d1 d2 d3 d4 d5 d6 d7 d8 e2 e3 e4 e5 e6 e7 e8 e9 e10 </span></span>
<span id="cb52-443"><a href="#cb52-443" aria-hidden="true" tabindex="-1"></a><span class="st">&gt; e11 e12"</span></span>
<span id="cb52-444"><a href="#cb52-444" aria-hidden="true" tabindex="-1"></a>  4. <span class="kw">global</span> a3=1</span>
<span id="cb52-445"><a href="#cb52-445" aria-hidden="true" tabindex="-1"></a>  5. <span class="kw">global</span> a4=1</span>
<span id="cb52-446"><a href="#cb52-446" aria-hidden="true" tabindex="-1"></a>  6. <span class="kw">global</span> a5=1</span>
<span id="cb52-447"><a href="#cb52-447" aria-hidden="true" tabindex="-1"></a>  7. <span class="kw">global</span> a6=1</span>
<span id="cb52-448"><a href="#cb52-448" aria-hidden="true" tabindex="-1"></a>  8. <span class="kw">global</span> a7=1</span>
<span id="cb52-449"><a href="#cb52-449" aria-hidden="true" tabindex="-1"></a>  9. <span class="kw">global</span> a8=1</span>
<span id="cb52-450"><a href="#cb52-450" aria-hidden="true" tabindex="-1"></a> 10. <span class="kw">global</span> a9=1</span>
<span id="cb52-451"><a href="#cb52-451" aria-hidden="true" tabindex="-1"></a> 11. <span class="kw">global</span> a10=1</span>
<span id="cb52-452"><a href="#cb52-452" aria-hidden="true" tabindex="-1"></a> 12. <span class="kw">global</span> a11=1</span>
<span id="cb52-453"><a href="#cb52-453" aria-hidden="true" tabindex="-1"></a> 13. <span class="kw">global</span> a12=1</span>
<span id="cb52-454"><a href="#cb52-454" aria-hidden="true" tabindex="-1"></a> 14. <span class="kw">global</span> b2=.1</span>
<span id="cb52-455"><a href="#cb52-455" aria-hidden="true" tabindex="-1"></a> 15. <span class="kw">global</span> b3=.1</span>
<span id="cb52-456"><a href="#cb52-456" aria-hidden="true" tabindex="-1"></a> 16. <span class="kw">global</span> b4=.1</span>
<span id="cb52-457"><a href="#cb52-457" aria-hidden="true" tabindex="-1"></a> 17. <span class="kw">global</span> b5=.1</span>
<span id="cb52-458"><a href="#cb52-458" aria-hidden="true" tabindex="-1"></a> 18. <span class="kw">global</span> b6=.1</span>
<span id="cb52-459"><a href="#cb52-459" aria-hidden="true" tabindex="-1"></a> 19. <span class="kw">global</span> b7=.1</span>
<span id="cb52-460"><a href="#cb52-460" aria-hidden="true" tabindex="-1"></a> 20. <span class="kw">global</span> b8=.1</span>
<span id="cb52-461"><a href="#cb52-461" aria-hidden="true" tabindex="-1"></a> 21. <span class="kw">global</span> b9=.1</span>
<span id="cb52-462"><a href="#cb52-462" aria-hidden="true" tabindex="-1"></a> 22. <span class="kw">global</span> b10=.1</span>
<span id="cb52-463"><a href="#cb52-463" aria-hidden="true" tabindex="-1"></a> 23. <span class="kw">global</span> b11=.1</span>
<span id="cb52-464"><a href="#cb52-464" aria-hidden="true" tabindex="-1"></a> 24. <span class="kw">global</span> b12=.1</span>
<span id="cb52-465"><a href="#cb52-465" aria-hidden="true" tabindex="-1"></a> 25. <span class="kw">global</span> c1=.1</span>
<span id="cb52-466"><a href="#cb52-466" aria-hidden="true" tabindex="-1"></a> 26. <span class="kw">global</span> c2=.1</span>
<span id="cb52-467"><a href="#cb52-467" aria-hidden="true" tabindex="-1"></a> 27. <span class="kw">global</span> c3=.1</span>
<span id="cb52-468"><a href="#cb52-468" aria-hidden="true" tabindex="-1"></a> 28. <span class="kw">global</span> c4=.1</span>
<span id="cb52-469"><a href="#cb52-469" aria-hidden="true" tabindex="-1"></a> 29. <span class="kw">global</span> c5=.1</span>
<span id="cb52-470"><a href="#cb52-470" aria-hidden="true" tabindex="-1"></a> 30. <span class="kw">global</span> c6=.1</span>
<span id="cb52-471"><a href="#cb52-471" aria-hidden="true" tabindex="-1"></a> 31. <span class="kw">global</span> c7=.1</span>
<span id="cb52-472"><a href="#cb52-472" aria-hidden="true" tabindex="-1"></a> 32. <span class="kw">global</span> c8=.1</span>
<span id="cb52-473"><a href="#cb52-473" aria-hidden="true" tabindex="-1"></a> 33. <span class="kw">global</span> d1=.1</span>
<span id="cb52-474"><a href="#cb52-474" aria-hidden="true" tabindex="-1"></a> 34. <span class="kw">global</span> d2=.1</span>
<span id="cb52-475"><a href="#cb52-475" aria-hidden="true" tabindex="-1"></a> 35. <span class="kw">global</span> d3=.1</span>
<span id="cb52-476"><a href="#cb52-476" aria-hidden="true" tabindex="-1"></a> 36. <span class="kw">global</span> d4=.1</span>
<span id="cb52-477"><a href="#cb52-477" aria-hidden="true" tabindex="-1"></a> 37. <span class="kw">global</span> d5=.1</span>
<span id="cb52-478"><a href="#cb52-478" aria-hidden="true" tabindex="-1"></a> 38. <span class="kw">global</span> d6=.1</span>
<span id="cb52-479"><a href="#cb52-479" aria-hidden="true" tabindex="-1"></a> 39. <span class="kw">global</span> d7=.1</span>
<span id="cb52-480"><a href="#cb52-480" aria-hidden="true" tabindex="-1"></a> 40. <span class="kw">global</span> d8=.1</span>
<span id="cb52-481"><a href="#cb52-481" aria-hidden="true" tabindex="-1"></a> 41. <span class="kw">global</span> e2=.1</span>
<span id="cb52-482"><a href="#cb52-482" aria-hidden="true" tabindex="-1"></a> 42. <span class="kw">global</span> e3=.1</span>
<span id="cb52-483"><a href="#cb52-483" aria-hidden="true" tabindex="-1"></a> 43. <span class="kw">global</span> e4=.1</span>
<span id="cb52-484"><a href="#cb52-484" aria-hidden="true" tabindex="-1"></a> 44. <span class="kw">global</span> e5=.1</span>
<span id="cb52-485"><a href="#cb52-485" aria-hidden="true" tabindex="-1"></a> 45. <span class="kw">global</span> e6=.1</span>
<span id="cb52-486"><a href="#cb52-486" aria-hidden="true" tabindex="-1"></a> 46. <span class="kw">global</span> e7=.1</span>
<span id="cb52-487"><a href="#cb52-487" aria-hidden="true" tabindex="-1"></a> 47. <span class="kw">global</span> e8=.1</span>
<span id="cb52-488"><a href="#cb52-488" aria-hidden="true" tabindex="-1"></a> 48. <span class="kw">global</span> e9=.1</span>
<span id="cb52-489"><a href="#cb52-489" aria-hidden="true" tabindex="-1"></a> 49. <span class="kw">global</span> e10=.1</span>
<span id="cb52-490"><a href="#cb52-490" aria-hidden="true" tabindex="-1"></a> 50. <span class="kw">global</span> e11=.1</span>
<span id="cb52-491"><a href="#cb52-491" aria-hidden="true" tabindex="-1"></a> 51. <span class="kw">global</span> e12=.1</span>
<span id="cb52-492"><a href="#cb52-492" aria-hidden="true" tabindex="-1"></a> 52. <span class="kw">exit</span></span>
<span id="cb52-493"><a href="#cb52-493" aria-hidden="true" tabindex="-1"></a> 53. }</span>
<span id="cb52-494"><a href="#cb52-494" aria-hidden="true" tabindex="-1"></a> 54. </span>
<span id="cb52-495"><a href="#cb52-495" aria-hidden="true" tabindex="-1"></a>. <span class="kw">replace</span> <span class="ot">`1'</span>=winv*(<span class="ot">$a3</span>*cyd3+<span class="ot">$a4</span>*cyd4+<span class="ot">$a5</span>*cyd5+<span class="ot">$a6</span>*cyd6+<span class="ot">$a7</span>*cyd7<span class="co">/*</span></span>
<span id="cb52-496"><a href="#cb52-496" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$a8</span>*cyd8+<span class="ot">$a9</span>*cyd9+<span class="ot">$a10</span>*cyd10+<span class="ot">$a11</span>*cyd11+<span class="ot">$a12</span>*cyd12)<span class="co">/*</span></span>
<span id="cb52-497"><a href="#cb52-497" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+winv*<span class="fu">exp</span>(<span class="ot">$b2</span>*cyd2+<span class="ot">$b3</span>*cyd3+<span class="ot">$b4</span>*cyd4+<span class="ot">$b5</span>*cyd5+<span class="ot">$b6</span>*cyd6+<span class="ot">$b7</span>*cyd7<span class="co">/*</span></span>
<span id="cb52-498"><a href="#cb52-498" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$b8</span>*cyd8+<span class="ot">$b9</span>*cyd9+<span class="ot">$b10</span>*cyd10+<span class="ot">$b11</span>*cyd11+<span class="ot">$b12</span>*cyd12<span class="co">/*</span></span>
<span id="cb52-499"><a href="#cb52-499" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c1</span>*wght_c+<span class="ot">$c2</span>*wdth_c+<span class="ot">$c3</span>*hght_c+<span class="ot">$c4</span>*hp_c+<span class="ot">$c5</span>*tran_c+<span class="ot">$c6</span>*ps_c+<span class="ot">$c7</span>*ac_c<span class="co">/*</span></span>
<span id="cb52-500"><a href="#cb52-500" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$c8</span>)+winv*<span class="fu">exp</span>(<span class="ot">$e2</span>*tyd2+<span class="ot">$e3</span>*tyd3+<span class="ot">$e4</span>*tyd4+<span class="ot">$e5</span>*tyd5+<span class="ot">$e6</span>*tyd6+<span class="ot">$e7</span>*tyd7<span class="co">/*</span></span>
<span id="cb52-501"><a href="#cb52-501" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$e8</span>*tyd8+<span class="ot">$e9</span>*tyd9+<span class="ot">$e10</span>*tyd10+<span class="ot">$e11</span>*tyd11+<span class="ot">$e12</span>*tyd12<span class="co">/*</span></span>
<span id="cb52-502"><a href="#cb52-502" aria-hidden="true" tabindex="-1"></a><span class="co">&gt; */</span>+<span class="ot">$d1</span>*wght_t+<span class="ot">$d2</span>*wdth_t+<span class="ot">$d3</span>*hght_t+<span class="ot">$d4</span>*hp_t+<span class="ot">$d5</span>*tran_t+<span class="ot">$d6</span>*ps_t+<span class="ot">$d7</span>*four_t+<span class="ot">$d8</span>)</span>
<span id="cb52-503"><a href="#cb52-503" aria-hidden="true" tabindex="-1"></a> 55. </span>
<span id="cb52-504"><a href="#cb52-504" aria-hidden="true" tabindex="-1"></a>. <span class="kw">end</span></span>
<span id="cb52-505"><a href="#cb52-505" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-506"><a href="#cb52-506" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-507"><a href="#cb52-507" aria-hidden="true" tabindex="-1"></a>. <span class="kw">nl</span> ct_2 nprice</span>
<span id="cb52-508"><a href="#cb52-508" aria-hidden="true" tabindex="-1"></a>(<span class="kw">obs</span> = 386)</span>
<span id="cb52-509"><a href="#cb52-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-510"><a href="#cb52-510" aria-hidden="true" tabindex="-1"></a>Iteration 0:   residual SS =  3793.244</span>
<span id="cb52-511"><a href="#cb52-511" aria-hidden="true" tabindex="-1"></a>...</span>
<span id="cb52-512"><a href="#cb52-512" aria-hidden="true" tabindex="-1"></a>Iteration 51:  residual SS =  11.84729</span>
<span id="cb52-513"><a href="#cb52-513" aria-hidden="true" tabindex="-1"></a>Iteration 52:  residual SS =  11.84729</span>
<span id="cb52-514"><a href="#cb52-514" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-515"><a href="#cb52-515" aria-hidden="true" tabindex="-1"></a>      Source |       SS       df       MS            Number <span class="kw">of</span> <span class="kw">obs</span> =       386</span>
<span id="cb52-516"><a href="#cb52-516" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         <span class="fu">F</span>( 46,   339) =   1272.95</span>
<span id="cb52-517"><a href="#cb52-517" aria-hidden="true" tabindex="-1"></a>       Model |  2046.39509    46  44.4868497         Prob &gt; <span class="fu">F</span>      =    0.0000</span>
<span id="cb52-518"><a href="#cb52-518" aria-hidden="true" tabindex="-1"></a>    Residual |  11.8472856   339  .034947745         R-squared     =    0.9942</span>
<span id="cb52-519"><a href="#cb52-519" aria-hidden="true" tabindex="-1"></a>-------------+------------------------------         Adj R-squared =    0.9935</span>
<span id="cb52-520"><a href="#cb52-520" aria-hidden="true" tabindex="-1"></a>       Total |  2058.24237   385  5.34608409         Root MSE      =  .1869432</span>
<span id="cb52-521"><a href="#cb52-521" aria-hidden="true" tabindex="-1"></a>                                                     Res. <span class="kw">dev</span>.     = -249.3025</span>
<span id="cb52-522"><a href="#cb52-522" aria-hidden="true" tabindex="-1"></a>(ct_2)</span>
<span id="cb52-523"><a href="#cb52-523" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb52-524"><a href="#cb52-524" aria-hidden="true" tabindex="-1"></a>      nprice |      Coef.   Std. Err.      t    P&gt;|t|     [95% Conf. Interval]</span>
<span id="cb52-525"><a href="#cb52-525" aria-hidden="true" tabindex="-1"></a>-------------+----------------------------------------------------------------</span>
<span id="cb52-526"><a href="#cb52-526" aria-hidden="true" tabindex="-1"></a>          a3 |   129.1587   649.8698     0.20   0.843    -1149.127    1407.444</span>
<span id="cb52-527"><a href="#cb52-527" aria-hidden="true" tabindex="-1"></a>          a4 |  -332.9346   853.5884    -0.39   0.697    -2011.931    1346.062</span>
<span id="cb52-528"><a href="#cb52-528" aria-hidden="true" tabindex="-1"></a>          a5 |  -39.00799   816.3593    -0.05   0.962    -1644.776     1566.76</span>
<span id="cb52-529"><a href="#cb52-529" aria-hidden="true" tabindex="-1"></a>          a6 |  -49.30975   887.7125    -0.06   0.956    -1795.428    1696.809</span>
<span id="cb52-530"><a href="#cb52-530" aria-hidden="true" tabindex="-1"></a>          a7 |  -251.5048   1055.969    -0.24   0.812    -2328.582    1825.572</span>
<span id="cb52-531"><a href="#cb52-531" aria-hidden="true" tabindex="-1"></a>          a8 |   475.7476   1105.123     0.43   0.667    -1698.014    2649.509</span>
<span id="cb52-532"><a href="#cb52-532" aria-hidden="true" tabindex="-1"></a>          a9 |   1305.252   1054.533     1.24   0.217    -769.0007    3379.505</span>
<span id="cb52-533"><a href="#cb52-533" aria-hidden="true" tabindex="-1"></a>         a10 |   1500.556   1475.416     1.02   0.310    -1401.567    4402.679</span>
<span id="cb52-534"><a href="#cb52-534" aria-hidden="true" tabindex="-1"></a>         a11 |   275.3094    1918.11     0.14   0.886    -3497.586    4048.205</span>
<span id="cb52-535"><a href="#cb52-535" aria-hidden="true" tabindex="-1"></a>         a12 |  -369.0768   2256.641    -0.16   0.870    -4807.859    4069.706</span>
<span id="cb52-536"><a href="#cb52-536" aria-hidden="true" tabindex="-1"></a>          b2 |  -.0382212   .0476313    -0.80   0.423    -.1319113    .0554688</span>
<span id="cb52-537"><a href="#cb52-537" aria-hidden="true" tabindex="-1"></a>          b3 |   .1007584   .1545476     0.65   0.515    -.2032345    .4047514</span>
<span id="cb52-538"><a href="#cb52-538" aria-hidden="true" tabindex="-1"></a>          b4 |   .3643006   .1549828     2.35   0.019     .0594514    .6691497</span>
<span id="cb52-539"><a href="#cb52-539" aria-hidden="true" tabindex="-1"></a>          b5 |   .3350521   .1522164     2.20   0.028     .0356445    .6344596</span>
<span id="cb52-540"><a href="#cb52-540" aria-hidden="true" tabindex="-1"></a>          b6 |    .448507   .1460037     3.07   0.002     .1613198    .7356943</span>
<span id="cb52-541"><a href="#cb52-541" aria-hidden="true" tabindex="-1"></a>          b7 |   .5008198   .1605704     3.12   0.002     .1849799    .8166597</span>
<span id="cb52-542"><a href="#cb52-542" aria-hidden="true" tabindex="-1"></a>          b8 |   .5229822   .1722726     3.04   0.003     .1841243      .86184</span>
<span id="cb52-543"><a href="#cb52-543" aria-hidden="true" tabindex="-1"></a>          b9 |   .3892165   .1802644     2.16   0.032     .0346389    .7437941</span>
<span id="cb52-544"><a href="#cb52-544" aria-hidden="true" tabindex="-1"></a>         b10 |   .5894213   .2041663     2.89   0.004     .1878289    .9910137</span>
<span id="cb52-545"><a href="#cb52-545" aria-hidden="true" tabindex="-1"></a>         b11 |   .8546564    .199235     4.29   0.000      .462764    1.246549</span>
<span id="cb52-546"><a href="#cb52-546" aria-hidden="true" tabindex="-1"></a>         b12 |   1.000789   .1993482     5.02   0.000     .6086733    1.392904</span>
<span id="cb52-547"><a href="#cb52-547" aria-hidden="true" tabindex="-1"></a>          c1 |   1.059199   .3598464     2.94   0.003     .3513857    1.767012</span>
<span id="cb52-548"><a href="#cb52-548" aria-hidden="true" tabindex="-1"></a>          c2 |   .1615223   .1132255     1.43   0.155    -.0611907    .3842354</span>
<span id="cb52-549"><a href="#cb52-549" aria-hidden="true" tabindex="-1"></a>          c3 |  -.6524711   .2018085    -3.23   0.001    -1.049426   -.2555164</span>
<span id="cb52-550"><a href="#cb52-550" aria-hidden="true" tabindex="-1"></a>          c4 |   .2672449   .1289842     2.07   0.039     .0135347    .5209551</span>
<span id="cb52-551"><a href="#cb52-551" aria-hidden="true" tabindex="-1"></a>          c5 |   .2030882   .0598443     3.39   0.001     .0853753    .3208011</span>
<span id="cb52-552"><a href="#cb52-552" aria-hidden="true" tabindex="-1"></a>          c6 |   .2113444   .0828113     2.55   0.011     .0484557    .3742331</span>
<span id="cb52-553"><a href="#cb52-553" aria-hidden="true" tabindex="-1"></a>          c7 |   .1550375   .0660018     2.35   0.019     .0252129    .2848621</span>
<span id="cb52-554"><a href="#cb52-554" aria-hidden="true" tabindex="-1"></a>          c8 |   8.340437    .114401    72.91   0.000     8.115411    8.565462</span>
<span id="cb52-555"><a href="#cb52-555" aria-hidden="true" tabindex="-1"></a>          d1 |   1.111578   .2140655     5.19   0.000     .6905136    1.532641</span>
<span id="cb52-556"><a href="#cb52-556" aria-hidden="true" tabindex="-1"></a>          d2 |  -.4348055    .168151    -2.59   0.010    -.7655563   -.1040547</span>
<span id="cb52-557"><a href="#cb52-557" aria-hidden="true" tabindex="-1"></a>          d3 |   .0754878   .0932058     0.81   0.419    -.1078468    .2588223</span>
<span id="cb52-558"><a href="#cb52-558" aria-hidden="true" tabindex="-1"></a>          d4 |    .559007    .181628     3.08   0.002     .2017472    .9162667</span>
<span id="cb52-559"><a href="#cb52-559" aria-hidden="true" tabindex="-1"></a>          d5 |   .1239908   .0427616     2.90   0.004     .0398792    .2081023</span>
<span id="cb52-560"><a href="#cb52-560" aria-hidden="true" tabindex="-1"></a>          d6 |  -.0185416   .0827602    -0.22   0.823    -.1813297    .1442466</span>
<span id="cb52-561"><a href="#cb52-561" aria-hidden="true" tabindex="-1"></a>          d7 |  -.5680364   .7627409    -0.74   0.457    -2.068338    .9322647</span>
<span id="cb52-562"><a href="#cb52-562" aria-hidden="true" tabindex="-1"></a>          d8 |   7.995761   .1883688    42.45   0.000     7.625242     8.36628</span>
<span id="cb52-563"><a href="#cb52-563" aria-hidden="true" tabindex="-1"></a>          e2 |         .1          .        .       .            .           .</span>
<span id="cb52-564"><a href="#cb52-564" aria-hidden="true" tabindex="-1"></a>          e3 |  -.3274455   .7327471    -0.45   0.655    -1.768749    1.113858</span>
<span id="cb52-565"><a href="#cb52-565" aria-hidden="true" tabindex="-1"></a>          e4 |  -.3156744   .7324389    -0.43   0.667    -1.756372    1.125023</span>
<span id="cb52-566"><a href="#cb52-566" aria-hidden="true" tabindex="-1"></a>          e5 |  -.5595854   .7452185    -0.75   0.453     -2.02542    .9062493</span>
<span id="cb52-567"><a href="#cb52-567" aria-hidden="true" tabindex="-1"></a>          e6 |  -.5473584   .7454929    -0.73   0.463    -2.013733    .9190161</span>
<span id="cb52-568"><a href="#cb52-568" aria-hidden="true" tabindex="-1"></a>          e7 |  -.6603122   .7473731    -0.88   0.378    -2.130385    .8097605</span>
<span id="cb52-569"><a href="#cb52-569" aria-hidden="true" tabindex="-1"></a>          e8 |  -.4940828   .7382813    -0.67   0.504    -1.946272    .9581066</span>
<span id="cb52-570"><a href="#cb52-570" aria-hidden="true" tabindex="-1"></a>          e9 |  -.4857295   .7335855    -0.66   0.508    -1.928682    .9572232</span>
<span id="cb52-571"><a href="#cb52-571" aria-hidden="true" tabindex="-1"></a>         e10 |  -.2352299   .7308603    -0.32   0.748    -1.672822    1.202362</span>
<span id="cb52-572"><a href="#cb52-572" aria-hidden="true" tabindex="-1"></a>         e11 |  -.1529434   .7360252    -0.21   0.836    -1.600695    1.294808</span>
<span id="cb52-573"><a href="#cb52-573" aria-hidden="true" tabindex="-1"></a>         e12 |  -.0194963   .7348633    -0.03   0.979    -1.464963     1.42597</span>
<span id="cb52-574"><a href="#cb52-574" aria-hidden="true" tabindex="-1"></a>------------------------------------------------------------------------------</span>
<span id="cb52-575"><a href="#cb52-575" aria-hidden="true" tabindex="-1"></a>* Parameter e2 taken <span class="kw">as</span> constant term <span class="kw">in</span> <span class="kw">model</span> &amp; ANOVA <span class="kw">table</span></span>
<span id="cb52-576"><a href="#cb52-576" aria-hidden="true" tabindex="-1"></a> (SEs, P <span class="kw">values</span>, CIs, and correlations are asymptotic approximations)</span>
<span id="cb52-577"><a href="#cb52-577" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-578"><a href="#cb52-578" aria-hidden="true" tabindex="-1"></a>. </span>
<span id="cb52-579"><a href="#cb52-579" aria-hidden="true" tabindex="-1"></a>. <span class="kw">program</span> <span class="kw">drop</span> <span class="dt">_all</span></span>
<span id="cb52-580"><a href="#cb52-580" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-581"><a href="#cb52-581" aria-hidden="true" tabindex="-1"></a>. <span class="fu">log</span> <span class="kw">close</span></span>
<span id="cb52-582"><a href="#cb52-582" aria-hidden="true" tabindex="-1"></a>      <span class="bn">name</span>:  &lt;unnamed&gt;</span>
<span id="cb52-583"><a href="#cb52-583" aria-hidden="true" tabindex="-1"></a>       <span class="fu">log</span>:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt</span>
<span id="cb52-584"><a href="#cb52-584" aria-hidden="true" tabindex="-1"></a>&gt; er-8\system_nocon.<span class="fu">log</span></span>
<span id="cb52-585"><a href="#cb52-585" aria-hidden="true" tabindex="-1"></a>  <span class="fu">log</span> <span class="dv">type</span>:  <span class="bn">text</span></span>
<span id="cb52-586"><a href="#cb52-586" aria-hidden="true" tabindex="-1"></a> closed <span class="kw">on</span>:  24 Jun 2024, 00:34:17</span>
<span id="cb52-587"><a href="#cb52-587" aria-hidden="true" tabindex="-1"></a>----------------------------------------------------------------------------------</span>
<span id="cb52-588"><a href="#cb52-588" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-589"><a href="#cb52-589" aria-hidden="true" tabindex="-1"></a>. <span class="kw">exit</span></span>
<span id="cb52-590"><a href="#cb52-590" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb52-591"><a href="#cb52-591" aria-hidden="true" tabindex="-1"></a><span class="kw">end</span> <span class="kw">of</span> <span class="kw">do</span>-file</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
</section>
<section id="my-code-4" class="level3">
<h3 class="anchored" data-anchor-id="my-code-4">My code</h3>
<section id="system_nocom.do-1" class="level4">
<h4 class="anchored" data-anchor-id="system_nocom.do-1">system_nocom.do</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> wdth, <span class="at">hght_t =</span> hght, <span class="at">wght_t =</span> weight, <span class="at">hp_t =</span> hp, <span class="at">four_t =</span> four,</span>
<span id="cb53-5"><a href="#cb53-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> tran, <span class="at">ps_t =</span> ps, <span class="at">ac_t =</span> ac</span>
<span id="cb53-6"><a href="#cb53-6" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-7"><a href="#cb53-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-8"><a href="#cb53-8" aria-hidden="true" tabindex="-1"></a>car_7990 <span class="ot">&lt;-</span> feenstra_88<span class="sc">$</span>car_7990 <span class="sc">%&gt;%</span></span>
<span id="cb53-9"><a href="#cb53-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">ve =</span> <span class="dv">1</span>) <span class="sc">%&gt;%</span></span>
<span id="cb53-10"><a href="#cb53-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">rename</span>(</span>
<span id="cb53-11"><a href="#cb53-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> wdth, <span class="at">hght_c =</span> hght, <span class="at">wght_c =</span> wght, <span class="at">hp_c =</span> hp, <span class="at">four_c =</span> four,</span>
<span id="cb53-12"><a href="#cb53-12" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> tran, <span class="at">ps_c =</span> ps, <span class="at">ac_c =</span> ac</span>
<span id="cb53-13"><a href="#cb53-13" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-14"><a href="#cb53-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-15"><a href="#cb53-15" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb53-16"><a href="#cb53-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_rows</span>(car_7990) <span class="sc">%&gt;%</span></span>
<span id="cb53-17"><a href="#cb53-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-18"><a href="#cb53-18" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_c), <span class="dv">0</span>, wdth_c),</span>
<span id="cb53-19"><a href="#cb53-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_c), <span class="dv">0</span>, hght_c),</span>
<span id="cb53-20"><a href="#cb53-20" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_c), <span class="dv">0</span>, wght_c),</span>
<span id="cb53-21"><a href="#cb53-21" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_c), <span class="dv">0</span>, hp_c),</span>
<span id="cb53-22"><a href="#cb53-22" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_c), <span class="dv">0</span>, four_c),</span>
<span id="cb53-23"><a href="#cb53-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_c), <span class="dv">0</span>, tran_c),</span>
<span id="cb53-24"><a href="#cb53-24" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_c), <span class="dv">0</span>, ps_c),</span>
<span id="cb53-25"><a href="#cb53-25" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_c =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_c), <span class="dv">0</span>, ac_c),</span>
<span id="cb53-26"><a href="#cb53-26" aria-hidden="true" tabindex="-1"></a>    <span class="at">wdth_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wdth_t), <span class="dv">0</span>, wdth_t),</span>
<span id="cb53-27"><a href="#cb53-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">hght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hght_t), <span class="dv">0</span>, hght_t),</span>
<span id="cb53-28"><a href="#cb53-28" aria-hidden="true" tabindex="-1"></a>    <span class="at">wght_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(wght_t), <span class="dv">0</span>, wght_t),</span>
<span id="cb53-29"><a href="#cb53-29" aria-hidden="true" tabindex="-1"></a>    <span class="at">hp_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(hp_t), <span class="dv">0</span>, hp_t),</span>
<span id="cb53-30"><a href="#cb53-30" aria-hidden="true" tabindex="-1"></a>    <span class="at">four_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(four_t), <span class="dv">0</span>, four_t),</span>
<span id="cb53-31"><a href="#cb53-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">tran_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(tran_t), <span class="dv">0</span>, tran_t),</span>
<span id="cb53-32"><a href="#cb53-32" aria-hidden="true" tabindex="-1"></a>    <span class="at">ps_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ps_t), <span class="dv">0</span>, ps_t),</span>
<span id="cb53-33"><a href="#cb53-33" aria-hidden="true" tabindex="-1"></a>    <span class="at">ac_t =</span> <span class="fu">ifelse</span>(<span class="fu">is.na</span>(ac_t), <span class="dv">0</span>, ac_t)</span>
<span id="cb53-34"><a href="#cb53-34" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb53-35"><a href="#cb53-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-36"><a href="#cb53-36" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb53-37"><a href="#cb53-37" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(year) <span class="sc">%&gt;%</span></span>
<span id="cb53-38"><a href="#cb53-38" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">freq =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb53-39"><a href="#cb53-39" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ungroup</span>() <span class="sc">%&gt;%</span></span>
<span id="cb53-40"><a href="#cb53-40" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb53-41"><a href="#cb53-41" aria-hidden="true" tabindex="-1"></a>    <span class="at">percent =</span> freq <span class="sc">/</span> <span class="fu">sum</span>(freq) <span class="sc">*</span> <span class="dv">100</span>,</span>
<span id="cb53-42"><a href="#cb53-42" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum =</span> <span class="fu">cumsum</span>(percent)</span>
<span id="cb53-43"><a href="#cb53-43" aria-hidden="true" tabindex="-1"></a>  )</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 × 4
    year  freq percent    cum
   &lt;dbl&gt; &lt;int&gt;   &lt;dbl&gt;  &lt;dbl&gt;
 1    79    31    7.67   7.67
 2    80    34    8.42  16.1 
 3    81    35    8.66  24.8 
 4    82    35    8.66  33.4 
 5    83    36    8.91  42.3 
 6    84    40    9.90  52.2 
 7    85    43   10.6   62.9 
 8    86    33    8.17  71.0 
 9    87    35    8.66  79.7 
10    88    30    7.43  87.1 
11    89    26    6.44  93.6 
12    90    26    6.44 100   </code></pre>
</div>
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">yd =</span> <span class="fu">as.factor</span>(year <span class="sc">-</span> <span class="fu">min</span>(year) <span class="sc">+</span> <span class="dv">1</span>))</span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>truck_7990_dummy <span class="ot">&lt;-</span> <span class="fu">model.matrix</span>(<span class="sc">~</span> yd <span class="sc">-</span> <span class="dv">1</span>, <span class="at">data =</span> truck_7990)</span>
<span id="cb55-5"><a href="#cb55-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-6"><a href="#cb55-6" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb55-7"><a href="#cb55-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">bind_cols</span>(<span class="fu">as.data.frame</span>(truck_7990_dummy))</span>
<span id="cb55-8"><a href="#cb55-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-9"><a href="#cb55-9" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb55-10"><a href="#cb55-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb55-11"><a href="#cb55-11" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-12"><a href="#cb55-12" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-13"><a href="#cb55-13" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd2</span>
<span id="cb55-14"><a href="#cb55-14" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-15"><a href="#cb55-15" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd2 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-16"><a href="#cb55-16" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-17"><a href="#cb55-17" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd2</span>
<span id="cb55-18"><a href="#cb55-18" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-19"><a href="#cb55-19" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-20"><a href="#cb55-20" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-21"><a href="#cb55-21" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd3</span>
<span id="cb55-22"><a href="#cb55-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-23"><a href="#cb55-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd3 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-24"><a href="#cb55-24" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-25"><a href="#cb55-25" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd3</span>
<span id="cb55-26"><a href="#cb55-26" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-27"><a href="#cb55-27" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd4 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-28"><a href="#cb55-28" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-29"><a href="#cb55-29" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd4</span>
<span id="cb55-30"><a href="#cb55-30" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-31"><a href="#cb55-31" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd4 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-32"><a href="#cb55-32" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-33"><a href="#cb55-33" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd4</span>
<span id="cb55-34"><a href="#cb55-34" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-35"><a href="#cb55-35" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd5 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-36"><a href="#cb55-36" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-37"><a href="#cb55-37" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd5</span>
<span id="cb55-38"><a href="#cb55-38" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-39"><a href="#cb55-39" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd5 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-40"><a href="#cb55-40" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-41"><a href="#cb55-41" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd5</span>
<span id="cb55-42"><a href="#cb55-42" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-43"><a href="#cb55-43" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd6 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-44"><a href="#cb55-44" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-45"><a href="#cb55-45" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd6</span>
<span id="cb55-46"><a href="#cb55-46" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-47"><a href="#cb55-47" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd6 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-48"><a href="#cb55-48" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-49"><a href="#cb55-49" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd6</span>
<span id="cb55-50"><a href="#cb55-50" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-51"><a href="#cb55-51" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd7 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-52"><a href="#cb55-52" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-53"><a href="#cb55-53" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd7</span>
<span id="cb55-54"><a href="#cb55-54" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-55"><a href="#cb55-55" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd7 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-56"><a href="#cb55-56" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-57"><a href="#cb55-57" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd7</span>
<span id="cb55-58"><a href="#cb55-58" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-59"><a href="#cb55-59" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd8 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-60"><a href="#cb55-60" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-61"><a href="#cb55-61" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd8</span>
<span id="cb55-62"><a href="#cb55-62" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-63"><a href="#cb55-63" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd8 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-64"><a href="#cb55-64" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-65"><a href="#cb55-65" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd8</span>
<span id="cb55-66"><a href="#cb55-66" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-67"><a href="#cb55-67" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd9 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-68"><a href="#cb55-68" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-69"><a href="#cb55-69" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd9</span>
<span id="cb55-70"><a href="#cb55-70" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-71"><a href="#cb55-71" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd9 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-72"><a href="#cb55-72" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-73"><a href="#cb55-73" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd9</span>
<span id="cb55-74"><a href="#cb55-74" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-75"><a href="#cb55-75" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd10 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-76"><a href="#cb55-76" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-77"><a href="#cb55-77" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd10</span>
<span id="cb55-78"><a href="#cb55-78" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-79"><a href="#cb55-79" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd10 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-80"><a href="#cb55-80" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-81"><a href="#cb55-81" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd10</span>
<span id="cb55-82"><a href="#cb55-82" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-83"><a href="#cb55-83" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd11 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-84"><a href="#cb55-84" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-85"><a href="#cb55-85" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd11</span>
<span id="cb55-86"><a href="#cb55-86" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-87"><a href="#cb55-87" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd11 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-88"><a href="#cb55-88" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-89"><a href="#cb55-89" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd11</span>
<span id="cb55-90"><a href="#cb55-90" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-91"><a href="#cb55-91" aria-hidden="true" tabindex="-1"></a>    <span class="at">cyd12 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-92"><a href="#cb55-92" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">==</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-93"><a href="#cb55-93" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd12</span>
<span id="cb55-94"><a href="#cb55-94" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb55-95"><a href="#cb55-95" aria-hidden="true" tabindex="-1"></a>    <span class="at">tyd12 =</span> <span class="fu">case_when</span>(</span>
<span id="cb55-96"><a href="#cb55-96" aria-hidden="true" tabindex="-1"></a>      type <span class="sc">!=</span> <span class="st">"JT"</span> <span class="sc">~</span> <span class="dv">0</span>,</span>
<span id="cb55-97"><a href="#cb55-97" aria-hidden="true" tabindex="-1"></a>      <span class="cn">TRUE</span> <span class="sc">~</span> yd12</span>
<span id="cb55-98"><a href="#cb55-98" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb55-99"><a href="#cb55-99" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb55-100"><a href="#cb55-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-101"><a href="#cb55-101" aria-hidden="true" tabindex="-1"></a>initial_values <span class="ot">&lt;-</span> <span class="fu">list</span>(</span>
<span id="cb55-102"><a href="#cb55-102" aria-hidden="true" tabindex="-1"></a>  <span class="at">a3 =</span> <span class="dv">1</span>, <span class="at">a4 =</span> <span class="dv">1</span>, <span class="at">a5 =</span> <span class="dv">1</span>, <span class="at">a6 =</span> <span class="dv">1</span>, <span class="at">a7 =</span> <span class="dv">1</span>, <span class="at">a8 =</span> <span class="dv">1</span>, <span class="at">a9 =</span> <span class="dv">1</span>, <span class="at">a10 =</span> <span class="dv">1</span>, <span class="at">a11 =</span> <span class="dv">1</span>,</span>
<span id="cb55-103"><a href="#cb55-103" aria-hidden="true" tabindex="-1"></a>  <span class="at">a12 =</span> <span class="dv">1</span>,</span>
<span id="cb55-104"><a href="#cb55-104" aria-hidden="true" tabindex="-1"></a>  <span class="at">b2 =</span> <span class="fl">0.1</span>, <span class="at">b3 =</span> <span class="fl">0.1</span>, <span class="at">b4 =</span> <span class="fl">0.1</span>, <span class="at">b5 =</span> <span class="fl">0.1</span>, <span class="at">b6 =</span> <span class="fl">0.1</span>, <span class="at">b7 =</span> <span class="fl">0.1</span>, <span class="at">b8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-105"><a href="#cb55-105" aria-hidden="true" tabindex="-1"></a>  <span class="at">b9 =</span> <span class="fl">0.1</span>, <span class="at">b10 =</span> <span class="fl">0.1</span>, <span class="at">b11 =</span> <span class="fl">0.1</span>, <span class="at">b12 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-106"><a href="#cb55-106" aria-hidden="true" tabindex="-1"></a>  <span class="at">c1 =</span> <span class="fl">0.1</span>, <span class="at">c2 =</span> <span class="fl">0.1</span>, <span class="at">c3 =</span> <span class="fl">0.1</span>, <span class="at">c4 =</span> <span class="fl">0.1</span>, <span class="at">c5 =</span> <span class="fl">0.1</span>, <span class="at">c6 =</span> <span class="fl">0.1</span>, <span class="at">c7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-107"><a href="#cb55-107" aria-hidden="true" tabindex="-1"></a>  <span class="at">c8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-108"><a href="#cb55-108" aria-hidden="true" tabindex="-1"></a>  <span class="at">d1 =</span> <span class="fl">0.1</span>, <span class="at">d2 =</span> <span class="fl">0.1</span>, <span class="at">d3 =</span> <span class="fl">0.1</span>, <span class="at">d4 =</span> <span class="fl">0.1</span>, <span class="at">d5 =</span> <span class="fl">0.1</span>, <span class="at">d6 =</span> <span class="fl">0.1</span>, <span class="at">d7 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-109"><a href="#cb55-109" aria-hidden="true" tabindex="-1"></a>  <span class="at">d8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-110"><a href="#cb55-110" aria-hidden="true" tabindex="-1"></a>  <span class="at">e2 =</span> <span class="fl">0.1</span>, <span class="at">e3 =</span> <span class="fl">0.1</span>, <span class="at">e4 =</span> <span class="fl">0.1</span>, <span class="at">e5 =</span> <span class="fl">0.1</span>, <span class="at">e6 =</span> <span class="fl">0.1</span>, <span class="at">e7 =</span> <span class="fl">0.1</span>, <span class="at">e8 =</span> <span class="fl">0.1</span>,</span>
<span id="cb55-111"><a href="#cb55-111" aria-hidden="true" tabindex="-1"></a>  <span class="at">e9 =</span> <span class="fl">0.1</span>, <span class="at">e10 =</span> <span class="fl">0.1</span>, <span class="at">e11 =</span> <span class="fl">0.1</span>, <span class="at">e12 =</span> <span class="fl">0.1</span></span>
<span id="cb55-112"><a href="#cb55-112" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-113"><a href="#cb55-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-114"><a href="#cb55-114" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb55-115"><a href="#cb55-115" aria-hidden="true" tabindex="-1"></a>  price <span class="sc">~</span> a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb55-116"><a href="#cb55-116" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb55-117"><a href="#cb55-117" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span> b7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb55-118"><a href="#cb55-118" aria-hidden="true" tabindex="-1"></a>      b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span> b12 <span class="sc">*</span> cyd12 <span class="sc">+</span></span>
<span id="cb55-119"><a href="#cb55-119" aria-hidden="true" tabindex="-1"></a>      c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span> c5 <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb55-120"><a href="#cb55-120" aria-hidden="true" tabindex="-1"></a>      c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb55-121"><a href="#cb55-121" aria-hidden="true" tabindex="-1"></a>    <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span> e7 <span class="sc">*</span> tyd7 <span class="sc">+</span></span>
<span id="cb55-122"><a href="#cb55-122" aria-hidden="true" tabindex="-1"></a>      e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span> e12 <span class="sc">*</span> tyd12 <span class="sc">+</span></span>
<span id="cb55-123"><a href="#cb55-123" aria-hidden="true" tabindex="-1"></a>      d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span> d5 <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb55-124"><a href="#cb55-124" aria-hidden="true" tabindex="-1"></a>      d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb55-125"><a href="#cb55-125" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb55-126"><a href="#cb55-126" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb55-127"><a href="#cb55-127" aria-hidden="true" tabindex="-1"></a>  <span class="co"># adjust parameters to account to slow convergence</span></span>
<span id="cb55-128"><a href="#cb55-128" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb55-129"><a href="#cb55-129" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb55-130"><a href="#cb55-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-131"><a href="#cb55-131" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: price ~ a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + a7 * 
    cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12 + exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + b5 * 
    cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + b10 * 
    cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * wdth_c + 
    c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + c7 * 
    ac_c + c8) + exp(e2 * tyd2 + e3 * tyd3 + e4 * tyd4 + e5 * 
    tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * tyd9 + e10 * 
    tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + d2 * wdth_t + 
    d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * ps_t + d7 * 
    four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3  -232.06287  893.96625  -0.260 0.795332    
a4  -632.87850  914.45900  -0.692 0.489338    
a5  -367.97647  876.38040  -0.420 0.674825    
a6   -48.30074  863.33409  -0.056 0.955416    
a7  -749.19564  928.78692  -0.807 0.420413    
a8   187.75024  939.25918   0.200 0.841679    
a9   333.01836 1009.60725   0.330 0.741708    
a10  243.82112 1132.40125   0.215 0.829646    
a11 -211.61067 1212.77220  -0.174 0.861583    
a12   11.61149 1219.90438   0.010 0.992411    
b2     0.01556    0.04777   0.326 0.744779    
b3     0.16598    0.13240   1.254 0.210804    
b4     0.27475    0.12216   2.249 0.025124 *  
b5     0.24519    0.11990   2.045 0.041592 *  
b6     0.26695    0.11691   2.283 0.022994 *  
b7     0.36389    0.11358   3.204 0.001478 ** 
b8     0.33385    0.11688   2.856 0.004537 ** 
b9     0.40608    0.11768   3.451 0.000626 ***
b10    0.46226    0.11912   3.881 0.000124 ***
b11    0.55678    0.11831   4.706 3.62e-06 ***
b12    0.51644    0.12254   4.214 3.18e-05 ***
c1     0.47758    0.08994   5.310 1.93e-07 ***
c2     0.21440    0.04811   4.457 1.12e-05 ***
c3    -0.39686    0.04746  -8.362 1.41e-15 ***
c4     0.28379    0.03979   7.132 5.56e-12 ***
c5     0.06936    0.02017   3.439 0.000653 ***
c6     0.09921    0.02178   4.555 7.20e-06 ***
c7     0.16038    0.02163   7.415 8.94e-13 ***
c8     8.38888    0.20671  40.583  &lt; 2e-16 ***
d1     0.88011    0.21681   4.059 6.05e-05 ***
d2     0.47431    0.54808   0.865 0.387397    
d3    -0.15194    0.16103  -0.944 0.346051    
d4     0.89964    0.34067   2.641 0.008636 ** 
d5     0.25704    0.11574   2.221 0.026994 *  
d6     0.02296    0.10258   0.224 0.822986    
d7     0.64556    0.26226   2.462 0.014309 *  
d8     3.42341    3.80931   0.899 0.369421    
e2    -0.75842    1.13213  -0.670 0.503352    
e3     0.38740    0.33106   1.170 0.242720    
e4     0.35839    0.31518   1.137 0.256252    
e5     0.10602    0.32166   0.330 0.741881    
e6     0.13491    0.32069   0.421 0.674237    
e7     0.04074    0.30751   0.132 0.894680    
e8     0.20083    0.31805   0.631 0.528160    
e9     0.09907    0.31555   0.314 0.753733    
e10    0.40385    0.36546   1.105 0.269884    
e11    0.43926    0.34766   1.263 0.207252    
e12    0.48634    0.35567   1.367 0.172359    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 971.1 on 356 degrees of freedom

Number of iterations to convergence: 46 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>fit_coef <span class="ot">&lt;-</span> <span class="fu">coef</span>(fit)</span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a>truck_7990 <span class="ot">&lt;-</span> truck_7990 <span class="sc">%&gt;%</span></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a>    <span class="at">winv =</span> <span class="fu">case_when</span>(</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">1</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"b2"</span>] <span class="sc">*</span> cyd2 <span class="sc">+</span> fit_coef[<span class="st">"b3"</span>] <span class="sc">*</span> cyd3 <span class="sc">+</span></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b4"</span>] <span class="sc">*</span> cyd4 <span class="sc">+</span> fit_coef[<span class="st">"b5"</span>] <span class="sc">*</span> cyd5 <span class="sc">+</span> fit_coef[<span class="st">"b6"</span>] <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b7"</span>] <span class="sc">*</span> cyd7 <span class="sc">+</span> fit_coef[<span class="st">"b8"</span>] <span class="sc">*</span> cyd8 <span class="sc">+</span> fit_coef[<span class="st">"b9"</span>] <span class="sc">*</span> cyd9 <span class="sc">+</span></span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b10"</span>] <span class="sc">*</span> cyd10 <span class="sc">+</span> fit_coef[<span class="st">"b11"</span>] <span class="sc">*</span> cyd11 <span class="sc">+</span></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"b12"</span>] <span class="sc">*</span> cyd12 <span class="sc">+</span> fit_coef[<span class="st">"c1"</span>] <span class="sc">*</span> wght_c <span class="sc">+</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c2"</span>] <span class="sc">*</span> wdth_c <span class="sc">+</span> fit_coef[<span class="st">"c3"</span>] <span class="sc">*</span> hght_c <span class="sc">+</span></span>
<span id="cb57-12"><a href="#cb57-12" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c4"</span>] <span class="sc">*</span> hp_c <span class="sc">+</span> fit_coef[<span class="st">"c5"</span>] <span class="sc">*</span> tran_c <span class="sc">+</span></span>
<span id="cb57-13"><a href="#cb57-13" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"c6"</span>] <span class="sc">*</span> ps_c <span class="sc">+</span> fit_coef[<span class="st">"c7"</span>] <span class="sc">*</span> ac_c <span class="sc">+</span> fit_coef[<span class="st">"c8"</span>]),</span>
<span id="cb57-14"><a href="#cb57-14" aria-hidden="true" tabindex="-1"></a>      ve <span class="sc">==</span> <span class="dv">2</span> <span class="sc">~</span> <span class="dv">1</span> <span class="sc">/</span> <span class="fu">exp</span>(fit_coef[<span class="st">"e2"</span>] <span class="sc">*</span> tyd2 <span class="sc">+</span> fit_coef[<span class="st">"e3"</span>] <span class="sc">*</span> tyd3 <span class="sc">+</span></span>
<span id="cb57-15"><a href="#cb57-15" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e4"</span>] <span class="sc">*</span> tyd4 <span class="sc">+</span> fit_coef[<span class="st">"e5"</span>] <span class="sc">*</span> tyd5 <span class="sc">+</span> fit_coef[<span class="st">"e6"</span>] <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb57-16"><a href="#cb57-16" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e7"</span>] <span class="sc">*</span> tyd7 <span class="sc">+</span> fit_coef[<span class="st">"e8"</span>] <span class="sc">*</span> tyd8 <span class="sc">+</span> fit_coef[<span class="st">"e9"</span>] <span class="sc">*</span> tyd9 <span class="sc">+</span></span>
<span id="cb57-17"><a href="#cb57-17" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e10"</span>] <span class="sc">*</span> tyd10 <span class="sc">+</span> fit_coef[<span class="st">"e11"</span>] <span class="sc">*</span> tyd11 <span class="sc">+</span></span>
<span id="cb57-18"><a href="#cb57-18" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"e12"</span>] <span class="sc">*</span> tyd12 <span class="sc">+</span> fit_coef[<span class="st">"d1"</span>] <span class="sc">*</span> wght_t <span class="sc">+</span></span>
<span id="cb57-19"><a href="#cb57-19" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d2"</span>] <span class="sc">*</span> wdth_t <span class="sc">+</span> fit_coef[<span class="st">"d3"</span>] <span class="sc">*</span> hght_t <span class="sc">+</span></span>
<span id="cb57-20"><a href="#cb57-20" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d4"</span>] <span class="sc">*</span> hp_t <span class="sc">+</span> fit_coef[<span class="st">"d5"</span>] <span class="sc">*</span> tran_t <span class="sc">+</span></span>
<span id="cb57-21"><a href="#cb57-21" aria-hidden="true" tabindex="-1"></a>        fit_coef[<span class="st">"d6"</span>] <span class="sc">*</span> ps_t <span class="sc">+</span> fit_coef[<span class="st">"d7"</span>] <span class="sc">*</span> four_t <span class="sc">+</span> fit_coef[<span class="st">"d8"</span>]),</span>
<span id="cb57-22"><a href="#cb57-22" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb57-23"><a href="#cb57-23" aria-hidden="true" tabindex="-1"></a>    <span class="at">nprice =</span> price <span class="sc">*</span> winv</span>
<span id="cb57-24"><a href="#cb57-24" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb57-25"><a href="#cb57-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-26"><a href="#cb57-26" aria-hidden="true" tabindex="-1"></a>fit2 <span class="ot">&lt;-</span> <span class="fu">nlsLM</span>(</span>
<span id="cb57-27"><a href="#cb57-27" aria-hidden="true" tabindex="-1"></a>  nprice <span class="sc">~</span>winv <span class="sc">*</span> (a3 <span class="sc">*</span> cyd3 <span class="sc">+</span> a4 <span class="sc">*</span> cyd4 <span class="sc">+</span> a5 <span class="sc">*</span> cyd5 <span class="sc">+</span> a6 <span class="sc">*</span> cyd6 <span class="sc">+</span> a7 <span class="sc">*</span> cyd7 <span class="sc">+</span></span>
<span id="cb57-28"><a href="#cb57-28" aria-hidden="true" tabindex="-1"></a>    a8 <span class="sc">*</span> cyd8 <span class="sc">+</span> a9 <span class="sc">*</span> cyd9 <span class="sc">+</span> a10 <span class="sc">*</span> cyd10 <span class="sc">+</span> a11 <span class="sc">*</span> cyd11 <span class="sc">+</span> a12 <span class="sc">*</span> cyd12) <span class="sc">+</span></span>
<span id="cb57-29"><a href="#cb57-29" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(b2 <span class="sc">*</span> cyd2 <span class="sc">+</span> b3 <span class="sc">*</span> cyd3 <span class="sc">+</span> b4 <span class="sc">*</span> cyd4 <span class="sc">+</span> b5 <span class="sc">*</span> cyd5 <span class="sc">+</span> b6 <span class="sc">*</span> cyd6 <span class="sc">+</span></span>
<span id="cb57-30"><a href="#cb57-30" aria-hidden="true" tabindex="-1"></a>      b7 <span class="sc">*</span> cyd7 <span class="sc">+</span> b8 <span class="sc">*</span> cyd8 <span class="sc">+</span> b9 <span class="sc">*</span> cyd9 <span class="sc">+</span> b10 <span class="sc">*</span> cyd10 <span class="sc">+</span> b11 <span class="sc">*</span> cyd11 <span class="sc">+</span></span>
<span id="cb57-31"><a href="#cb57-31" aria-hidden="true" tabindex="-1"></a>      b12 <span class="sc">*</span> cyd12 <span class="sc">+</span> c1 <span class="sc">*</span> wght_c <span class="sc">+</span> c2 <span class="sc">*</span> wdth_c <span class="sc">+</span> c3 <span class="sc">*</span> hght_c <span class="sc">+</span> c4 <span class="sc">*</span> hp_c <span class="sc">+</span></span>
<span id="cb57-32"><a href="#cb57-32" aria-hidden="true" tabindex="-1"></a>      c5 <span class="sc">*</span> tran_c <span class="sc">+</span> c6 <span class="sc">*</span> ps_c <span class="sc">+</span> c7 <span class="sc">*</span> ac_c <span class="sc">+</span> c8) <span class="sc">+</span></span>
<span id="cb57-33"><a href="#cb57-33" aria-hidden="true" tabindex="-1"></a>    winv <span class="sc">*</span> <span class="fu">exp</span>(e2 <span class="sc">*</span> tyd2 <span class="sc">+</span> e3 <span class="sc">*</span> tyd3 <span class="sc">+</span> e4 <span class="sc">*</span> tyd4 <span class="sc">+</span> e5 <span class="sc">*</span> tyd5 <span class="sc">+</span> e6 <span class="sc">*</span> tyd6 <span class="sc">+</span></span>
<span id="cb57-34"><a href="#cb57-34" aria-hidden="true" tabindex="-1"></a>      e7 <span class="sc">*</span> tyd7 <span class="sc">+</span> e8 <span class="sc">*</span> tyd8 <span class="sc">+</span> e9 <span class="sc">*</span> tyd9 <span class="sc">+</span> e10 <span class="sc">*</span> tyd10 <span class="sc">+</span> e11 <span class="sc">*</span> tyd11 <span class="sc">+</span></span>
<span id="cb57-35"><a href="#cb57-35" aria-hidden="true" tabindex="-1"></a>      e12 <span class="sc">*</span> tyd12 <span class="sc">+</span> d1 <span class="sc">*</span> wght_t <span class="sc">+</span> d2 <span class="sc">*</span> wdth_t <span class="sc">+</span> d3 <span class="sc">*</span> hght_t <span class="sc">+</span> d4 <span class="sc">*</span> hp_t <span class="sc">+</span></span>
<span id="cb57-36"><a href="#cb57-36" aria-hidden="true" tabindex="-1"></a>      d5 <span class="sc">*</span> tran_t <span class="sc">+</span> d6 <span class="sc">*</span> ps_t <span class="sc">+</span> d7 <span class="sc">*</span> four_t <span class="sc">+</span> d8),</span>
<span id="cb57-37"><a href="#cb57-37" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> truck_7990,</span>
<span id="cb57-38"><a href="#cb57-38" aria-hidden="true" tabindex="-1"></a>  <span class="at">start =</span> initial_values,</span>
<span id="cb57-39"><a href="#cb57-39" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">nls.lm.control</span>(<span class="at">maxiter =</span> <span class="dv">1000</span>, <span class="at">maxfev =</span> <span class="dv">10000</span>)</span>
<span id="cb57-40"><a href="#cb57-40" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb57-41"><a href="#cb57-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-42"><a href="#cb57-42" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(fit2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>
Formula: nprice ~ winv * (a3 * cyd3 + a4 * cyd4 + a5 * cyd5 + a6 * cyd6 + 
    a7 * cyd7 + a8 * cyd8 + a9 * cyd9 + a10 * cyd10 + a11 * cyd11 + 
    a12 * cyd12) + winv * exp(b2 * cyd2 + b3 * cyd3 + b4 * cyd4 + 
    b5 * cyd5 + b6 * cyd6 + b7 * cyd7 + b8 * cyd8 + b9 * cyd9 + 
    b10 * cyd10 + b11 * cyd11 + b12 * cyd12 + c1 * wght_c + c2 * 
    wdth_c + c3 * hght_c + c4 * hp_c + c5 * tran_c + c6 * ps_c + 
    c7 * ac_c + c8) + winv * exp(e2 * tyd2 + e3 * tyd3 + e4 * 
    tyd4 + e5 * tyd5 + e6 * tyd6 + e7 * tyd7 + e8 * tyd8 + e9 * 
    tyd9 + e10 * tyd10 + e11 * tyd11 + e12 * tyd12 + d1 * wght_t + 
    d2 * wdth_t + d3 * hght_t + d4 * hp_t + d5 * tran_t + d6 * 
    ps_t + d7 * four_t + d8)

Parameters:
      Estimate Std. Error t value Pr(&gt;|t|)    
a3   6.538e+02  2.721e+02   2.403 0.016762 *  
a4   1.301e+03  2.979e+02   4.365 1.67e-05 ***
a5   1.423e+03  2.842e+02   5.007 8.72e-07 ***
a6   1.938e+03  2.927e+02   6.620 1.32e-10 ***
a7   1.971e+03  2.748e+02   7.172 4.31e-12 ***
a8   2.478e+03  3.573e+02   6.936 1.91e-11 ***
a9   2.834e+03  2.997e+02   9.459  &lt; 2e-16 ***
a10  3.732e+03  5.234e+02   7.130 5.63e-12 ***
a11  4.650e+03  5.096e+02   9.125  &lt; 2e-16 ***
a12  5.719e+03  5.764e+02   9.922  &lt; 2e-16 ***
b2  -5.319e-03  6.580e-02  -0.081 0.935618    
b3  -1.247e-02  9.428e-02  -0.132 0.894871    
b4  -9.225e-02  1.060e-01  -0.870 0.384779    
b5  -1.341e-01  1.021e-01  -1.314 0.189793    
b6  -1.575e-01  1.045e-01  -1.507 0.132733    
b7  -9.892e-02  9.792e-02  -1.010 0.313095    
b8  -6.148e-02  1.125e-01  -0.546 0.585133    
b9   6.130e-02  1.017e-01   0.603 0.546933    
b10 -1.094e-02  1.215e-01  -0.090 0.928310    
b11 -1.361e-01  1.382e-01  -0.985 0.325535    
b12 -3.865e-01  1.695e-01  -2.281 0.023133 *  
c1   4.558e-01  2.257e-01   2.019 0.044207 *  
c2   5.981e-01  2.570e-01   2.327 0.020522 *  
c3  -2.753e-01  1.126e-01  -2.444 0.015028 *  
c4   6.650e-01  1.146e-01   5.804 1.43e-08 ***
c5   1.549e-01  5.320e-02   2.911 0.003831 ** 
c6   1.789e-01  5.407e-02   3.309 0.001031 ** 
c7   1.813e-01  5.576e-02   3.252 0.001257 ** 
c8   5.149e+00  1.476e+00   3.489 0.000547 ***
d1   4.063e-01  6.114e-02   6.645 1.14e-10 ***
d2   1.191e-02  4.744e-02   0.251 0.801843    
d3   6.573e-02  3.308e-02   1.987 0.047646 *  
d4   2.526e-01  4.697e-02   5.378 1.37e-07 ***
d5   3.851e-02  1.365e-02   2.820 0.005068 ** 
d6  -2.048e-02  3.637e-02  -0.563 0.573782    
d7   2.448e-01  3.168e-02   7.726 1.14e-13 ***
d8   7.326e+00  3.043e-01  24.072  &lt; 2e-16 ***
e2   2.753e-02  1.555e-02   1.771 0.077445 .  
e3   2.568e-01  2.406e-02  10.670  &lt; 2e-16 ***
e4   2.587e-01  2.458e-02  10.524  &lt; 2e-16 ***
e5   1.887e-01  2.371e-02   7.960 2.32e-14 ***
e6   1.903e-01  2.388e-02   7.968 2.21e-14 ***
e7   1.387e-01  2.473e-02   5.606 4.16e-08 ***
e8   1.847e-01  2.676e-02   6.901 2.37e-11 ***
e9   1.956e-01  2.944e-02   6.643 1.15e-10 ***
e10  2.804e-01  3.795e-02   7.390 1.06e-12 ***
e11  3.098e-01  3.738e-02   8.289 2.36e-15 ***
e12  3.654e-01  3.774e-02   9.682  &lt; 2e-16 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

Residual standard error: 0.1613 on 356 degrees of freedom

Number of iterations to convergence: 28 
Achieved convergence tolerance: 1.49e-08</code></pre>
</div>
</div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
<nav class="page-navigation">
  <div class="nav-page nav-page-previous">
      <a href="./chapter7.html" class="pagination-link">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text"><span class="chapter-title">Chapter 7. Import Tariffs and Dumping</span></span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
  </div>
</nav>
</div> <!-- /content -->



</body></html>