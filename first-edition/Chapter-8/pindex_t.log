----------------------------------------------------------------------------------
      name:  <unnamed>
       log:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt
> er-8\pindex_t.log
  log type:  text
 opened on:  19 Jun 2024, 19:10:10

. 
. use Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tr
> uck_7990,clear

. keep year model type price quan

. 
. preserve

. keep if year==80
(110 observations deleted)

. keep model type price quan

. ren price price_80

. ren quan quan_80

. sort model

. save Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\t
> ruck_80,replace
file Z:\home\pacha\github\advanced-international-trade\first-edition\Chapter-8\tru
> ck_80.dta saved

. restore

. 
. sort model

. merge model using Z:\home\pacha\github\advanced-international-trade\first-editio
> n\Chapter-8\truck_80
(note: you are using old merge syntax; see [R] merge for new syntax)
variable model does not uniquely identify observations in the master data

. keep if _merge==3
(38 observations deleted)

. drop _merge

. 
. sort year model

. egen value_80=sum(price_80*quan_80), by(year)

. egen value_cp=sum(price*quan_80),by(year)

. gen lasp=value_cp/value_80

. 
. egen value_c=sum(price*quan), by(year)

. egen value_cq=sum(price_80*quan), by(year)

. gen pasp=value_c/value_cq
(21 missing values generated)

.  
. gen pindex=(lasp*pasp)^0.5
(21 missing values generated)

. 
. collapse (mean) pindex, by(year)

. list

     +-----------------+
     | year     pindex |
     |-----------------|
  1. |   79    .970215 |
  2. |   80          1 |
  3. |   81   1.278085 |
  4. |   82   1.309353 |
  5. |   83   1.210055 |
     |-----------------|
  6. |   84   1.230847 |
  7. |   85   1.252268 |
  8. |   86          . |
  9. |   87          . |
 10. |   88          . |
     |-----------------|
 11. |   89          . |
 12. |   90          . |
     +-----------------+

. 
. log close
      name:  <unnamed>
       log:  Z:\home\pacha\github\advanced-international-trade\first-edition\Chapt
> er-8\pindex_t.log
  log type:  text
 closed on:  19 Jun 2024, 19:10:11
----------------------------------------------------------------------------------
